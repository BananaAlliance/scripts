"use strict";(self.webpackChunk_rise_wallet_solflare_extension=self.webpackChunk_rise_wallet_solflare_extension||[]).push([["libs_sdk_cache_dist_index_js-libs_shared_dist_features_currencies_components_index_js-libs_so-068f9d"],{"../../libs/sdk/cache/dist/IndexedDbStore.js":function(e,s,t){t.d(s,{l:function(){return r}});var n=t("../../../node_modules/idb-keyval/dist/index.js");class r{constructor(e,s){this.dbName=e,this.name="IndexedDB",this._store=(0,n.MT)(e,s)}async get(e){return(await this.getPayload(e))?.[0]}async values(){return(0,n.VO)(this._store)}async getMany(e){return(0,n.yS)(e,this._store)}async putMany(e,s){const t=e.map((e=>{const t={data:e.data,expire:this.expiration(s),created:Date.now()/1e3};return[e.key,t]}));return await(0,n.vw)(t,this._store),!0}async put(e,s,t){const r={data:s,expire:this.expiration(t),created:Date.now()/1e3};return await(0,n.t8)(e,r,this._store),!0}async forget(e){return await(0,n.IV)(e,this._store),!0}async flush(){return await(0,n.ZH)(this._store),!0}async getPayload(e){const s=await(0,n.U2)(e,this._store);if(!s)return;const t=s;if(!(Date.now()>=t.expire))return[t.data,t.expire,t.created];await this.forget(e)}expiration(e){return 0===e?9999999999e3:Date.now()+1e3*e}}},"../../libs/sdk/cache/dist/MemoryStore.js":function(e,s,t){t.d(s,{O:function(){return n}});class n{constructor(){this.name="Memory",this._store={},this._store={}}values(){throw new Error("Method not implemented.")}getMany(e){throw new Error("Method not implemented.")}putMany(e,s){throw new Error("Method not implemented.")}async get(e){return(await this.getPayload(e))?.[0]}async put(e,s,t){const n={data:s,expire:this.expiration(t),created:Date.now()/1e3};return this._store[e]=n,!0}async forget(e){return delete this._store[e],!0}async flush(){return this._store={},!0}async getPayload(e){const s=this._store[e];if(!s)return;const t=s;if(!(Date.now()>=t.expire))return[t.data,t.expire,t.created];await this.forget(e)}expiration(e){return 0===e?9999999999e3:Date.now()+1e3*e}}},"../../libs/sdk/cache/dist/index.js":function(e,s,t){t.d(s,{L_:function(){return c}});var n=t("../../../node_modules/js-sha256/src/sha256.js"),r=t("../../libs/sdk/cache/dist/IndexedDbStore.js"),a=t("../../libs/sdk/cache/dist/MemoryStore.js"),o=t("../../../node_modules/@react-native-async-storage/async-storage/lib/module/index.js");class i{constructor(e,s){this.dbName=e,this.name="ReactNativeStore",this._dbName=e,this._storeName=s}_getKey(e){return`${this._dbName}:${this._storeName}:${e}`}async values(){throw new Error("ReactNativeStore.values Method not implemented.")}async getMany(e){return(await o.Z.multiGet(e.map(this._getKey))).map((([,e])=>JSON.parse(e??"{}")))}async putMany(e,s){if(!e?.length)return!1;const t=e.map((e=>{const t={data:e.data,expire:this.expiration(s),created:Date.now()/1e3};return[this._getKey(e.key),JSON.stringify(t)]}));return await o.Z.multiSet(t),!0}async get(e){return(await this.getPayload(this._getKey(e)))?.[0]}async put(e,s,t){const n={data:s,expire:this.expiration(t),created:Date.now()/1e3};return o.Z.setItem(this._getKey(e),JSON.stringify(n)),!0}async forget(e){return await o.Z.removeItem(this._getKey(e)),!0}async flush(){throw new Error("Not implemented")}async getPayload(e){const s=await o.Z.getItem(e);if(!s)return;const t=JSON.parse(s);if(!(Date.now()>=t.expire))return[t.data,t.expire,t.created];await o.Z.removeItem(e)}expiration(e){return 0===e?9999999999e3:Date.now()+1e3*e}}var l=t("../../libs/sdk/cache/dist/utils.js"),d=t("../../../node_modules/console-browserify/index.js");class c{constructor(e,s=""){this._store=e,this.prefix=s}async get(e,s,t=0){const n=await this._get(e);if(n||!s)return n;const r=await s();return await this.put(e,r,t),r}async values(){return this._store.values()}async getMany(e){const s=await Promise.all(e.map((e=>this.getKey(e))));return this._store.getMany(s)}async putMany(e,s){try{const t=await Promise.all(e.map((async e=>({key:await this.getKey(e.key),data:e.data}))));return this._store.putMany(t,s)}catch(e){return this.log("warning",`Unable to save cache. Error: ${e.message}`),!1}}async _get(e){try{const s=await this.getKey(e);return this._store.get(s)}catch(e){this.log("warning",`Unable to get cache. Error: ${e.message}`)}}async forever(e,s){try{return this.get(e,s,0)}catch(e){this.log("warning",`Unable to save (via forever) data into cache. Error: ${e.message}`)}}async put(e,s,t){try{const n=await this.getKey(e);return this._store.put(n,s,t)}catch(e){return this.log("warning",`Unable to save cache. Error: ${e.message}`),!1}}async forget(e){try{const s=await this.getKey(e);return this._store.forget(s)}catch(e){return this.log("warning",`Unable to forget (via forever) cache. Error: ${e.message}`),!1}}async flush(){try{return this._store.flush()}catch(e){return this.log("warning",`Unable to flush cache. Error: ${e.message}`),!1}}async getKey(e){return(0,n.sha256)(`${this.prefix}-${e}`)}log(e,s){d[e](`[Cache][${this._store.name}]${s}`)}static create(e){const s=e.driver||(0,l.s)();let t;switch(s){case"indexedDb":t=new r.l(e.dbName,e.storeName);break;case"memory":t=new a.O;break;case"reactNative":t=new i(e.dbName,e.storeName);break;default:throw new Error(`Unknown cache driver ${s}`)}return new c(t,e.prefix)}}},"../../libs/sdk/cache/dist/utils.js":function(e,s,t){t.d(s,{s:function(){return n}});const n=()=>globalThis.chrome||globalThis.browser?"indexedDb":"reactNative"},"../../libs/shared/dist/constants/autolock.js":function(e,s,t){t.d(s,{GC:function(){return o},pT:function(){return r},qA:function(){return a}});var n=t("../../libs/shared/dist/utils/localStorage/index.js");const r={IMMEDIATELY:0,ONE_MINUTE:1,FIVE_MINUTES:5,TEN_MINUTES:10,FIFTEEN_MINUTES:15,THIRTY_MINUTES:30,ONE_HOUR:60,FOUR_HOURS:240,EIGHT_HOURS:480,TWENTY_FOUR_HOURS:1440,NEVER:99999},a=(n.q$?r.IMMEDIATELY:r.TWENTY_FOUR_HOURS,{[r.IMMEDIATELY]:"Immediately",[r.ONE_MINUTE]:"1 minute",[r.FIVE_MINUTES]:"5 minutes",[r.TEN_MINUTES]:"10 minutes",[r.FIFTEEN_MINUTES]:"15 minutes",[r.THIRTY_MINUTES]:"30 minutes",[r.ONE_HOUR]:"1 hour",[r.FOUR_HOURS]:"4 hours",[r.EIGHT_HOURS]:"8 hours",[r.TWENTY_FOUR_HOURS]:"24 hours",[r.NEVER]:"Never"}),o=[{label:a[r.ONE_MINUTE],value:r.ONE_MINUTE},{label:a[r.FIVE_MINUTES],value:r.FIVE_MINUTES},{label:a[r.TEN_MINUTES],value:r.TEN_MINUTES},{label:a[r.FIFTEEN_MINUTES],value:r.FIFTEEN_MINUTES},{label:a[r.THIRTY_MINUTES],value:r.THIRTY_MINUTES},{label:a[r.ONE_HOUR],value:r.ONE_HOUR},{label:a[r.FOUR_HOURS],value:r.FOUR_HOURS},{label:a[r.EIGHT_HOURS],value:r.EIGHT_HOURS},{label:a[r.TWENTY_FOUR_HOURS],value:r.TWENTY_FOUR_HOURS},{label:a[r.NEVER],value:r.NEVER}]},"../../libs/shared/dist/features/currencies/components/CurrenciesSyncTask/index.js":function(e,s,t){var n=t("../../../node_modules/react/index.js"),r=t("../../libs/shared/dist/features/currencies/hooks/index.js"),a=t("../../../node_modules/console-browserify/index.js");s.Z=({requestPricesFetch:e,refreshIntervalMs:s})=>{const t=(0,r.Af)(),o=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{let t;const n=async()=>{try{await e()}catch(e){a.log("Unable to request fetch prices",e.message)}finally{s&&(t=setTimeout(n,s))}};return o.current?n():s&&(t=setTimeout(n,s)),o.current=!0,()=>{t&&clearTimeout(t)}}),[t,s,e]),null}},"../../libs/shared/dist/features/currencies/components/DisplayPercentageChange/index.js":function(e,s,t){var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../libs/shared/dist/utils/displayPrice.js");s.Z=({value:e,displayType:s="medium",showSign:t})=>{const a=Math.abs(+e)<.01&&0!==Math.abs(+e);return(0,n.jsxs)(n.Fragment,{children:[+e<0?"-":t?"+":"",a?"<0.01%":(0,r.ED)({amount:Math.abs(+e),displayType:s,suffix:"%"})]})}},"../../libs/shared/dist/features/currencies/components/DisplayTokenAmount/index.js":function(e,s,t){var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react-redux/es/index.js"),a=t("../../libs/shared/dist/utils/displayPrice.js"),o=t("../../libs/shared/dist/features/currencies/store/index.js");s.Z=({tokenAddress:e,tokenAmount:s,prefix:t,suffix:i,hideZero:l})=>{const d=(0,r.v9)(o.HX);return(0,n.jsx)(n.Fragment,{children:(0,a.ED)({amount:s,displayType:"amount",pricePerCoin:d[e],prefix:t,suffix:i,hideZero:l})})}},"../../libs/shared/dist/features/currencies/components/index.js":function(e,s,t){t.d(s,{Qj:function(){return r.Z},Tf:function(){return a.Z},sp:function(){return n.Z}}),t("../../libs/shared/dist/features/currencies/components/DisplayTokenFiatValue/index.js");var n=t("../../libs/shared/dist/features/currencies/components/DisplayComputedFiatValue/index.js"),r=(t("../../libs/shared/dist/features/currencies/components/CurrenciesSyncTask/index.js"),t("../../libs/shared/dist/features/currencies/components/DisplayTokenAmount/index.js")),a=(t("../../libs/shared/dist/features/currencies/components/DisplayTokenValue/index.js"),t("../../libs/shared/dist/features/currencies/components/DisplayPercentageChange/index.js"))},"../../libs/shared/dist/features/currencies/hooks/index.js":function(e,s,t){t.d(s,{Af:function(){return n.Z},__:function(){return a.Z},yF:function(){return r.Z}});var n=t("../../libs/shared/dist/features/currencies/hooks/useCurrentCurrency.js"),r=t("../../libs/shared/dist/features/currencies/hooks/useTokenFiatValue.js"),a=(t("../../libs/shared/dist/features/currencies/hooks/useTokenPrice.js"),t("../../libs/shared/dist/features/currencies/hooks/useCurrencyDisplay.js"));t("../../libs/shared/dist/features/currencies/hooks/useTokensPrice.js"),t("../../libs/shared/dist/features/currencies/hooks/useTokenUsdPrice.js")},"../../libs/shared/dist/features/currencies/hooks/useCurrencyDisplay.js":function(e,s,t){var n=t("../../../node_modules/react-redux/es/index.js"),r=t("../../libs/shared/dist/features/currencies/store/index.js");s.Z=(e,s="fiat")=>(0,n.v9)(r.vH)[e]||s},"../../libs/shared/dist/features/currencies/hooks/useTokenFiatValue.js":function(e,s,t){var n=t("../../libs/shared/dist/features/currencies/utils/index.js"),r=t("../../libs/shared/dist/features/currencies/hooks/useCurrentCurrency.js"),a=t("../../libs/shared/dist/features/currencies/hooks/useTokenPrice.js");s.Z=(e,s,t)=>{const o=(0,a.Z)(e)||0,i=(0,r.Z)(),l=Number(t??o);return{value:Number(s)*l,prefix:(0,n.MK)(i.ticker,i.symbol),price:l}}},"../../libs/shared/dist/features/currencies/hooks/useTokenPrice.js":function(e,s,t){var n=t("../../../node_modules/react-redux/es/index.js"),r=t("../../libs/shared/dist/features/currencies/store/index.js");s.Z=e=>(0,n.v9)(r.x1)[e]},"../../libs/shared/dist/features/currencies/store/actions/index.js":function(e,s,t){t.d(s,{$7:function(){return d},Bo:function(){return i},Fu:function(){return m},bO:function(){return c},c2:function(){return u},fh:function(){return p},ft:function(){return f},rS:function(){return l}});var n=t("../../libs/shared/dist/features/currencies/store/api/index.js"),r=t("../../libs/shared/dist/features/currencies/constants/index.js"),a=t("../../libs/shared/dist/features/currencies/store/selectors/index.js"),o=t("../../../node_modules/console-browserify/index.js");const i="PRICES_FETCH_SUCCESS",l="CONFIG_SET_CURRENCY",d="CONFIG_LOAD_CURRENCY_DISPLAYS",c="CONFIG_SET_CURRENCY_DISPLAY",u=(e,s)=>async(t,l)=>{const d=(0,a.pt)(l())||r.a7;t({type:"PRICES_FETCH_START"});try{let r=await n.x(e,d);return s&&(r=s(r)),t({type:i,payload:{currency:d,prices:r}}),r}catch(e){throw o.log(e),t({type:"PRICES_FETCH_ERROR"}),e}},f=(e,s)=>async t=>{t({type:l,payload:{currency:e}}),await(s?.(e))},m=(e,s,t)=>async(n,r)=>{n({type:c,payload:{configKey:e,display:s}});const o=(0,a.vH)(r());await(t?.(o))},p=e=>({type:d,payload:e})},"../../libs/shared/dist/features/currencies/store/api/index.js":function(e,s,t){t.d(s,{x:function(){return r}});var n=t("../../../node_modules/lodash/lodash.js");const r=async(e,s)=>{const t=(0,n.uniq)(e.map((e=>e.id))),r=s.toLowerCase(),a=await Promise.all((0,n.chunk)(t,150).map((async e=>{const s=await fetch(((e,s)=>`https://api.coingecko.com/api/v3/simple/price?include_24hr_change=true&vs_currencies=usd,${s}&ids=${e.join(",")}`)(e,r));if(!s.ok)throw new Error("Unable to load");return s.json()}))),o=a.flat().shift();return e.reduce(((e,s)=>{const t=o[s.id];return t&&t[r]?{...e,[s.key]:{price:t[r],change:t[`${r}_24h_change`]||0,usdPrice:t.usd,usdChange:t.usd_24h_change||0}}:e}),{})}},"../../libs/shared/dist/features/currencies/store/index.js":function(e,s,t){t.d(s,{AQ:function(){return a.AQ},Fu:function(){return r.Fu},HX:function(){return n.HX},IL:function(){return a.IL},aU:function(){return a.aU},c2:function(){return r.c2},fh:function(){return r.fh},ft:function(){return r.ft},ni:function(){return a.ni},pt:function(){return n.pt},vH:function(){return n.vH},x1:function(){return n.x1}});var n=t("../../libs/shared/dist/features/currencies/store/selectors/index.js"),r=t("../../libs/shared/dist/features/currencies/store/actions/index.js"),a=t("../../libs/shared/dist/features/currencies/store/reducers/index.js")},"../../libs/shared/dist/features/currencies/store/selectors/index.js":function(e,s,t){t.d(s,{HX:function(){return o},pt:function(){return n},vH:function(){return r},x1:function(){return i}}),t("../../libs/shared/dist/features/currencies/utils/index.js"),t("../../libs/shared/dist/features/currencies/constants/index.js");const n=e=>e.config.currency,r=e=>e.config.currencyDisplay,a=e=>e.data.prices,o=e=>a(e).USD||{},i=e=>{const s=n(e);return a(e)[s]||{}}},"../../libs/shared/dist/store/utils/api.js":function(e,s,t){t.d(s,{IV:function(){return c},U2:function(){return i},gz:function(){return l},kR:function(){return o},v_:function(){return d}});var n,r=t("../../../node_modules/axios/index.js"),a=t.n(r);function o(e){const s=e?._status;return s===n.LOADED}async function i(e,{headers:s,...t}={}){const n=await a().get(e,{headers:s,...t});return{body:n.data,status:n.status}}async function l(e,s={},{headers:t,...n}={}){const r=await a().put(e,s,{headers:t,...n});return{body:r.data,status:r.status}}async function d(e,s={},{headers:t,...n}={}){const r=await a().post(e,s,{headers:t,...n});return{body:r.data,status:r.status}}async function c(e,{headers:s,...t}={}){const n=await a().delete(e,{headers:s,...t});return{body:n.data,status:n.status}}!function(e){e.UNSET="UNSET",e.FETCHING="FETCHING",e.LOADED="LOADED",e.ERROR="ERROR"}(n||(n={}))},"../../libs/solflare-shared/dist/components/ConfirmationHelpers/ConfirmationStaking.js":function(e,s,t){var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),a=t("../../libs/foundation-ui/dist/index.js"),o=t("../../libs/solflare-shared/dist/constants/mints.js"),i=t("../../libs/shared/dist/features/currencies/hooks/useTokenFiatValue.js"),l=t("../../libs/shared/dist/utils/displayPrice.js");s.Z=({amount:e,validatorName:s,validatorImage:t})=>{const{value:d,suffix:c,prefix:u,price:f}=(0,i.Z)("SOL",e);return(0,n.jsx)(a.GGf,{avatar:(0,n.jsx)(a.Ce,{size:"xl",icon:r.Quw}),transactionFromItem:(0,n.jsx)(a.nrP,{title:(0,l.ED)({amount:e,displayType:"solana",suffix:" SOL"}),subtitle:f?(0,l.ED)({amount:d,displayType:"value",suffix:c,prefix:u}):void 0,avatar:(0,n.jsx)(a.qEK,{src:o.vx.logoURI})}),transactionToItem:s?(0,n.jsx)(a.nrP,{title:s,avatar:(0,n.jsx)(a.qEK,{src:t})}):void 0})}},"../../libs/solflare-shared/dist/components/ReconnectFTXModal/index.js":function(e,s,t){t.d(s,{Z:function(){return A}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react/index.js"),a=t("../../../node_modules/react-redux/es/index.js"),o=t("../../../node_modules/react-i18next/dist/es/withTranslation.js"),i=t("../../../node_modules/prop-types/index.js"),l=t.n(i),d=t("../../libs/rise-ui/dist/index.js"),c=t("../../../node_modules/@mui/material/Box/Box.js"),u=t("../../../node_modules/@mui/material/Divider/Divider.js"),f=t("../../../node_modules/@mui/material/Avatar/Avatar.js"),m=t("../../../node_modules/@mui/material/Link/Link.js"),p=t("../../../node_modules/@mui/styles/withStyles/withStyles.js"),h=t("../../../node_modules/@fortawesome/pro-light-svg-icons/faWarning.js"),b=t("../../../node_modules/@fortawesome/react-fontawesome/index.es.js"),g=t("../../../node_modules/@mui/material/colors/red.js"),y=t("../../libs/solflare-shared/dist/store/actions/exchange.js"),k=t("../../libs/solflare-shared/dist/store/actions/ftxReconnect.js"),j=t("../../libs/solflare-shared/dist/store/actions/wallet.js"),_=t("../../libs/solflare-shared/dist/components/withWallet/index.js"),x=t("../../libs/solflare-shared/dist/utils/extension.js"),v=t("../../../node_modules/reselect/es/index.js"),w=t("../../libs/solflare-shared/dist/store/selectors/config.js"),S=t("../../libs/solflare-shared/dist/store/selectors/data.js");const T=(0,v.P1)(w.ut,(e=>e.wallets));var C=(0,v.zB)({wallets:T,ftxReconnect:S.sZ});let E=class extends r.Component{constructor(){super(...arguments),this.getWebUrl=()=>encodeURIComponent(window.location.origin),this.getRedirectUri=(e=!1)=>x.p1?`https://solflare.com/redirect2/${e?"us/":""}${this.getWebUrl()}`:`${window.location.origin}/callback${e?"/us":""}`,this.onReconnect=async()=>{const{wallet:e}=this.props;let s;s=e.instance.us?(await this.props.getOAuth2Client({redirectUri:this.getRedirectUri(!0),us:!0})).code.getUri():(await this.props.getOAuth2Client({redirectUri:this.getRedirectUri()})).code.getUri(),this.props.fullScreen?window.open(s,"_blank"):window.open(s,"_self")},this.onDisconnect=()=>{const e=this.props.wallet.getPublicKey().toString(),s=Object.values(this.props.wallets),t=s.map(((s,t)=>s.publicKey===e||s.parent===e?{index:t,pubkey:s.publicKey}:null)),n=s.find((e=>!t.find((s=>s?.pubkey===e.publicKey)))),{deleteAccount:r,hideFTXReconnect:a,selectAccountByPubkey:o}=this.props;o(n.publicKey),t.forEach((e=>{e&&r(e)})),a()}}render(){const{classes:e,fullScreen:s,ftxReconnect:t,t:r}=this.props;return(0,n.jsx)(d.u_,{open:t,fullScreen:s,title:r("reconnect_FTX"),actions:(0,n.jsxs)(c.Z,{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[(0,n.jsx)(u.Z,{width:"100%",light:!0}),(0,n.jsx)(c.Z,{mb:2}),(0,n.jsx)(d.zx,{variant:"contained",onClick:this.onReconnect,children:r("reconnect_to_FTX")}),(0,n.jsx)(c.Z,{mb:1}),(0,n.jsx)(d.zx,{onClick:this.onDisconnect,children:r("remove_FTX_account")})]}),children:(0,n.jsxs)(c.Z,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[(0,n.jsx)(c.Z,{mb:4,mt:2,children:(0,n.jsx)(f.Z,{classes:{root:e.avatar},children:(0,n.jsx)(b.G,{style:{width:100,height:87.5},icon:h.e7})})}),(0,n.jsx)(d.ZT,{children:r("your_ftx_session_has_expired")}),(0,n.jsx)(d.ZT,{children:(0,n.jsx)(m.Z,{target:"_blank",href:"https://academy.solflare.com/guides/how-to-integrate-your-ftx-account-within-the-solflare-wallet-web/",children:r("why_did_this_happen")})})]})})}};E.propTypes={classes:l().object,deleteAccount:l().func,fullScreen:l().bool,ftxReconnect:l().bool,getOAuth2Client:l().func,selectAccountByPubkey:l().func,t:l().func,hideFTXReconnect:l().func,wallet:l().object,wallets:l().object},E=function(e,s,t,n){var r,a=arguments.length,o=a<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,s,t,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(a<3?r(o):a>3?r(s,t,o):r(s,t))||o);return a>3&&o&&Object.defineProperty(s,t,o),o}([(0,p.Z)((e=>({avatar:{backgroundColor:"rgba(218, 73, 63, 0.1)",color:g.Z[500],width:180,height:180}}))),(0,o.Z)(),(0,_.a)(),(0,a.$j)(C,{deleteAccount:j.tm,getOAuth2Client:y.OX,hideFTXReconnect:k.XB,selectAccountByPubkey:j.lN})],E);var A=E},"../../libs/solflare-shared/dist/components/UniversalModal/index.js":function(e,s,t){t.d(s,{V:function(){return d}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../libs/foundation-ui/dist/index.js"),a=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),o=t("../../libs/rise-ui/dist/index.js"),i=t("../../../node_modules/@mui/material/Box/Box.js"),l=t("../../libs/solflare-shared/dist/utils/extension.js");const d=({title:e,textAlign:s,onClose:t,children:d,footer:c,footerProps:u,backAction:f,headerAction:m,expandedOverlow:p="initial",expandedMaxWidth:h="xs",contentInlineStyle:b,contentWithOverflow:g=!1})=>l.p1&&!l.Cy?(0,n.jsxs)(r.m04,{children:[(0,n.jsx)(r.V1P,{left:f??(0,n.jsx)(r.KsU,{icon:a.acZ,size:"l",onClick:t}),center:e,right:m??null}),(0,n.jsx)(r.JHu,{overflow:g,children:d}),c&&(0,n.jsx)(r.p4T,{...u,children:c})]}):(0,n.jsx)(o.u_,{useActionDivider:Boolean(c),title:(0,n.jsxs)(o.kC,{justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(r.S7R,{textAlign:s,children:e}),m??null]}),open:!0,maxWidth:h,fullScreen:!1,contentStyle:{overflow:p},actions:c?(0,n.jsx)(i.Z,{display:"flex",gap:"12px",marginTop:"14px",flexDirection:"column",width:"100%",children:c}):null,onClose:t,children:(0,n.jsx)(r.Q$F,{contentInlineStyle:b,children:d})})},"../../libs/solflare-shared/dist/components/WebInfoTooltip/index.js":function(e,s,t){t.d(s,{s:function(){return a}});var n=t("../../../node_modules/@mui/system/esm/styled.js"),r=t("../../libs/foundation-ui/dist/index.js");const a=(0,n.Z)(r.bEE)({zIndex:r.PUQ})},"../../libs/solflare-shared/dist/constants/mints.js":function(e,s,t){t.d(s,{BH:function(){return r},DH:function(){return i},Jb:function(){return a},Xz:function(){return o},vx:function(){return n}});const n={name:"Solana",symbol:"SOL",logoURI:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/solana/info/logo.png"},r="11111111111111111111111111111111",a="So11111111111111111111111111111111111111112",o="EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",i="7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"},"../../libs/solflare-shared/dist/constants/networks.js":function(e,s,t){t.d(s,{EE:function(){return n},g5:function(){return l},pX:function(){return o},vo:function(){return r}});const n={mainnet:"mainnet",devnet:"devnet",testnet:"testnet"},r={mainnet:101,testnet:102,devnet:103},a={mainnet:"https://rpc-mainnet-failover.solflare.com",devnet:"https://rpc-devnet-failover.solflare.com",testnet:"https://rpc-testnet-failover.solflare.com"},o={mainnet:"https://wallet-api.solflare.com/v2/tx/rpc/mainnet",devnet:"https://wallet-api.solflare.com/v2/tx/rpc/devnet",testnet:"https://wallet-api.solflare.com/v2/tx/rpc/testnet"},i={mainnet:"https://wallet-api.solflare.com/v2/tx/jito/send-bundle",devnet:"https://wallet-api.solflare.com/v2/tx/jito/send-bundle",testnet:"https://wallet-api.solflare.com/v2/tx/jito/send-bundle"},l=(n.mainnet,n.devnet,n.testnet,{mainnet:{cluster:n.mainnet,name:"Mainnet",url:"https://mainnet-beta.solflare.network",failoverUrl:a[n.mainnet],sendUrl:o[n.mainnet],bundledSendUrl:i[n.mainnet]},testnet:{cluster:n.testnet,name:"Testnet",url:"https://api.testnet.solana.com",failoverUrl:a[n.testnet],sendUrl:o[n.testnet],bundledSendUrl:i[n.testnet]},devnet:{cluster:n.devnet,name:"Devnet",url:"https://api.devnet.solana.com",failoverUrl:a[n.devnet],sendUrl:o[n.devnet],bundledSendUrl:i[n.devnet]}})},"../../libs/solflare-shared/dist/contexts/solana/SolanaConnectionProvider.js":function(e,s,t){t.d(s,{j5:function(){return h},vC:function(){return b}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),a=t("../../../node_modules/react/index.js"),o=t("../../../node_modules/react-redux/es/index.js"),i=t("../../libs/solflare-shared/dist/store/selectors/config.js"),l=t("../../libs/solflare-shared/dist/constants/networks.js"),d=t("../../libs/solflare-shared/dist/utils/requestId.js"),c=t("../../libs/solflare-shared/dist/features/walletManagement/utils/index.js"),u=t("../../libs/wallet-core/dist/solana/shared.js"),f=t("../../libs/solflare-shared/dist/storage/solflareService.js");const m={commitment:"confirmed",confirmTransactionInitialTimeout:12e4},p=a.createContext({}),h=()=>{const{connection:e,url:s,cluster:t,sendConnection:n,compressedNftConnection:r}=a.useContext(p);if(!(e&&s&&n&&r))throw new Error("SolanaConnectionProvider is not defined");return{connection:e,sendConnection:n,compressedNftConnection:r,url:s,cluster:t}},b=({children:e})=>{const{url:s,cluster:t}=(0,o.v9)(i.eN),h=(0,o.v9)(i.fI),b=(0,o.v9)(i.Wg),g=(0,o.v9)(i.zc),[y,k]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{const e=await f.Z.solflarenetwork.get();k(e)})()}),[]);const j=(0,a.useMemo)((()=>new r.Connection(s,m)),[s]),_=(0,a.useMemo)((()=>{const e={};return y&&(e.Authorization=`Bearer ${(0,d.A)(y)}`),b&&(e["Ref-Key"]=(0,c.z_)(b,u.oH[g]??255)),new r.Connection(l.pX[t]||l.pX.mainnet,{...m,httpHeaders:e})}),[b,t,y,g]),x=(0,a.useMemo)((()=>h?.data?.[t]?new r.Connection(h.data[t],m):j),[t,h.data,j]),v=(0,a.useMemo)((()=>({connection:j,sendConnection:_,compressedNftConnection:x,url:s,cluster:t})),[t,x,j,_,s]);return(0,n.jsx)(p.Provider,{value:v,children:e})}},"../../libs/solflare-shared/dist/contexts/solana/index.js":function(e,s,t){t.d(s,{j5:function(){return n.j5},vC:function(){return n.vC}});var n=t("../../libs/solflare-shared/dist/contexts/solana/SolanaConnectionProvider.js")},"../../libs/solflare-shared/dist/features/activity/store/actions/index.js":function(e,s,t){t.d(s,{KO:function(){return i},M9:function(){return l},N5:function(){return b},Qd:function(){return h},Se:function(){return o},_1:function(){return a},fU:function(){return c},kz:function(){return f},mC:function(){return g},nb:function(){return u},om:function(){return d}});var n=t("../../libs/solflare-shared/dist/features/activity/store/selectors/index.js"),r=t("../../../node_modules/console-browserify/index.js");const a="SIGNATURES_FETCH_START",o="SIGNATURES_FETCH_START_NEWER",i="SIGNATURES_FETCH_CHUNK",l="SIGNATURES_FETCH_SUCCESS",d="SIGNATURES_FETCH_ERROR",c="TRANSACTIONS_CLEAR",u="TRANSACTIONS_CHUNK_SIGNATURE_DATA",f="TRANSACTIONS_CHUNK_DATA",m=e=>e.config.activityApi.url,p="<|EOF|>",h=(e,s)=>async(t,n)=>{if(e){t({type:a,payload:{address:e,network:s}}),t({type:c});try{const r=(await fetch(`${m(n())}/v1/signatures?address=${e}&network=${s}`)).body.getReader();await y(t,r),t({type:l})}catch(e){t({type:d}),r.log("error",e)}}},b=(e,s)=>async(t,a)=>{if(!e)return;const i=a(),{data:c}=(0,n.eJ)(i);if(!(c.length<1)){t({type:o});try{const n=(await fetch(`${m(i)}/v1/signatures/newer?address=${e}&lastSignature=${c[0]}&network=${s}`)).body.getReader();await y(t,n),t({type:l})}catch(e){t({type:d}),r.log("error",e)}}},g=(e,s,t,n,a)=>async(o,i)=>{if(e)try{const r=(await fetch(`${m(i())}/v1/transactions?network=${s}`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:t,layout:a,address:e,signatures:n})})).body.getReader();let l="";for(;;){const{done:e,value:s}=await r.read();if(e)break;l+=(new TextDecoder).decode(s);const t=l.split(p);if(1!==t.length){for(let e=0;e<t.length-1;e++){const s=JSON.parse(t[e]);o({type:f,payload:s})}l=t[t.length-1]}}}catch(e){r.log("error",e)}};async function y(e,s){let t="";for(;;){const{done:n,value:r}=await s.read();if(n)break;t+=(new TextDecoder).decode(r);const a=t.split(p);if(1!==a.length){for(let s=0;s<a.length-1;s++){const t=JSON.parse(a[s]);e({type:i,payload:t}),e({type:u,payload:t})}t=a[a.length-1]}}}},"../../libs/solflare-shared/dist/features/activity/store/selectors/index.js":function(e,s,t){t.d(s,{U_:function(){return l},eJ:function(){return o},yy:function(){return i}});var n=t("../../../node_modules/reselect/es/index.js"),r=t("../../libs/solflare-shared/dist/store/selectors/config.js"),a=t("../../libs/solflare-shared/dist/store/selectors/data.js");const o=e=>e.list.transactionsList,i=(0,n.P1)([r.ut,a.Hj],((e,s)=>{const t={};for(const s of e.accounts)t[s.publicKey]=s.name;for(const e of s)t[e.pubkey]=e.name;return t})),l=(0,n.P1)(o,(e=>e.data.transactionsData),((e,s)=>({network:e.network,publicKey:e.publicKey,loading:e.loading,preLoading:e.preLoading,signatures:e.data,data:s.data,parsed:s.parsed})))},"../../libs/solflare-shared/dist/features/addressBook/context/AddressBook.js":function(e,s,t){t.d(s,{T:function(){return c},Z:function(){return d}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react/index.js"),a=t("../../../node_modules/react-redux/es/index.js"),o=t("../../libs/solflare-shared/dist/store/selectors/data.js"),i=t("../../libs/solflare-shared/dist/store/actions/addressBook.js");const l=(0,r.createContext)({addresses:[],nameByAddress:{},addAddress:()=>Promise.resolve(),removeAddress:()=>Promise.resolve(),updateAddress:()=>Promise.resolve()}),d=({children:e})=>{const s=(0,a.I0)(),t=(0,a.v9)(o.Hj),d=(0,r.useMemo)((()=>t.reduce(((e,s)=>(e[s.address]=s.name,e)),{})),[t]),c=(0,r.useCallback)((async e=>{await s((0,i.KV)(e))}),[s]),u=(0,r.useCallback)((async e=>{await s((0,i.lQ)({index:e}))}),[s]),f=(0,r.useCallback)((async(e,t)=>{await s((0,i.Cj)({index:e,...t}))}),[s]);(0,r.useEffect)((()=>{s((0,i.bd)())}),[s]);const m=(0,r.useMemo)((()=>({addresses:t,nameByAddress:d,addAddress:c,removeAddress:u,updateAddress:f})),[c,t,d,u,f]);return(0,n.jsx)(l.Provider,{value:m,children:e})},c=()=>(0,r.useContext)(l)},"../../libs/solflare-shared/dist/features/currencies/components/index.js":function(e,s,t){t.d(s,{EI:function(){return b},DR:function(){return f},DX:function(){return g.Z}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react-redux/es/index.js"),a=t("../../libs/shared/dist/features/currencies/index.js"),o=t("../../../node_modules/@mui/material/styles/styled.js"),i=t("../../../node_modules/@mui/material/ButtonBase/ButtonBase.js"),l=t("../../libs/shared/dist/features/currencies/hooks/index.js");const d=(0,o.ZP)(i.Z)({fontSize:"inherit",fontWeight:"inherit",fontFamily:"inherit",display:"inherit",alignItems:"inherit",justifyContent:"inherit"});var c=({configKey:e,defaultDisplay:s,fiat:t,token:r,onChange:a})=>{const o=(0,l.__)(e,s);return(0,n.jsx)(d,{onClick:async e=>{e.preventDefault(),e.stopPropagation(),a("fiat"===o?"token":"fiat")},children:"fiat"===o?t:r})},u=t("../../libs/solflare-shared/dist/storage/solflareService.js"),f=e=>{const s=(0,r.I0)();return(0,n.jsx)(c,{onChange:async t=>{await s((0,a.Fu)(e.configKey,t,(e=>u.Z.solflareconfig.setField("currencyDisplays",e))))},...e})},m=t("../../libs/shared/dist/utils/displayPrice.js"),p=t("../../../node_modules/@mui/material/Box/Box.js"),h=t("../../libs/solflare-shared/dist/assets/solana-logo-white.svg"),b=({value:e,hideSymbol:s,symbolType:t="image",displayType:r="amount",showSign:a,sx:o={},showSmallNumbers:i=!1})=>(0,n.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",...o},children:[!s&&"image"===t&&(0,n.jsx)(p.Z,{sx:{height:"0.8em",mr:"6px"},component:"img",src:h,alt:"Solana"}),a?+e<0?"-":"+":"",(0,m.ED)({amount:a?Math.abs(+e):e,pricePerCoin:0,displayType:r,suffix:"text"===t?" SOL":"",showSmallNumbers:i})]}),g=t("../../libs/solflare-shared/dist/features/currencies/components/ToggleTokenFiatValue/index.js")},"../../libs/solflare-shared/dist/features/currencies/hooks/index.js":function(e,s,t){t.d(s,{E:function(){return i}});var n=t("../../../node_modules/react-redux/es/index.js"),r=t("../../libs/shared/dist/features/currencies/index.js"),a=t("../../libs/solflare-shared/dist/storage/solflareService.js"),o=t("../../../node_modules/react/index.js");const i=(e,s)=>{const t=(0,r.__)(e,s),i=(0,n.I0)();return[t,(0,o.useCallback)((async s=>{await i((0,r.Fu)(e,s,(e=>a.Z.solflareconfig.setField("currencyDisplays",e))))}),[i,e])]}},"../../libs/solflare-shared/dist/features/featureFlags/constants/index.js":function(e,s,t){t.d(s,{$y:function(){return r},Go:function(){return n}});const n="Initialize",r="cancelled"},"../../libs/solflare-shared/dist/features/featureFlags/nftSingle/index.js":function(e,s,t){t.d(s,{C4:function(){return d},KZ:function(){return a},Qc:function(){return o},Yn:function(){return u},cq:function(){return l},dn:function(){return f},uK:function(){return c},ub:function(){return i}});var n=t("../../libs/solflare-shared/dist/utils/featureFlags.js");const r="NftSingle",a=e=>n.Z.c(r,"SetAsPfpClicked",e),o=()=>n.Z.c(r,"RemoveAsPfpClicked"),i=()=>n.Z.c(r,"Save"),l=()=>n.Z.c(r,"ViewInExplorer"),d=()=>n.Z.c(r,"ViewOnTensor"),c=e=>n.Z.c(r,"MarkAsSpam",e),u=e=>n.Z.c(r,"UnmarkAsSpam",e),f=e=>n.Z.c(r,"ViewOnSolSniper",e)},"../../libs/solflare-shared/dist/features/featureFlags/signTx/index.js":function(e,s,t){t.d(s,{Ic:function(){return i},Iz:function(){return o},Jb:function(){return c},LO:function(){return f},Nk:function(){return u},S6:function(){return d},WG:function(){return m},Ww:function(){return a},jV:function(){return l},tP:function(){return p}});var n=t("../../libs/solflare-shared/dist/utils/featureFlags.js");const r="SignTx",a=e=>{n.Z.c(r,"Stake",e)},o=e=>{n.Z.c(r,"Unstake",e)},i=e=>{n.Z.c(r,"InstantUnstake",e)},l=e=>{n.Z.c(r,"Swap",e)},d=e=>{n.Z.c(r,"InstantSell",e)},c=e=>n.Z.c(r,"ListForSale",e),u=e=>n.Z.c(r,"Delist",e),f=e=>n.Z.c(r,"EditListing",e),m=e=>n.Z.c(r,"SendNftSingle",e),p=e=>n.Z.c(r,"SendNftMultiple",e)},"../../libs/solflare-shared/dist/features/nfts/api/nfts.js":function(e,s,t){t.d(s,{H_:function(){return d},J8:function(){return o},Lu:function(){return l},RW:function(){return c},bH:function(){return i}});var n=t("../../libs/solflare-shared/dist/features/nfts/utils/prepareData.js"),r=t("../../libs/solflare-shared/dist/api/index.js");t("../../libs/solflare-shared/dist/features/nfts/utils/transferUtils.js");const a="https://wallet-api.solflare.com",o=async(e,s="mainnet",t="USD",n)=>{const{body:o}=await(0,r.v)(`${a}/v2/portfolio/nfts/${e}?network=${s}&currency=${t}&listings=1`,{suspicious:n?.suspicious||[],legitimate:n?.legitimate||[]});return o},i=({nfts:e,groups:s,totalFloor:t,currencyTotalFloor:r},a)=>{const o=(0,n.H_)({nfts:e,groups:s},a),i=(0,n.iE)({nfts:e,groups:s},a),l=(0,n.c0)(t);return{nfts:[...o,...i],heroUi:(0,n.c0)(r),heroUiSol:l}},l=({nfts:e,groups:s},t)=>{const r=(0,n.iq)(e,t),a=s.find((e=>e.id===t)),o=(e=>"suspicious"===e?.id?"Spam":"scam"===e?.id?"Blocklist":e?.name??"")(a);return a?{nfts:r,heroUi:(0,n.c0)(a.currencyTotalFloor,o),heroUiSol:(0,n.c0)(a.totalFloor,o)}:null},d=async(e,s,t="mainnet",n="USD",o=!1)=>{const i=new URLSearchParams({currency:n,network:t,showOffer:String(+o)}),{body:l}=await(0,r.U)(`${a}/v2/portfolio/nfts/${e}/${s}?${i.toString()}`);return l||{}},c=async(e,s,t="mainnet")=>{const n=new URLSearchParams({network:t}),{body:o}=await(0,r.U)(`${a}/v2/portfolio/nfts/${e}/${s}/offer?${n.toString()}`);return o}},"../../libs/solflare-shared/dist/features/nfts/constants.js":function(e,s,t){t.d(s,{YF:function(){return i},Yn:function(){return d},dY:function(){return l},ln:function(){return a},mr:function(){return o}});var n=t("../../libs/solflare-shared/dist/assets/nft-default-img.svg");const r="/nft",a={HOME:r,BASE_NFT:r,SINGLE_NFT:`${r}/single/:mint`,GROUP_NFT:`${r}/group/:id`,SINGLE_NFT_P:{HOME:`${r}/single/:mint`,LIST_FOR_SALE:`${r}/single/:mint/list-for-sale`}},o=n,i="image";var l,d;!function(e){e.TOTAL_VALUE="total-value",e.FLOOR_PRICE="floor-price",e.BEST_PERFORMANCE="best-performance",e.BY_NEWEST="newest",e.ALPHABETICALLY="alphabetically",e.RARITY="rarity"}(l||(l={})),function(e){e[e.NonFungible=0]="NonFungible",e[e.FungibleAsset=1]="FungibleAsset",e[e.Fungible=2]="Fungible",e[e.NonFungibleEdition=3]="NonFungibleEdition",e[e.ProgrammableNonFungible=4]="ProgrammableNonFungible"}(d||(d={}))},"../../libs/solflare-shared/dist/features/nfts/context/index.js":function(e,s,t){t.d(s,{W:function(){return c},R:function(){return u}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react/index.js"),a=t("../../libs/solflare-shared/dist/storage/solflareService.js"),o=t("../../libs/solflare-shared/dist/features/nfts/constants.js"),i=t("../../libs/solflare-shared/dist/features/nfts/utils/transferUtils.js");var l=t("../../libs/solflare-shared/dist/features/nfts/context/constants.js");const d=(0,r.createContext)(l.P),c=({children:e})=>{const{isSelectMode:s,selectedIds:t,toggleSelected:l,isGridView:c,handleGridClick:u,setIsDrawerOpen:f,isDrawerOpen:m,setSelectedIds:p,toggleVisibleContext:h,isVisibleContextSelected:b,setIsVisibleContextSelected:g,searchTerm:y,setSearchTerm:k,sortedKey:j,setSortedKey:_,sortedGroupKey:x,setSortedGroupKey:v,selectedIdsCount:w,setSelectedIdsCount:S,isJunkHidden:T,setIsJunkHidden:C,isRarityDisplayed:E,setIsRarityDisplayed:A,nftsToTransfer:I,setNftsToTransfer:N,isTransferInProgress:P,setIsTransferInProgress:O,receiveModalOpen:R,setReceiveModalOpen:D,isSendTransfer:F,setIsSendTransfer:U,markedAsSpam:L,setMarkedAsSpam:M,isContextStateLoading:B,setIsContextStateLoading:K}=(()=>{const[e,s]=(0,r.useState)(""),[t,n]=(0,r.useState)(""),[o,l]=(0,r.useState)(null),[d,c]=(0,r.useState)(new Map),[u,f]=(0,r.useState)(0),[m,p]=(0,r.useState)(!1),[h,b]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!0),[k,j]=(0,r.useState)(""),[_,x]=(0,r.useState)(null),[v,w]=(0,r.useState)(!0),[S,T]=(0,r.useState)(!1),[C,E]=(0,r.useState)([]),[A,I]=(0,r.useState)(!1),[N,P]=(0,r.useState)(!0),[O,R]=(0,r.useState)(!0),D=(0,r.useCallback)((async e=>{y(e),await a.Z.gridView.set(e)}),[]),F=(0,r.useCallback)((async()=>{const e=await a.Z.gridView.get();if(null===e)return await a.Z.gridView.set(g);y(e)}),[g]);return(0,r.useEffect)((()=>{F()}),[F]),{isSelectMode:d.size>0,selectedIds:d,toggleSelected:(e,s,t)=>{c((n=>(n.has(e.id)?((e,s,t)=>{if(s)return e.delete(t.id),void f((e=>e-Number(s)));e.delete(t.id),f((e=>e-1))})(n,s,e):((e,s,t)=>{if(s)return e.set(t.id,t),void f((e=>e+Number(s)));e.set(t.id,t),f((e=>e+1))})(n,s,e),0===n.size&&p(!1),n.size>0&&p(!0),E((0,i.Uw)(t??{},d)||[]),new Map(n))))},isGridView:g,setGridView:y,isDrawerOpen:h,setIsDrawerOpen:b,handleGridClick:D,setSelectedIds:c,toggleVisibleContext:(e,s)=>{if(d.size>0)return c(new Map),p(!1),f(0),void E([]);const t=e.reduce(((e,s)=>(e.set(s.id,s),e)),new Map);c(t),p(!0),f(t.size),E((0,i.Uw)(s??{},t)||[])},setIsVisibleContextSelected:p,isVisibleContextSelected:m,searchTerm:k,setSearchTerm:j,sortedKey:e,setSortedKey:s,selectedIdsCount:u,setSelectedIdsCount:f,isJunkHidden:_,setIsJunkHidden:x,isRarityDisplayed:v,setIsRarityDisplayed:w,isTransferInProgress:S,setIsTransferInProgress:T,nftsToTransfer:C,setNftsToTransfer:E,receiveModalOpen:A,setReceiveModalOpen:I,isSendTransfer:N,setIsSendTransfer:P,sortedGroupKey:t,setSortedGroupKey:n,markedAsSpam:o,setMarkedAsSpam:l,isContextStateLoading:O,setIsContextStateLoading:R}})(),Z=(0,r.useCallback)((async e=>{_(e),await a.Z.solflarenftsorting.set(e)}),[_]),H=(0,r.useCallback)((async()=>{if(!j){const e=await a.Z.solflarenftsorting.get()||o.dY.TOTAL_VALUE;_(e)}}),[_,j]),$=(0,r.useCallback)((async e=>{v(e),await a.Z.solflarenftgroupsorting.set(e)}),[v]),G=(0,r.useCallback)((async()=>{if(!x){const e=await a.Z.solflarenftgroupsorting.get()||o.dY.RARITY;v(e)}}),[v,x]),V=(0,r.useCallback)((async()=>{if(!L){const e=await a.Z.markedNfts.get()||null;M(e)}}),[L,M]),W=(0,r.useCallback)((async e=>{M(e),await a.Z.markedNfts.set(e)}),[M]),z=(0,r.useCallback)((async()=>{await Promise.all([H(),G(),V()]),K(!1)}),[G,V,H,K]);(0,r.useEffect)((()=>{z()}),[z]);const q=(0,r.useMemo)((()=>({isSelectMode:s,selectedIds:t,setSelectedIds:p,toggleSelected:l,isGridView:c,setIsDrawerOpen:f,handleGridClick:u,isDrawerOpen:m,sortedKey:j,sortedGroupKey:x,setSortedGroupKey:v,handleSortClick:Z,handleSortGroupClick:$,toggleVisibleContext:h,isVisibleContextSelected:b,setIsVisibleContextSelected:g,searchTerm:y,setSearchTerm:k,selectedIdsCount:w,setSelectedIdsCount:S,isJunkHidden:T,setIsJunkHidden:C,isRarityDisplayed:E,setIsRarityDisplayed:A,nftsToTransfer:I,setNftsToTransfer:N,isTransferInProgress:P,setIsTransferInProgress:O,receiveModalOpen:R,setReceiveModalOpen:D,isSendTransfer:F,setIsSendTransfer:U,markedAsSpam:L,setMarkedAsSpam:M,isContextStateLoading:B,setIsContextStateLoading:K,onMarkAsSpamClick:W})),[s,t,p,l,c,f,u,m,j,x,v,Z,$,h,b,g,y,k,w,S,T,C,E,A,I,N,P,O,R,D,F,U,L,M,B,K,W]);return(0,n.jsx)(d.Provider,{value:q,children:B?null:e})},u=()=>(0,r.useContext)(d)},"../../libs/solflare-shared/dist/features/nfts/hooks/useNftData.js":function(e,s,t){t.d(s,{c:function(){return d}});var n=t("../../../node_modules/react-redux/es/index.js"),r=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),a=t("../../libs/shared/dist/features/currencies/index.js"),o=t("../../libs/solflare-shared/dist/store/selectors/config.js"),i=t("../../libs/solflare-shared/dist/features/nfts/api/nfts.js"),l=t("../../libs/solflare-shared/dist/features/nfts/context/index.js");const d=()=>{const e=(0,n.v9)(o.Wg),s=(0,n.v9)(o.eN),t=(0,a.Af)(),{markedAsSpam:d}=(0,l.R)();return(0,r.a)({queryKey:["nfts",e,s.url,t.ticker,d],queryFn:()=>(0,i.J8)(e,s.cluster,t.ticker,d),keepPreviousData:!0})}},"../../libs/solflare-shared/dist/features/nfts/utils/enrichData.js":function(e,s,t){t.d(s,{Iy:function(){return r},jO:function(){return n}});const n=e=>e<0?"error":"success",r=(e,s)=>{if("suspicious"===s||"scam"===s)return"suspicious"===(t=s)?{variant:"susp",percentage:"Suspicious"}:"scam"===t?{variant:"error",percentage:"Scam"}:{variant:"success",percentage:""};var t;if(!e)return{variant:"success",percentage:""};switch(!0){case e<=.3:return{variant:"error",percentage:"Mythic"};case e<=1:return{variant:"orange",percentage:"Legendary"};case e<=3:return{variant:"purple",percentage:"Epic"};case e<=10:return{variant:"darkBlue",percentage:"Rare"};case e<=30:return{variant:"success",percentage:"Uncommon"};case e<=100:return{variant:"default",percentage:"Common"};default:return{variant:"success",percentage:""}}}},"../../libs/solflare-shared/dist/features/nfts/utils/prepareData.js":function(e,s,t){t.d(s,{gw:function(){return y},iE:function(){return m},c0:function(){return h},iq:function(){return b},H_:function(){return p}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../libs/solflare-shared/dist/utils/getResizedImageUrl.js"),a=t("../../../node_modules/lodash/lodash.js"),o=t("../../libs/shared/dist/features/currencies/index.js"),i=t("../../libs/solflare-shared/dist/features/currencies/index.js"),l=t("../../libs/shared/dist/features/currencies/hooks/index.js"),d=({configKey:e,defaultDisplay:s,fiat:t,token:r})=>{const a=(0,l.__)(e,s);return(0,n.jsx)(n.Fragment,{children:"fiat"===a?t:r})},c=t("../../libs/solflare-shared/dist/features/nfts/utils/enrichData.js"),u=t("../../libs/solflare-shared/dist/features/nfts/constants.js"),f=t("../../libs/solflare-shared/dist/utils/extension.js");t("../../libs/solflare-shared/dist/utils/units.js");const m=({nfts:e,groups:s},t)=>{const a=e.reduce(((e,s)=>((!e[s.group]||s.rarity?.rank&&s.rarity?.rank<e[s.group]?.rank)&&(e[s.group]={image:s.image}),e)),{});return s.map((s=>{const l="fiat"===t?s.currencyTotalFloor.price:s.totalFloor.price,c="fiat"===t?s.currencyFloor.price:s.floor.price,f="fiat"===t?s.currencyTotalFloor.percentage:s.totalFloor.percentage;if("scam"===s.id)return{id:s.id,title:"Blocklist",image:(0,r.N)(a[s.id]?.image??s.image??u.mr,{width:300}),collectionCount:String(s.count),collectionSelectableCount:String(s.count),group:s.id,sortByAmount:l??0,sortByValue:c??0,sortByPerformance:f??0,amount:"",value:"Confirmed scams",...g(s.currencyTotalFloor.percentage??0,s.totalFloor.percentage??0,t)};if("suspicious"===s.id)return{id:s.id,title:"Spam",image:(0,r.N)(a[s.id]?.image??s.image??u.mr,{width:300}),errorFallbackImage:u.mr,collectionCount:String(s.count),collectionSelectableCount:String(s.count),group:s.id,sortByAmount:l??0,sortByValue:c??0,sortByPerformance:f??0,amount:"",value:"Detected as possible scams",...g(s.currencyTotalFloor.percentage??0,s.totalFloor.percentage??0,t)};const m=e.filter((e=>e.listed&&e.group===s.id)).length,p=e.filter((e=>e.group===s.id)).length===m;return{id:s.id,title:s.name.trim(),image:(0,r.N)(a[s.id]?.image??s.image??u.mr,{width:300}),fallbackImage:a[s.id]?.image??s.image??u.mr,errorFallbackImage:u.mr,collectionCount:String(s.count),collectionSelectableCount:String(s.count-m),group:s.id,sortByAmount:l??0,sortByValue:c??0,sortByPerformance:f??0,disabled:p,amount:l&&l>0?(0,n.jsx)(d,{configKey:"nftFloorPrice",fiat:(0,n.jsx)(o.sp,{value:s.currencyTotalFloor.price??0}),token:(0,n.jsx)(i.EI,{value:s.totalFloor.price??0})}):"",value:c&&c>0?(0,n.jsx)(d,{configKey:"nftFloorPrice",fiat:(0,n.jsx)(o.sp,{value:s.currencyFloor.price??0}),token:(0,n.jsx)(i.EI,{value:s.floor.price??0})}):"",gridViewListedPillText:m>0?`${m} Listed`:void 0,listViewListedPillText:m>0?`${m}`:void 0,...g(s.currencyTotalFloor.percentage??0,s.totalFloor.percentage??0,t)}}))},p=({nfts:e,groups:s},t)=>{const l=(0,a.keyBy)(s,"id");return e.filter((e=>e.group!==l[e.group]?.id)).map((e=>{const s="fiat"===t?e.currencyFloor.price:e.floor.price,a="fiat"===t?e.currencyFloor.price:e.floor.price,l="fiat"===t?e.currencyFloor.percentage??0:e.floor.percentage??0;return{id:e.id,group:e.group,image:e?.image?(0,r.N)(e.image,{width:300}):u.mr,fallbackImage:e.image,errorFallbackImage:u.mr,title:e.name?.trim(),sortByAmount:s??0,sortByValue:a??0,sortByPerformance:l,listed:e.listed,gridViewListedPillText:e.listed?"Listed":null,listViewListedPillText:e.listed?null:void 0,disabled:e.listed,amount:s&&s>0?(0,n.jsx)(d,{configKey:"nftFloorPrice",fiat:(0,n.jsx)(o.sp,{value:e.currencyFloor.price??0}),token:(0,n.jsx)(i.EI,{value:e.floor.price??0})}):"",value:a&&a>0?(0,n.jsx)(d,{configKey:"nftFloorPrice",fiat:(0,n.jsx)(o.sp,{value:e.currencyFloor.price??0}),token:(0,n.jsx)(i.EI,{value:e.floor.price??0})}):"",...g(e.currencyFloor.percentage??0,e.floor.percentage??0,t)}}))},h=(e,s)=>({name:s||"",price:String(e?.price??0),amountChange:String(e?.change??0),percentageChange:String(e?.percentage??0),variant:(0,c.jO)(e?.change??0)}),b=(e,s)=>{const t=e?.filter((e=>e.group===s));return t.map((e=>({id:e.id,group:e.group,image:e?.image?(0,r.N)(e.image,{width:300}):u.mr,fallbackImage:e.image,errorFallbackImage:u.mr,title:e.name?.trim(),isScam:"scam"===e.group,amount:"",value:"",sortByRarity:e.rarity?.rank??0,tagValues:(0,c.Iy)(e.rarity?.percentage),listed:e.listed,gridViewListedPillText:e.listed?"Listed":void 0,listViewListedPillText:e.listed?null:void 0,disabled:e.listed})))},g=(e,s,t)=>!e&&"fiat"===t||!s&&"token"===t?null:{tagValues:{variant:(0,c.jO)("fiat"===t?e:s),percentage:(0,n.jsx)(d,{configKey:"nftFloorPrice",fiat:(0,n.jsx)(o.Tf,{value:e||"0",showSign:!0}),token:(0,n.jsx)(o.Tf,{value:s||"0",showSign:!0})})}},y=(e,s={})=>(({image:e,animationUrl:s,properties:t},n={})=>{const{category:a}=t,o=f.p1&&!f.Cy,i=n.skipResizer?e??u.mr:(0,r.N)(e??u.mr,{width:o?400:1e3});if(!a)return{category:u.YF,src:i,originalSrc:e??u.mr};if("video"===a)return{category:a,src:s,posterSrc:i};if("vr"===a||"model"===a)return{category:a,src:s,posterSrc:i};if("audio"===a){const e=t.files.find((e=>e.type.startsWith("audio")));return{category:a,src:s||e?.uri||u.mr,posterSrc:i}}return"image"===a?{category:a,src:i,originalSrc:e??u.mr}:{category:u.YF,src:i??u.mr,originalSrc:e??u.mr}})(e,s)},"../../libs/solflare-shared/dist/features/nfts/utils/transferUtils.js":function(e,s,t){t.d(s,{B1:function(){return l},BY:function(){return g},O3:function(){return h},UH:function(){return i},Uw:function(){return p},eA:function(){return d},eN:function(){return o},jo:function(){return y},n3:function(){return m},tX:function(){return c},uk:function(){return f},vX:function(){return u}});var n=t("../../libs/solflare-shared/dist/store/actions/common.js"),r=t("../../libs/solflare-shared/dist/utils/getResizedImageUrl.js"),a=t("../../libs/solflare-shared/dist/features/nfts/constants.js");const o=(e,s)=>{const t=e&&e?.suspicious||[];return{legitimate:[...(e&&e?.legitimate||[]).filter((e=>!s.includes(e)))||[]],suspicious:[...t,...s]}},i=(e,s)=>({suspicious:e&&e?.suspicious&&e?.suspicious.filter((e=>!s.includes(e)))||[],legitimate:[...e&&e?.legitimate||[],...s]}),l=(e,s)=>o(e,s.map((e=>e.mint))),d=(e,s)=>i(e,s.map((e=>e.mint))),c=e=>e.every((e=>b(e))),u=e=>e.some((e=>b(e))),f=e=>e.every((e=>"suspicious"===e.group)),m=e=>e.compressed?"compressed":e.tokenStandard===a.Yn.ProgrammableNonFungible?"programmable":null===e.tokenStandard&&0===e.tokenData?.decimals&&Number(e.tokenData?.uiAmount)>1?"semiFungible":e.tokenStandard!==a.Yn.NonFungible&&e.tokenStandard!==a.Yn.FungibleAsset||1===Number(e.tokenData?.uiAmount)?"regular":"semiFungible",p=(e,s)=>e?.nfts?.reduce(((e,t)=>(!s.has(t.group)&&!s.has(t.id)||t.listed||e.push({image:(0,r.N)(t.image??a.mr,{width:150}),name:t.name,group:t.group,subname:t.groupName||"",tokenAccountPubkey:t?.tokenData?.pubkey??"",mint:t.id,decimals:t?.tokenData?.decimals??0,compressed:t.compressed,typeForPosthog:m(t),isLastNft:1===Number(t.tokenData?.uiAmount),amount:Number(t.tokenData?.uiAmount??1),symbol:t.symbol}),e)),[]),h=(e,s)=>{e.preventDefault(),(0,n.Wi)({account:s})},b=e=>"suspicious"===e.group||"scam"===e.group,g=()=>"Burn NFT",y=e=>e.toLowerCase()===g().toLowerCase()},"../../libs/solflare-shared/dist/features/pfp/api/transactions.js":function(e,s,t){t.d(s,{Y:function(){return d},m:function(){return l}});var n=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),r=t("../../../node_modules/base64-js/index.js"),a=t("../../libs/shared/dist/store/utils/api.js"),o=t("../../../node_modules/console-browserify/index.js");const i="https://wallet-api.solflare.com",l=async e=>{try{const s=`${i}/v2/portfolio/nft/set-pfp`,{body:t}=await(0,a.v_)(s,e);if(t?.error)throw new Error(t.error);if(!t?.txs.length)throw new Error("Failed to generate transaction");return{transaction:n.VersionedTransaction.deserialize((0,r.toByteArray)(t.txs[0]))}}catch(e){throw o.dir(e),new Error(e?.response?.data?.error||e?.message)}},d=async e=>{try{const s=`${i}/v2/portfolio/nft/remove-pfp`,{body:t}=await(0,a.v_)(s,e);if(t?.error)throw new Error(t.error);if(!t?.txs.length)throw new Error("Failed to generate transaction");return{transaction:n.VersionedTransaction.deserialize((0,r.toByteArray)(t.txs[0]))}}catch(e){throw o.dir(e),new Error(e?.response?.data?.error||e?.message)}}},"../../libs/solflare-shared/dist/features/portfolio/components/ReceiveModal/index.js":function(e,s,t){var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/@mui/material/Box/Box.js"),a=t("../../../node_modules/@mui/material/Avatar/Avatar.js"),o=t("../../../node_modules/@mui/material/Typography/Typography.js"),i=t("../../../node_modules/@mui/material/Tooltip/Tooltip.js"),l=t("../../libs/rise-ui/dist/index.js"),d=t("../../libs/solflare-shared/dist/components/QRGenerator/index.js"),c=t("../../libs/solflare-shared/dist/store/actions/common.js"),u=t("../../../node_modules/@mui/icons-material/esm/HelpOutline.js"),f=t("../../libs/solflare-shared/dist/components/Icons/IconClip.js"),m=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),p=t("../../../node_modules/react-redux/es/index.js"),h=t("../../libs/foundation-ui/dist/index.js");s.Z=({onClose:e,address:s,name:t,fullScreen:b,symbol:g,logoURI:y,isAssociated:k})=>{const{t:j}=(0,m.$)(),_=(0,p.I0)();return(0,n.jsx)(l.u_,{open:!0,maxWidth:"sm",scroll:"body",fullScreen:b,onClose:e,title:(0,n.jsxs)(r.Z,{display:"inline-flex",alignItems:"center",justifyContent:b?"center":void 0,width:"100%",children:[y&&(0,n.jsx)(a.Z,{src:y,style:{marginRight:8},children:(0,n.jsx)(u.Z,{fontSize:"large"})}),(0,n.jsx)(o.Z,{variant:"h2",children:j("receive_modal_title",{name:t,symbol:g?`(${g})`:null})})]}),children:(0,n.jsxs)(r.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,n.jsx)(r.Z,{mb:4,children:(0,n.jsx)(d.Z,{text:s})}),(0,n.jsx)(o.Z,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:j("receive_your_address",{symbol:g?`(${g})`:null})}),(0,n.jsxs)(r.Z,{display:"flex",alignItems:"center",children:[(0,n.jsx)(o.Z,{variant:"caption",children:s}),k?(0,n.jsx)(i.Z,{title:j("portfolio_this_is_associated"),children:(0,n.jsx)(r.Z,{display:"flex",children:(0,n.jsx)(f.d,{color:"primary"})})}):null]}),(0,n.jsx)(r.Z,{mt:4,children:(0,n.jsx)(h.zxk,{color:"primary",onClick:()=>_((0,c.Md)(s)),children:j("action_copy_address")})})]})})}},"../../libs/solflare-shared/dist/features/portfolio/components/SendModal/index.js":function(e,s,t){var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react/index.js"),a=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),o=t("../../libs/foundation-ui/dist/index.js"),i=t("../../libs/solflare-shared/dist/features/recipientInput/index.js"),l=t("../../libs/solflare-shared/dist/utils/common.js"),d=t("../../libs/shared/dist/utils/displayPrice.js"),c=t("../../libs/solflare-shared/dist/features/portfolio/hooks/useAmountInput.js"),u=t("../../libs/solflare-shared/dist/features/portfolio/hooks/useAlertProps.js"),f=t("../../libs/solflare-shared/dist/constants/mints.js"),m=t("../../libs/solflare-shared/dist/features/portfolio/hooks/usePortfolio.js"),p=t("../../libs/solflare-shared/dist/features/recipientInput/utils/transformers.js"),h=t("../../libs/solflare-shared/dist/utils/truncateMiddle.js"),b=t("../../libs/solflare-shared/dist/components/UniversalModal/index.js"),g=t("../../libs/solflare-shared/dist/features/addressBook/context/RecentAddresses.js"),y=t("../../libs/solflare-shared/dist/features/portfolio/components/SendModal/SendInfoBox/index.js");s.Z=({onClose:e,wallet:s,providedAccount:t})=>{const{t:k}=(0,a.$)(),{saveAddress:j}=(0,i.Du)(),{actions:_}=(0,m.h)(),{inputAmount:x,setInputAmount:v,computedInputValue:w,handleAmountChange:S,solBalance:T,handleSelectedTokenChange:C,selectedToken:E,computeUnitPrice:A,filteredTokens:I,setSearchParam:N,maxAvailable:P}=(0,c._)({wallet:s,providedAccount:t}),O=E?.tokenId!==f.BH&&!E?.isAta,{selectedRecipient:R,saveAddressChecked:D}=(0,i.Du)(O),{alertProps:F,isValidationLoading:U}=(0,u.Z)({computeUnitPrice:A,inputAmount:x,maxAvailable:P,selectedToken:E,recipientSameAddress:!O&&s.getPublicKey()===R?.address,solBalance:T,recipient:R,walletType:s.instance.type}),{upsertAddress:L}=(0,g.H)(),M=!!F&&"error"===F.variant,B=M||!+x||!R||U,K=(0,r.useCallback)((async()=>{if(!E||!R)return!1;if(D&&!await j())return!1;const s=()=>{L(R.address),e?.()},t=()=>{e?.()},n=E.tokenId===f.BH,r=R.address,a=R.name??(0,h.r)(r);n?await _.transferSolana(r,x,a,(()=>{s()}),(()=>{t()})):await _.transferToken((0,p.sc)(E),(0,p.t)(E),r,x,a,E.metadata,(()=>{s()}),(()=>{t()}))}),[_,x,e,j,D,R,E,L]);return(0,n.jsxs)(b.V,{title:k("action_send"),textAlign:"left",onClose:e,contentInlineStyle:{marginBottom:-24},footer:(0,n.jsxs)(n.Fragment,{children:[F&&(0,n.jsx)(o.bZj,{...F}),(0,n.jsx)(o.zxk,{disabled:B,onClick:K,children:k("action_send")})]}),children:[E&&(0,n.jsx)(o.HEc,{autoFocusAmount:!0,label:(0,n.jsx)(o.__J,{htmlFor:"send-input",children:k("table_token")}),right:(0,n.jsx)(o.WOI,{onClick:A?()=>{v((0,l.T7)(P))}:void 0,children:(0,d.ED)({displayType:"solana",amount:P||0,prefix:`${k("swap_max")}: `})}),amount:x,value:w,id:"send-input",onBlur:()=>{v((e=>e?(0,l.iP)(e,E.decimals):e))},onAmountChange:S,selectedToken:E,onSearchChange:e=>{N(e.target.value)},onOpenChange:e=>{e||N("")},tokens:I||[],emptyTokenSearch:k("search_empty_results"),onSelectedTokenChange:C}),(0,n.jsx)(i.TM,{hasErrors:M}),(0,n.jsx)(y.Z,{inputAmount:x,selectedToken:E})]})}},"../../libs/solflare-shared/dist/features/portfolio/constants/common.js":function(e,s,t){t.d(s,{PY:function(){return o},U4:function(){return a},bA:function(){return r},gM:function(){return n},uC:function(){return i}});const n=5e3,r=890880,a=2039280,o="SOL",i="0.01"},"../../libs/solflare-shared/dist/features/portfolio/hooks/useComputeUnitPrice.js":function(e,s,t){t.d(s,{h:function(){return a}});var n=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),r=t("../../libs/solflare-shared/dist/store/api/computeUnit.js");const a=()=>{const{data:e}=(0,n.a)({queryKey:["compute-units"],queryFn:r.a,staleTime:72e5});return{computeUnitPrice:e||0}}},"../../libs/solflare-shared/dist/features/portfolio/hooks/usePortfolioUIActions.js":function(e,s,t){t.d(s,{n:function(){return m}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react/index.js"),a=t("../../libs/solflare-shared/dist/features/portfolio/context/PortfolioState.js"),o=t("../../libs/solflare-shared/dist/constants/mints.js"),i=t("../../libs/solflare-shared/dist/utils/confirmDialog.js"),l=t("../../libs/rise-ui/dist/index.js"),d=t("../../../node_modules/@mui/material/Box/Box.js"),c=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),u=t("../../libs/solflare-shared/dist/utils/getResizedImageUrl.js"),f=t("../../../node_modules/react-router/esm/react-router.js");const m=(e,s,t=!1)=>{const{replace:m}=(0,f.k6)(),{t:p}=(0,c.$)(),{openReceiveModal:h,splTransferToken:b,openSplTransferModal:g,splDelegateToken:y,openSplDelegateModal:k}=(0,a.h)();return{handleReceiveSolanaClick:(0,r.useCallback)((()=>{h({...o.vx,address:e.getPublicKey(),isAssociated:!1})}),[h,e]),handleReceiveTokenClick:(0,r.useCallback)((s=>{const t=!!s?.accounts?.find((e=>e.isAta));h({name:s.name||"token",symbol:s.symbol||null,logoURI:(0,u.N)(s.imageUri)||null,address:e.getPublicKey(),isAssociated:t})}),[h,e]),handleTransferTokenClick:(0,r.useCallback)(((e,s)=>{let t=s?e.accounts?.findIndex((e=>e.pubkey===s)):e.accounts?.findIndex((e=>e.isAta));t<0&&(t=0),g({token:e,tokenAccountIndex:t})}),[g]),handleDelegateTokenClick:(0,r.useCallback)(((e,s)=>{let t=s?e.accounts?.findIndex((e=>e.pubkey===s)):e.accounts?.findIndex((e=>e.isAta));t<0&&(t=0),k({token:e,tokenAccountIndex:t})}),[k]),handleCreateTokenAccount:(0,r.useCallback)((e=>{s.createTokenAccount(e)}),[s]),handleTransferSolana:(0,r.useCallback)(((e,t,n)=>{s.transferSolana(t,e,n)}),[s]),handleTransferToken:(0,r.useCallback)(((e,t,n,r)=>{const a=b?.token;a&&s.transferToken(a,a.accounts.find((s=>s.pubkey===e.pubkey)),n,t,r)}),[s,b?.token]),handleDelegateToken:(0,r.useCallback)(((e,t,n,r)=>{const a=y?.token;a&&s.delegateToken(a,a.accounts.find((s=>s.pubkey===e.pubkey)),n,t,r)}),[s,y?.token]),handleUnwrapTokenAccount:(0,r.useCallback)(((e,n,r)=>{let a=n?e.accounts?.find((e=>e.pubkey===n)):e.accounts?.find((e=>e.isAta));if(a||(a=e.accounts?.[0]),!a)return;const o=e.actions?.find((e=>"close"===e.name))?.metadata;s.unwrapWrappedSol(e,a,o,t?r:()=>m("/portfolio"))}),[s,t,m]),handleCloseTokenAccount:(0,r.useCallback)(((e,t)=>{let n=t?e.accounts?.find((e=>e.pubkey===t)):e.accounts?.find((e=>e.isAta));if(n||(n=e.accounts?.[0]),!n)return;const r=e.actions?.find((e=>"close"===e.name))?.metadata;s.closeTokenAccount(e,n,r)}),[s]),handleBurnTokenAccount:(0,r.useCallback)((async(e,r)=>{let a=r?e.accounts?.find((e=>e.pubkey===r)):e.accounts?.find((e=>e.isAta));if(a||(a=e.accounts?.[0]),!a)return;const o=e.actions?.find((e=>"burn-and-close"===e.name))?.metadata;await(0,i.Z)({title:(0,n.jsx)(l.ZT,{variant:"h2",children:p("confirm_burn_title")}),message:(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(l.ZT,{variant:"h3",children:p("confirm_burn_you_are_burning",{count:a.uiAmount||1,name:e.symbol||"token"})}),(0,n.jsx)(l.ZT,{color:"textSecondary",children:p("confirm_burn_are_you_sure")}),(0,n.jsx)(d.Z,{mt:3,children:(0,n.jsx)(l.iz,{light:!0})})]}),confirmLabel:p("action_proceed"),cancelLabel:p("action_cancel"),bottom:t})&&s.burnAndCloseTokenAccount(e,a,o)}),[s,t,p]),handleRequestAirdrop:(0,r.useCallback)((()=>{s.requestSolanaAirdrop(1)}),[s])}}},"../../libs/solflare-shared/dist/features/portfolio/hooks/useSolanaToken.js":function(e,s,t){t.d(s,{D:function(){return o}});var n=t("../../libs/solflare-shared/dist/features/portfolio/hooks/useTokenData.js"),r=t("../../libs/solflare-shared/dist/constants/mints.js"),a=t("../../../node_modules/react/index.js");const o=()=>{const{data:e,isLoading:s,isError:t}=(0,n.W)();return{data:(0,a.useMemo)((()=>e?.tokens.find((e=>e.mint===r.BH))??null),[e]),isLoading:s,isError:t}}},"../../libs/solflare-shared/dist/features/portfolio/hooks/useTokenData.js":function(e,s,t){t.d(s,{W:function(){return p}});var n=t("../../libs/solflare-shared/dist/store/selectors/config.js"),r=t("../../libs/solflare-shared/dist/features/portfolio/api/portfolio.js"),a=t("../../../node_modules/react-redux/es/index.js"),o=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),i=t("../../libs/shared/dist/features/currencies/index.js"),l=t("../../../node_modules/bignumber.js/bignumber.js"),d=t.n(l),c=t("../../libs/solflare-shared/dist/utils/units.js"),u=t("../../../node_modules/lodash/lodash.js"),f=t("../../libs/solflare-shared/dist/constants/mints.js"),m=t("../../libs/solflare-shared/dist/utils/tokenAccounts.js");const p=()=>{const e=(0,a.v9)(n.Wg),s=(0,a.v9)(n.eN),t=(0,i.Af)();return(0,o.a)({queryKey:["tokens",e,s.url,t.ticker],queryFn:()=>(0,r.lz)(e,s.cluster,t.ticker),refetchInterval:6e4,select:s=>((e,s)=>{const t=e.tokens.map((e=>{const t=e.accounts.reduce(((e,s)=>e.plus(s.amount)),new(d())(0)),n=(0,c.d)(t,e.decimals),r=new(d())(n).times(e.price?.price||0).toString(),a=(0,m.d)(e.mint,s,e.standard);return{...e,amount:n,value:r,accounts:(e.accounts||[]).map((s=>{const t=(0,c.d)(s.amount,e.decimals);return{...s,uiAmount:t,value:new(d())(t).times(e.price?.price||0).toString(),isAta:s.pubkey===a,delegation:s.delegation?{...s.delegation,uiAmount:(0,c.d)(s.delegation.amount,e.decimals)}:null}}))}})),n=(0,u.sortBy)(t,[e=>e.mint!==f.BH,e=>!e.name,e=>-(e.value||0),e=>-(e.amount||0),e=>e.mint]);return{...e,tokens:n}})(s,e),enabled:!!e})}},"../../libs/solflare-shared/dist/features/portfolio/hooks/useTotalPortfolioValue.js":function(e,s,t){t("../../../node_modules/react-redux/es/index.js"),t("../../libs/solflare-shared/dist/store/selectors/config.js"),t("../../libs/shared/dist/features/currencies/index.js"),t("../../libs/solflare-shared/dist/features/portfolio/api/portfolio.js")},"../../libs/solflare-shared/dist/features/portfolio/utils.js":function(e,s,t){t.d(s,{Bj:function(){return u},Ir:function(){return m},dP:function(){return f},ls:function(){return c}});var n=t("../../../node_modules/lodash/lodash.js"),r=t("../../libs/solflare-shared/dist/constants/mints.js"),a=t("../../libs/solflare-shared/dist/features/portfolio/constants/common.js"),o=t("../../libs/solflare-shared/dist/utils/common.js"),i=t("../../libs/solflare-shared/dist/utils/units.js"),l=t("../../../node_modules/bignumber.js/bignumber.js"),d=t.n(l);const c=(e,s)=>e.filter((e=>e.name?.toLowerCase().includes(s.toLowerCase().trim())||e.symbol?.toLowerCase().includes(s.toLowerCase().trim()))),u=e=>(0,n.sortBy)(e,[e=>e.tokenId!==r.BH,e=>-e.rawValue,e=>e.name?.toLowerCase(),e=>e.tokenId.toLowerCase()]),f=(e,s=1)=>new(d())(e).times(2e5).times(Math.min(s,7)).dividedBy(1e6).toNumber(),m=({amount:e,type:s,tokenId:t,computeUnitPrice:n})=>{if(t!==r.BH||!(0,o.T4)(e)||!n)return e;const l=+(0,i.z)(e,9),d=("LEDGER"===s?0:f(n,1))+a.gM,c=l-d<a.bA?0:l-d;return(0,i.d)(c,9)}},"../../libs/solflare-shared/dist/features/recipientInput/components/index.js":function(e,s,t){t.d(s,{T:function(){return d}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../libs/foundation-ui/dist/index.js"),a=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),o=t("../../libs/solflare-shared/dist/features/recipientInput/context/RecipientInputState.js"),i=t("../../libs/solflare-shared/dist/features/pfp/index.js"),l=t("../../libs/solflare-shared/dist/utils/extension.js"),d=({hasErrors:e})=>{const{t:s}=(0,a.$)(),{recipients:t,setSearch:d,isLoading:c,isAddressValid:u,selectedRecipient:f,isAddressSaveable:m,saveAddressChecked:p,setSaveAddressChecked:h,saveAddressError:b,addressName:g,setAddressName:y,changeSelectedRecipient:k,onPaste:j,isDisabled:_}=(0,o.Du)(),x=[{value:o.f1.RECENT,label:s("address_input_recent")},{value:o.f1.MNEMONIC,label:s("address_input_mnemonic")},{value:o.f1.METAMASK,label:s("address_input_metamask")},{value:o.f1.BURNER,label:s("address_input_burner")},{value:o.f1.LEDGER,label:s("address_input_ledger")},{value:o.f1.KEYSTONE,label:s("address_input_keystone")},{value:o.f1.PRIVATEKEY,label:s("address_input_imported")},{value:o.f1.SAVED,label:s("address_input_saved")}];return(0,n.jsxs)(r.auc,{children:[(0,n.jsx)(r.j7Y,{error:u?null:s("address_book_new_contact_address_solana_incorect"),isFetching:c,recipients:t,label:s("form_recepient_address"),placeholder:s("form_recepient_placeholder"),recipientGroups:x,selectedRecipient:f,onInputChange:d,onPaste:j,disabled:_,onSelectedItemChange:k,onClearSelection:()=>k(null),renderAvatar:e=>(0,n.jsx)(i.yq,{publicKey:e,"data-id":"recipient-avatar"})}),m&&!e&&!l.Qd&&(0,n.jsxs)(r.Wyz,{children:[(0,n.jsx)(r.$BJ,{checked:p,onCheckedChange:()=>h(!p),id:"saveContactCheckbox",children:(0,n.jsx)(r.keQ,{htmlFor:"saveContactCheckbox",children:s("form_save_address")})}),p&&(0,n.jsx)(r.nvn,{error:Boolean(b),hint:(0,n.jsx)(r.__J,{error:!0,children:b}),maxLength:16,placeholder:s("form_name_placeholder"),value:g,onChange:e=>y(e.target.value),id:"enterContactNameInputId",label:(0,n.jsx)(r.__J,{htmlFor:"enterContactNameInputId",children:s("form_save_address_name")})})]})]})}},"../../libs/solflare-shared/dist/features/recipientInput/context/RecipientInputState.js":function(e,s,t){t.d(s,{f1:function(){return n},jH:function(){return y},Du:function(){return k}});var n,r=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react/index.js"),o=t("../../../node_modules/react-redux/es/index.js"),i=t("../../libs/solflare-shared/dist/store/selectors/config.js"),l=t("../../../node_modules/lodash/lodash.js"),d=t("../../libs/solflare-shared/dist/features/addressBook/context/AddressBook.js"),c=t("../../libs/solflare-shared/dist/features/addressBook/context/RecentAddresses.js"),u=t("../../libs/solflare-shared/dist/features/recipientInput/utils/transformers.js"),f=t("../../libs/solflare-shared/dist/features/recipientInput/utils/validators.js"),m=t("../../libs/solflare-shared/dist/features/shared/account/index.js"),p=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),h=t("../../libs/solflare-shared/dist/wallet/index.js");!function(e){e.MANUAL="MANUAL",e.RECENT="RECENT",e.MNEMONIC="MNEMONIC",e.METAMASK="METAMASK",e.BURNER="BURNER",e.LEDGER="LEDGER",e.KEYSTONE="KEYSTONE",e.PRIVATEKEY="PRIVATEKEY",e.SAVED="SAVED"}(n||(n={}));const b=(0,a.createContext)({recipients:[],search:"",setSearch:()=>null,isLoading:!1,isAddressValid:!0,selectedRecipient:void 0,isAddressSaveable:!1,addressName:"",setAddressName:()=>null,saveAddressChecked:!1,setSaveAddressChecked:()=>null,showCurrentWallet:!0,setShowCurrentWallet:()=>null,saveAddress:()=>Promise.resolve(!1),saveAddressError:null,changeSelectedRecipient:()=>null,isDisabled:!1,onPaste:()=>null}),g={[n.RECENT]:0,[n.MNEMONIC]:1,[n.METAMASK]:2,[n.BURNER]:3,[n.LEDGER]:4,[n.KEYSTONE]:5,[n.PRIVATEKEY]:6,[n.SAVED]:7},y=({children:e})=>{const[s,t]=(0,a.useState)(""),[n,y]=(0,a.useState)(!1),[k,j]=(0,a.useState)(null),[_,x]=(0,a.useState)(""),[v,w]=(0,a.useState)(!1),[S,T]=(0,a.useState)(""),[C,E]=(0,a.useState)(!0),{wallet:A}=(0,h.we)(),{t:I}=(0,p.$)(),N=(()=>{const e=(0,o.v9)(i.ut);return e.accounts.map((({publicKey:s,name:t})=>{const n=e.wallets[s];return{publicKey:s,name:t,type:n.type,accountIndex:n.accountIndex??void 0}})).reduce(((e,{publicKey:s,name:t,type:n,accountIndex:r})=>(e[n]||(e[n]=[]),e[n].push({publicKey:s,name:t,accountIndex:r}),e)),{})})(),P=(()=>{const e=(0,o.v9)(i.ut);return(0,l.keyBy)(e.accounts,"publicKey")})(),{addAddress:O,addresses:R,nameByAddress:D}=(0,d.T)(),F=(0,c.H)(),{isLoading:U,data:L,isValid:M}=(e=>{const[s,t]=(0,a.useState)(""),{cluster:n}=(0,o.v9)(i.eN),[r,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!1),b=(0,a.useRef)((0,l.debounce)((e=>t(e)),400)).current;(0,a.useEffect)((()=>(b(e),()=>b.cancel())),[b,e]),(0,a.useEffect)((()=>{(async()=>{try{u(!0),h(!1);let e="",t="",r="";if((0,f.g)(s))e=s,t="address",r=s;else{const a=await(0,m.ru)(s,n);a&&(e=a.publicKey,t=a.source,r=s)}d(e?{publicKey:e,source:t,query:r}:null)}catch(e){h(!0),d(null)}finally{u(!1)}})()}),[n,s]);const g=(0,a.useMemo)((()=>!(s.length>0&&!r&&!c&&s===e)),[s,r,c,e]);return{isLoading:c,isError:p,data:r,isValid:g}})(s?.trim()),B=(0,a.useMemo)((()=>{const e=[],t=F.addresses?.filter((e=>((e,s)=>e.address.toLowerCase().includes(s.toLowerCase())||e.pubkey.toLowerCase().includes(s))(e,s))).slice(0,3).map((e=>(0,u.vd)(e,D,P)));t.length>0&&e.push(...t);const n=(0,l.sortBy)(R,[({name:e})=>e.toLowerCase()])?.filter((e=>((e,s)=>e.address.toLowerCase().includes(s.toLowerCase())||e.name.toLowerCase().includes(s.toLowerCase()))(e,s))).map(u.fB);return n.length>0&&e.push(...n),(0,l.forEach)(g,((t,n)=>{const r=(0,l.sortBy)(N[n],["accountIndex",e=>e.name.toLowerCase()])?.filter((e=>((e,s)=>e.name.toLowerCase().includes(s.toLowerCase())||e.publicKey.toLowerCase().includes(s.toLowerCase()))(e,s))).map((e=>(0,u.Pr)(e,n)));r?.length>0&&e.push(...r)})),e.filter((e=>C||A.publicKey!==e.address))}),[R,D,F.addresses,s,C,A.publicKey,N,P]),K=(0,a.useMemo)((()=>Boolean(k&&!D[k?.address??""]&&!P[k?.address??""])),[D,k,P]),Z=(0,a.useCallback)((async()=>{if(0===_.length)return T(I("form_save_address_name_is_empty")),!1;if(k?.address){const{address:e,name:s,subtitle:t}=k;return await O({pubkey:k.address,name:_,address:t&&s!==t?s??"":e}),x(""),w(!1),T(""),!0}return!1}),[O,_,k,I]),H=(0,a.useCallback)((e=>{const s=B.find((s=>s.address===e))??null;s&&j(s),!e&&j(null),w(!1),x(""),t("")}),[B]),$=(0,a.useMemo)((()=>{if(L)return"address"===L.source?(0,u.E5)(L):(0,u.EO)(L)}),[L]),G=(0,a.useCallback)((e=>{y(!0),t(e),setTimeout((()=>{y(!1)}),400)}),[]);(0,a.useEffect)((()=>{$&&j($)}),[$]);const V=(0,a.useMemo)((()=>({recipients:B,selectedRecipient:k,changeSelectedRecipient:H,isAddressSaveable:K,addressName:_,setAddressName:x,saveAddressChecked:v,setSaveAddressChecked:w,showCurrentWallet:C,setShowCurrentWallet:E,saveAddress:Z,saveAddressError:S,search:s,setSearch:t,recipientGroups:g,isLoading:U,isAddressValid:M,resolveData:L,onPaste:G,isDisabled:n})),[_,H,K,M,U,B,L,Z,v,S,s,k,C,G,n]);return(0,r.jsx)(b.Provider,{value:V,children:e})},k=(e=!0)=>{const s=(0,a.useContext)(b);return(0,a.useEffect)((()=>{s.setShowCurrentWallet(e)}),[s,e]),s}},"../../libs/solflare-shared/dist/features/recipientInput/utils/validators.js":function(e,s,t){t.d(s,{g:function(){return r}});var n=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js");const r=e=>{try{return new n.PublicKey(e),!0}catch(e){return!1}}},"../../libs/solflare-shared/dist/features/settings/contexts/DelegatedTokensProviderContext.js":function(e,s,t){t.d(s,{k:function(){return n}});const n=(0,t("../../../node_modules/react/index.js").createContext)(null)},"../../libs/solflare-shared/dist/features/settings/contexts/SelectContext.js":function(e,s,t){t.d(s,{Z:function(){return n}});const n=(0,t("../../../node_modules/react/index.js").createContext)(null)},"../../libs/solflare-shared/dist/features/settings/hooks/useAutoLockSettings/index.js":function(e,s,t){t.d(s,{o:function(){return l}});var n=t("../../../node_modules/react/index.js"),r=t("../../../node_modules/react-redux/es/index.js"),a=t("../../libs/solflare-shared/dist/store/selectors/config.js"),o=t("../../libs/solflare-shared/dist/store/actions/config.js"),i=t("../../libs/shared/dist/constants/autolock.js");const l=()=>{const e=(0,r.I0)(),{time:s,enabled:t}=(0,r.v9)(a.xB);return{isAutoLockEnabled:t,currentLockTime:s,changeAutoLock:(0,n.useCallback)((async s=>{await e((0,o.F7)(s)),await e((0,o.ml)(s!==i.pT.NEVER))}),[e]),autoLockOptions:i.GC,lookupAutoLock:i.qA}}},"../../libs/solflare-shared/dist/features/settings/hooks/useChangePasswordForm/index.js":function(e,s,t){t.d(s,{L:function(){return f}});var n=t("../../../node_modules/react/index.js"),r=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),a=t("../../../node_modules/lodash/lodash.js"),o=t("../../../node_modules/react-redux/es/index.js"),i=t("../../libs/wallet-core/dist/solana/shared.js"),l=t("../../libs/solflare-shared/dist/storage/solflareService.js"),d=t("../../libs/solflare-shared/dist/store/actions/wallet.js"),c=t("../../libs/solflare-shared/dist/store/actions/snackbar.js"),u=t("../../libs/solflare-shared/dist/features/settings/hooks/useWalletInfo/index.js");const f=()=>{const{t:e}=(0,r.$)(),s=(0,u.v)(),t=(0,o.I0)(),[f,m]=(0,n.useState)({currentPassword:"",newPassword:"",repeatPassword:""}),[p,h]=(0,n.useState)({}),b=Boolean(s.locked),g=(0,n.useCallback)(((e,s)=>{m((t=>({...t,[e]:s}))),h({})}),[]),y=(0,n.useCallback)((async()=>{const s={};if(b&&!f.currentPassword&&(s.currentPassword=e("validation_password_is_required")),f.newPassword||(s.newPassword=e("validation_password_is_required")),s.currentPassword)return h(s),!1;const n=await l.Z.solflaredata.get();let r;try{if(n.locked){const e=(0,i.c_)(f.currentPassword);r=await(0,i.bI)(n.data,e)}else r=n.data}catch(t){s.currentPassword=e("password_incorrect")}if(s.currentPassword||f.currentPassword!==f.newPassword||(s.currentPassword||(s.currentPassword=""),s.newPassword=e("validation_password_cant_be_same_as_old"),s.repeatPassword=""),f.repeatPassword!==f.newPassword&&(s.repeatPassword=e("validation_passwords_dont_match")),!(0,a.isEmpty)(s))return h(s),!1;const o=(0,i.c_)(f.newPassword);return await t((0,d.x4)({locked:!0,data:r,password:o})),await t((0,d.RY)()),t((0,c.yv)({message:e("password_updated"),options:{onClick:()=>{},variant:"info",autoHideDuration:1e3}})),!0}),[b,f.currentPassword,f.newPassword,f.repeatPassword,t,e]),k=b&&0===f.currentPassword.length||0===f.newPassword.length||0===f.repeatPassword.length||0!==Object.keys(p).length;return{values:f,errors:p,setValue:g,changePassword:y,disableSubmit:k,requireCurrentPassword:b}}},"../../libs/solflare-shared/dist/features/settings/hooks/useDelegatedTokens/index.js":function(e,s,t){t.d(s,{o:function(){return a}});var n=t("../../../node_modules/react/index.js"),r=t("../../libs/solflare-shared/dist/features/settings/contexts/index.js");const a=()=>{const e=(0,n.useContext)(r.kV);if(null===e)throw new Error("useDelegatedTokens must be used within a DelegatedTokensContext");return e}},"../../libs/solflare-shared/dist/features/settings/hooks/useHideBalancesSettings/index.js":function(e,s,t){t.d(s,{s:function(){return i}});var n=t("../../../node_modules/react/index.js"),r=t("../../../node_modules/react-redux/es/index.js"),a=t("../../libs/solflare-shared/dist/store/selectors/config.js"),o=t("../../libs/solflare-shared/dist/store/actions/config.js");const i=()=>{const e=(0,r.I0)();return{isBalanceHidden:(0,r.v9)(a.d2),setHideBalancesEnabled:(0,n.useCallback)((s=>e((0,o.vf)(s))),[e])}}},"../../libs/solflare-shared/dist/features/settings/hooks/useNetworkSettings/index.js":function(e,s,t){t.d(s,{Q:function(){return f}});var n=t("../../../node_modules/react/index.js"),r=t("../../../node_modules/lodash/lodash.js"),a=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),o=t("../../../node_modules/react-redux/es/index.js"),i=t("../../libs/solflare-shared/dist/features/confirmDialog/index.js"),l=t("../../libs/solflare-shared/dist/store/selectors/config.js"),d=t("../../libs/solflare-shared/dist/constants/networks.js"),c=t("../../libs/solflare-shared/dist/store/actions/config.js"),u=t("../../libs/solflare-shared/dist/store/actions/snackbar.js");const f=()=>{const{t:e}=(0,a.$)(),s=(0,o.I0)(),{confirm:t}=(0,i.WK)(),{current:f,items:m}=(0,o.v9)(l.g0),p=(0,n.useRef)(f),h=(0,n.useCallback)((async n=>{const a=m[n].cluster;return!(a!==d.EE.mainnet&&!await t({title:e("network_switch_warning_title",{cluster:(0,r.upperFirst)(a)}),message:e("network_switch_warning_description",{cluster:a.toLowerCase()}),confirmButtonText:e("action_continue")}))&&(await s((0,c.uO)(n)),s((0,u.sy)(`changeNetwork-${p.current}`)),s((0,u.yv)({message:e("network_connected_to",{cluster:(0,r.upperFirst)(a)}),options:{onClick:()=>{},autoHideDuration:3e3,variant:"info"}})),p.current=a,!0)}),[t,s,m,e]);return{current:f,networks:m,changeNetwork:h}}},"../../libs/solflare-shared/dist/features/settings/hooks/useNotificationsSettings/index.js":function(e,s,t){t.d(s,{u:function(){return h}});var n=t("../../../node_modules/react/index.js"),r=t("../../../node_modules/react-redux/es/index.js"),a=t("../../libs/solflare-shared/dist/store/selectors/data.js"),o=t("../../libs/solflare-shared/dist/features/settings/hooks/useWalletInfo/index.js"),i=t("../../libs/solflare-shared/dist/utils/notifications.js"),l=t("../../libs/solflare-shared/dist/features/settings/utils/index.js"),d=t("../../libs/solflare-shared/dist/features/settings/notifications/notificationPreferences.js"),c=t("../../libs/solflare-shared/dist/store/actions/notifications.js"),u=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),f=t("../../libs/solflare-shared/dist/utils/extension.js");const m=["inbound-asset","inbound-nft","outbound-asset","outbound-nft"],p=()=>window.open("/wallet.html#/settings/notifications","_blank"),h=()=>{const e=(0,r.I0)(),{i18n:s}=(0,u.$)(),t=(0,r.v9)(a.yu),{currentAccount:h}=(0,o.v)(),b=(0,i.YE)(h?.type),[g,y]=(0,n.useState)(0),k=(0,n.useMemo)((()=>(t?.subscriptions??[]).find((e=>e.publicKey===h?.publicKey))),[t,h?.publicKey]),j="granted"!==Notification.permission||!k,_=(0,i.Yz)(),x=!j||b,v=!(0,i.Yz)()||"denied"===Notification.permission,w=!!(t.enabled&&t.subscriptions&&t.subscriptions.length),S=(0,n.useCallback)((async t=>{"denied"!==Notification.permission||!f.p1||f.Cy?"default"===Notification.permission?(await e((0,c.dh)({language:s.language,enabled:!0})),f.p1&&!f.Cy?p():(await Notification.requestPermission(),y((e=>e+1)))):await e((0,c.dh)({language:s.language,enabled:t})):p()}),[e,s.language]),T=(0,n.useCallback)((async(n,r,a=!1)=>{if(!h?.publicKey)return!1;const o=(0,d.Hv)(t.subscriptions,h?.publicKey,n,r,a);return await e((0,c.Pb)({...t,language:s.language,subscriptions:o})),!0}),[h?.publicKey,e,s.language,t]),C=(0,n.useMemo)((()=>m.map((e=>({id:e,enabled:(0,l.fq)(e,k)})))),[k]);return{webPushBlocked:v,webPushEnabled:w,notificationsEnabled:x,isNotificationsAvailableForWallet:b,notificationsDisabled:j,notificationsSupported:_,setNotificationsEnabled:S,setPreferenceEnabled:T,subscription:k,preferences:C}}},"../../libs/solflare-shared/dist/features/settings/hooks/useSelect/index.js":function(e,s,t){t.d(s,{L:function(){return a}});var n=t("../../../node_modules/react/index.js"),r=t("../../libs/solflare-shared/dist/features/settings/contexts/index.js");const a=()=>{const e=(0,n.useContext)(r.ZB);if(null===e)throw new Error("useSelect must be used within a SelectContext");return e}},"../../libs/solflare-shared/dist/features/settings/hooks/useSignedMessagesLogs/index.js":function(e,s,t){t.d(s,{n:function(){return a}});var n=t("../../../node_modules/react/index.js"),r=t("../../libs/solflare-shared/dist/features/settings/contexts/index.js");const a=()=>{const e=(0,n.useContext)(r.U7);if(null===e)throw new Error("useSignedMessagesLogs must be used within a SignedMessagesLogsContext");return e}},"../../libs/solflare-shared/dist/features/settings/hooks/useWalletInfo/index.js":function(e,s,t){t.d(s,{v:function(){return l}});var n=t("../../../node_modules/reselect/es/index.js"),r=t("../../../node_modules/react-redux/es/index.js"),a=t("../../libs/solflare-shared/dist/store/selectors/config.js"),o=t("../../libs/wallet-core/dist/solana/shared.js");const i=(0,n.P1)(a.ut,(e=>{const{loggedIn:s,locked:t,wallets:n,accounts:r,selectedAccount:a}=e;if(!s)return{loggedIn:s};const i=r.map((({name:e,publicKey:s})=>({name:e,publicKey:s,type:n[s].type})));return{loggedIn:s,locked:t,accounts:i,selectedAccount:a,currentAccount:i[a],hasMnemonic:i.filter((e=>e.type===o.R7)).length>0}})),l=()=>(0,r.v9)(i)},"../../libs/solflare-shared/dist/features/settings/notifications/notificationPreferences.js":function(e,s,t){t.d(s,{Hv:function(){return o},Zj:function(){return r},vv:function(){return a}});var n=t("../../../node_modules/lodash/lodash.js");const r=(e,s)=>{switch(e){case"inbound-asset":return s("notifications_type_inbound_coins");case"outbound-asset":return s("notifications_type_sent_tokens");case"inbound-nft":return s("notifications_type_receive_collectibles");case"outbound-nft":return s("notifications_type_sent_collectibles");default:return""}},a=(e,s)=>{switch(e){case"inbound-asset":return s("notifications_type_receive_tokens_description");case"outbound-asset":return s("notifications_type_sent_tokens_description");case"inbound-nft":return s("notifications_type_receive_collectibles_description");case"outbound-nft":return s("notifications_type_sent_collectibles_description");default:return""}},o=(e=[],s,t,r,a)=>{const o=[],i=(0,n.cloneDeep)(e);"inbound-asset"===t?(o.push("inbound-sol"),o.push("inbound-spl")):"outbound-asset"===t?(o.push("outbound-sol"),o.push("outbound-spl")):"inbound-nft"===t?o.push("inbound-nft"):"outbound-nft"===t&&o.push("outbound-nft");for(const e of o)for(let t=0;t<i.length;t++)(a||i[t].publicKey===s)&&(i[t].preferences=i[t].preferences.filter((s=>s!==e)),r&&i[t].preferences.push(e));return i}},"../../libs/solflare-shared/dist/features/settings/providers/DelegatedTokensProvider.js":function(e,s,t){t.d(s,{Z:function(){return w}});var n,r=t("../../../node_modules/react/jsx-runtime.js"),a=t("../../../node_modules/react/index.js"),o=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),i=t("../../../node_modules/lodash/lodash.js"),l=t("../../libs/solflare-shared/dist/features/settings/contexts/index.js"),d=t("../../libs/solflare-shared/dist/features/portfolio/hooks/useTokenData.js"),c=t("../../libs/solflare-shared/dist/features/nfts/hooks/useNftData.js");!function(e){e.Token="token",e.Nft="nft"}(n||(n={}));const u=e=>e.accounts.map((s=>((e,s)=>e.delegation?{type:n.Token,address:e.pubkey,tokenId:s.mint,delegation:{address:e.delegation.pubkey,amount:e.delegation.amount,uiAmount:e.delegation.uiAmount},state:e.state,info:{name:s.name,image:s.imageUri,symbol:s.symbol,price:s.price?.usdPrice}}:null)(s,e))).filter(Boolean),f=e=>e.tokenData&&e.tokenData.delegation?{type:n.Nft,address:e.tokenData.pubkey,tokenId:e.id,state:e.tokenData.state,tokenStandard:e.tokenStandard,delegation:{address:e.tokenData.delegation.pubkey,amount:e.tokenData.delegation.amount,uiAmount:e.tokenData.delegation.uiAmount},info:{name:e.name,image:e.image}}:null;var m=t("../../libs/solflare-shared/dist/wallet/index.js"),p=t("../../libs/solflare-shared/dist/wallet/hooks/index.js"),h=t("../../libs/solflare-shared/dist/store/api/account.js"),b=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),g=t("../../libs/foundation-ui/dist/index.js"),y=t("../../libs/solflare-shared/dist/utils/truncateMiddle.js"),k=t("../../libs/solflare-shared/dist/utils/getResizedImageUrl.js"),j=({type:e,image:s,name:t,address:n,delegatedAddress:a,amount:o})=>(0,r.jsx)(g.GGf,{avatar:(0,r.jsx)(g.Ce,{size:"xl",icon:b.s3v}),transactionFromItem:(0,r.jsx)(g.nrP,{title:t||(0,y.r)(n),subtitle:(0,y.r)(a),avatar:(0,r.jsx)(g.qEK,{src:s?(0,k.N)(s):void 0,variant:"nft"===e?"square":"circle"}),amount:o})});const _={nfts:b.l9f,tokens:b.t5N,mixed:b.Psp};var x=({type:e,count:s})=>{const{t:t}=(0,o.$)();return(0,r.jsx)(g.GGf,{avatar:(0,r.jsx)(g.Ce,{size:"xl",icon:b.s3v}),transactionFromItem:(0,r.jsx)(g.nrP,{title:t("nfts"===e?"confirmation_spending_approval_revoke_type_nfts":"tokens"===e?"confirmation_spending_approval_revoke_type_tokens":"confirmation_spending_approval_revoke_type_mixed",{count:s}),avatar:(0,r.jsx)(g.Ce,{variant:"nfts"===e?"square":"circle",icon:_[e]})})})},v=t("../../libs/solflare-shared/dist/features/settings/hooks/index.js"),w=({children:e})=>{const{t:s}=(0,o.$)(),{wallet:t,transactionInit:n}=(0,m.we)(),{data:b,isLoading:g,refetch:k}=(0,d.W)(),{data:_,isLoading:w,refetch:S}=(0,c.c)(),{cluster:T}=(0,v.uJ)(),C=g||w,E=(0,a.useMemo)((()=>{const e=[];return C?e:(b?.tokens&&Array.isArray(b.tokens)&&e.push(...b.tokens.map(u).flat()),_?.nfts&&Array.isArray(_.nfts)&&e.push(..._.nfts.map(f).filter(Boolean)),(0,i.sortBy)(e,[e=>e.info.name?.toLowerCase(),e=>+e.delegation.uiAmount],["asc","desc"]))}),[C,b,_]),A=(0,a.useMemo)((()=>(0,i.keyBy)(E,"address")),[E]),I=(0,a.useMemo)((()=>Object.keys(A)),[A]),N=(0,a.useCallback)((async e=>{const a=A[e];return new Promise(((o,i)=>{n({title:s("action_revoke"),txBuilder:h.Gc,builderParams:{token:{address:a.address,tokenId:a.tokenId,state:a.state,tokenStandard:a.tokenStandard,delegateAddress:a.delegation.address},address:t.publicKey,network:T},commitment:"processed",onBroadcast:({status:e})=>{if("success"===e)return o();i()},onConfirm({status:e}){"success"===e&&("nft"===a.type?S():k())},confirmDialog:(0,r.jsx)(j,{type:a.type,name:a.info.name||(0,y.r)(a.tokenId),address:e,delegatedAddress:a.delegation.address,image:a.info.image,amount:"token"===a.type?a.delegation.uiAmount:void 0})})}))}),[A,n,t.publicKey,s,k,S,T]),P=(0,a.useCallback)((async e=>{if(1===e.length)return N(e[0]);const a=e.map((e=>A[e])).filter(Boolean),o=a.filter((e=>"token"===e.type)).length,i=a.filter((e=>"nft"===e.type)).length;let l="mixed";return o&&!i?l="tokens":!o&&i&&(l="nfts"),new Promise((e=>{n({title:s("action_revoke"),txBuilder:h.Gc,builderParams:{token:a.map((e=>({address:e.address,tokenId:e.tokenId,state:e.state,tokenStandard:e.tokenStandard,delegateAddress:e.delegation.address}))),address:t.publicKey,network:T},useSignAndSend:p.go,commitment:"processed",onEnd:()=>{["nfts","mixed"].includes(l)&&S(),["tokens","mixed"].includes(l)&&k(),e()},confirmDialog:(0,r.jsx)(x,{type:l,count:a.length})})}))}),[A,n,t.publicKey,s,k,S,T]),O={isLoading:C,delegatedTokens:E,items:I,itemsById:A,revoke:N,revokeMultiple:P};return(0,r.jsx)(l.kV.Provider,{value:O,children:e})}},"../../libs/solflare-shared/dist/features/settings/providers/SelectProvider.js":function(e,s,t){var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react/index.js"),a=t("../../libs/solflare-shared/dist/features/settings/contexts/index.js");s.Z=({children:e})=>{const[s,t]=(0,r.useState)("none"),[o,i]=(0,r.useState)(new Map),l=(0,r.useMemo)((()=>({selected:o,setSelected:i,mode:s,setMode:t})),[s,o]);return(0,n.jsx)(a.ZB.Provider,{value:l,children:e})}},"../../libs/solflare-shared/dist/features/settings/utils/index.js":function(e,s,t){t.d(s,{CS:function(){return n.CS},Wf:function(){return n.Wf},fq:function(){return r.f}});var n=t("../../libs/solflare-shared/dist/features/settings/utils/signedMessagesLogs.js"),r=t("../../libs/solflare-shared/dist/features/settings/utils/notifications.js")},"../../libs/solflare-shared/dist/features/settings/utils/notifications.js":function(e,s,t){t.d(s,{f:function(){return n}});const n=(e,s)=>{if(!s)return!1;return"inbound-asset"===e?["inbound-sol","inbound-spl"].some((e=>s.preferences.includes(e))):"outbound-asset"===e?["outbound-sol","outbound-spl"].some((e=>s.preferences.includes(e))):"inbound-nft"===e?s.preferences.includes("inbound-nft"):s.preferences.includes("outbound-nft")}},"../../libs/solflare-shared/dist/features/shared/account/api/index.js":function(e,s,t){t.d(s,{r:function(){return r}});var n=t("../../libs/solflare-shared/dist/api/index.js");const r=async(e,s="mainnet")=>{try{const{body:t}=await(0,n.U)(`https://wallet-api.solflare.com/v2/resolver/resolve/${e}?network=${s}`);return t}catch(e){return null}}},"../../libs/solflare-shared/dist/features/shared/account/utils.js":function(e,s,t){t.d(s,{$:function(){return i},h:function(){return o}});var n=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),r=t("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),a=t("../../../node_modules/@solana/spl-token/lib/esm/state/mint.js");const o=async({pubkey:e,connection:s})=>{if(!e)return;let t=null;try{t=new n.PublicKey(e)}catch(e){return{ok:!1,error:"INVALID_PUBLIC_KEY"}}const a=await s.getParsedAccountInfo(t);if(null===a.value)return{ok:!0,confirm:"ACCOUNT_DOESNT_EXIST"};{const e=a.value.owner;if(e.equals(n.SystemProgram.programId))return{ok:!0};if(e.equals(n.StakeProgram.programId))return{ok:!0,confirm:"STAKE_ACCOUNT"};if(e.equals(r.H_)){const e=a.value.data.parsed;return"mint"===e.type?{ok:!1,error:"MINT_ADDRESS"}:"account"===e.type?{ok:!0,confirm:"SPL_TOKEN_ACCOUNT"}:{ok:!1,error:"TOKEN_PROGRAM"}}return{ok:!1,error:"NOT_SOLANA_ACCOUNT"}}},i=async({pubkey:e,mint:s,connection:t})=>{if(!e)return;let o=null;try{o=new n.PublicKey(e)}catch(e){return{ok:!1,error:"INVALID_PUBLIC_KEY"}}const i=await t.getParsedAccountInfo(o);if(null===i.value||i.value.owner?.equals(n.SystemProgram.programId)){const e=await(0,a.Am)(new n.PublicKey(s),o,!0);return null===(await t.getParsedAccountInfo(e,"confirmed")).value?{ok:!0,confirm:"ATA_CREATION",accountEmpty:null===i.value}:{ok:!0,accountEmpty:null===i.value}}if(i.value.owner.equals(r.H_)){const e=i.value.data.parsed;return"mint"===e.type?{ok:!1,error:"MINT_ADDRESS"}:e.info.mint!==s?{ok:!1,error:"WRONG_MINT"}:{ok:!0,confirm:"TOKEN_ACCOUNT_CORRECT"}}return{ok:!1,error:"NOT_A_TOKEN_ACCOUNT"}}},"../../libs/solflare-shared/dist/features/staking/api/staking.js":function(e,s,t){t.d(s,{GN:function(){return d},Gg:function(){return u},vB:function(){return c},vg:function(){return f},yJ:function(){return l}});var n=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),r=t("../../../node_modules/base64-js/index.js"),a=t("../../libs/solflare-shared/dist/api/index.js"),o=t("../../libs/solflare-shared/dist/utils/lamportToSol.js");const i="https://wallet-api.solflare.com";async function l({validator:e,amount:s,pubkey:t,network:l,setComputeBudget:d}){const{body:c}=await(0,a.v)(`${i}/v2/staking/create-stake-account`,{address:t,amount:(0,o.m)(s),validator:e,network:l,setComputeBudget:d});if(c?.error)throw new Error(c.error);if(!c?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:n.VersionedTransaction.deserialize(r.toByteArray(c.txs[0])),data:{stakeAccountPubkey:c?.stakeAccount}}}async function d({stakeAccount:e,address:s,validator:t,network:o,setComputeBudget:l}){const{body:d}=await(0,a.v)(`${i}/v2/staking/delegate-stake`,{stakeAccount:e,address:s,validator:t,network:o,setComputeBudget:l});if(d?.error)throw new Error(d.error);if(!d?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:n.VersionedTransaction.deserialize(r.toByteArray(d.txs[0]))}}async function c({stakeAccount:e,address:s,amount:t,setComputeBudget:l,network:d}){const{body:c}=await(0,a.v)(`${i}/v2/staking/split-stake`,{stakeAccount:e,address:s,amount:(0,o.m)(t),setComputeBudget:l,network:d});if(c?.error)throw new Error(c.error);if(!c?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:n.VersionedTransaction.deserialize(r.toByteArray(c.txs[0])),data:{stakeAccountPubkey:c?.stakeAccount}}}async function u({stakeAccount:e,address:s,amountLamports:t,setComputeBudget:o,network:l}){const{body:d}=await(0,a.v)(`${i}/v2/staking/withdraw-stake`,{stakeAccount:e,address:s,amount:t,setComputeBudget:o,network:l});if(d?.error)throw new Error(d.error);if(!d?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:n.VersionedTransaction.deserialize(r.toByteArray(d.txs[0]))}}async function f({stakeAccount:e,address:s,setComputeBudget:t,network:o}){const{body:l}=await(0,a.v)(`${i}/v2/staking/deactivate-stake`,{stakeAccount:e,address:s,network:o,setComputeBudget:t});if(l?.error)throw new Error(l.error);if(!l?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:n.VersionedTransaction.deserialize(r.toByteArray(l.txs[0]))}}},"../../libs/solflare-shared/dist/features/stakingCore/constants.js":function(e,s,t){t.d(s,{T:function(){return n}});const n=.01},"../../libs/solflare-shared/dist/features/stakingCore/index.js":function(e,s,t){t.d(s,{uW:function(){return v},fZ:function(){return N},gK:function(){return w},jg:function(){return b},tb:function(){return S},QC:function(){return T},Bf:function(){return _},ku:function(){return A},Ub:function(){return x},te:function(){return l},Uo:function(){return I}});var n=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),r=t("../../../node_modules/react-redux/es/index.js"),a=t("../../libs/solflare-shared/dist/store/selectors/config.js"),o=t("../../libs/solflare-shared/dist/api/index.js"),i=t("../../libs/solflare-shared/dist/features/stakingCore/utils/transformValidatorResponse.js");const l=(e="",s="")=>{const t=(0,r.v9)(a.eN);return(0,n.a)({queryKey:["validators",t.cluster,e,s],queryFn:()=>(async(e,s,t)=>{const{body:n}=await(0,o.U)(`https://wallet-api.solflare.com/v2/staking/validators?network=${e}${s?`&query=${encodeURIComponent(s)}`:""}${t?`&selected=${encodeURIComponent(t)}`:""}`);return n.data.map(i.s)})(t.cluster,e,s),staleTime:1/0,keepPreviousData:!0})};var d=t("../../../node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),c=t("../../../node_modules/@tanstack/react-query/build/lib/useMutation.mjs"),u=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),f=t("../../libs/solflare-shared/dist/features/staking/api/staking.js"),m=t("../../libs/solflare-shared/dist/wallet/index.js"),p=t("../../libs/solflare-shared/dist/features/settings/index.js"),h=t("../../libs/wallet-core/dist/solana/ledger.js");const b=()=>{const{t:e}=(0,u.$)(),s=(0,d.NL)(),{wallet:t,transactionInit:n}=(0,m.we)(),{cluster:r}=(0,p.uJ)(),a=t.instance instanceof h.uN;return(0,c.D)({mutationFn:({stakePubkey:o,onBroadcast:i,confirmData:l,validatorPubkey:d})=>n({title:e("action_restake"),commitment:"confirmed",txBuilder:f.GN,builderParams:{address:t.publicKey,stakeAccount:o,validator:d,network:r,setComputeBudget:!a},confirmDialog:l,skipComputeBudget:!0,onBroadcast({status:e}){"success"===e&&i?.()},onConfirm({status:e}){"success"===e&&s.invalidateQueries(["staking-accounts"])}})})};var g=t("../../../node_modules/react/jsx-runtime.js"),y=t("../../libs/foundation-ui/dist/index.js"),k=t("../../../node_modules/react/index.js");const j=k.createContext({}),_=()=>{const{stakingModal:e}=k.useContext(j);if(!e)throw new Error("useStakeModal called outside the StakeModalProvider context");return e},x=()=>{const e=k.useContext(j);if(!e)throw new Error("useStakingProvider called outside the StakeModalProvider context");return e},v=({children:e})=>{const s=(0,y.qY0)(),[t,n]=k.useState(),r=(0,k.useMemo)((()=>({stakingModal:s,setLastCreatedStakeAccountPubKey:n,lastCreatedStakeAccountPubKey:t})),[t,s]);return(0,g.jsx)(j.Provider,{value:r,children:e})},w=()=>{const{t:e}=(0,u.$)(),{setLastCreatedStakeAccountPubKey:s}=x(),{wallet:t,transactionInit:n}=(0,m.we)(),{cluster:r}=(0,p.uJ)(),a=t.instance instanceof h.uN;return(0,c.D)({mutationFn:({validator:o,amountSOL:i,onBroadcast:l,confirmData:d})=>new Promise(((s,c)=>{n({title:e("action_stake"),commitment:"confirmed",txBuilder:f.yJ,builderParams:{amount:i,pubkey:t.publicKey,validator:o,network:r,setComputeBudget:!a},confirmDialog:d,skipComputeBudget:!0,onBroadcast({status:e}){"success"===e&&l?.()},onConfirm({status:e,data:t}){"success"===e?s(t?.stakeAccountPubkey):c(null)}})})).then((e=>(s(e),e)))})},S=(e,s)=>(0,n.a)({queryKey:["stakingRewards",e,s],queryFn:()=>(async(e,s)=>{const{body:t}=await(0,o.U)(`https://wallet-api.solflare.com/v2/staking/account/${e}/rewards?activationEpoch=${s}`);return{rewards:t.data}})(e,s),staleTime:1/0,keepPreviousData:!0}),T=()=>{const{t:e}=(0,u.$)(),{setLastCreatedStakeAccountPubKey:s}=x(),{wallet:t,transactionInit:n}=(0,m.we)(),{cluster:r}=(0,p.uJ)(),a=t.instance instanceof h.uN;return(0,c.D)({mutationFn:({amountSOL:o,onBroadcast:i,confirmData:l,stakePubkey:d})=>n({title:e("action_split"),commitment:"confirmed",txBuilder:f.vB,builderParams:{amount:o,address:t.publicKey,stakeAccount:d,setComputeBudget:!a,network:r},confirmDialog:l,skipComputeBudget:!0,onBroadcast({status:e}){"success"===e&&i?.()},onConfirm({status:e,data:t}){"success"===e&&s(t?.stakeAccountPubkey)}})})},C={inactive:11,inactiveDeactivating:10,deactivating:9,activating:8,active:7,activeInactive:6,empty:0},E=e=>e.includes("inactive")&&e.includes("deactivating")?"inactiveDeactivating":e.includes("active")&&e.includes("inactive")?"activeInactive":e.includes("empty")?"empty":e.includes("activating")?"activating":e[e.length-1],A=()=>{const e=(0,r.v9)(a.Wg),{cluster:s}=(0,r.v9)(a.eN),{lastCreatedStakeAccountPubKey:t}=x();return(0,n.a)({queryKey:["staking-accounts",s,e,t],queryFn:()=>(async(e,s,t)=>{const n=t?`&extend=${t}`:"",{body:r}=await(0,o.U)(`https://wallet-api.solflare.com/v2/portfolio/stake/${e}?network=${s}${n}`),a=r;return{...a,stakeAccounts:(i=a.stakeAccounts,i.sort(((e,s)=>{const t=C[E(e.statuses)]||1,n=C[E(s.statuses)]||1;return t!==n?n-t:e.amount!==s.amount?parseInt(s.amount,10)-parseInt(e.amount,10):s.voter>e.voter?1:-1})))};var i})(e,s,t),staleTime:1/0,refetchInterval:3e4,keepPreviousData:!0})},I=()=>{const{t:e}=(0,u.$)(),{wallet:s,transactionInit:t}=(0,m.we)(),n=(0,d.NL)(),{cluster:r}=(0,p.uJ)(),a=s.instance instanceof h.uN;return(0,c.D)({mutationFn:({onBroadcast:o,confirmData:i,stakePubkey:l,amountLamports:d,closeAccount:c=!1})=>t({title:e(c?"close_staking_account_title":"action_withdraw"),commitment:"confirmed",txBuilder:f.Gg,builderParams:{address:s.publicKey,amountLamports:d.toString(),stakeAccount:l,network:r,setComputeBudget:!a},confirmDialog:i,skipComputeBudget:!0,onBroadcast({status:e}){"success"===e&&o?.()},onConfirm({status:e}){"success"===e&&n.invalidateQueries(["staking-accounts"])}})})},N=e=>{const s=e;return s.includes("activating")?"activating":s.includes("deactivating")&&s.includes("inactive")?"deactivating-inactive":s.includes("inactive")&&s.includes("active")?"inactive-active":s.includes("deactivating")?"deactivating":1===s.length&&s.includes("active")?"active":1===s.length&&s.includes("inactive")?"inactive":s.includes("empty")?"empty":void 0}},"../../libs/solflare-shared/dist/features/stakingCore/utils/transformValidatorResponse.js":function(e,s,t){t.d(s,{s:function(){return a}});var n=t("../../libs/solflare-shared/dist/utils/truncateMiddle.js"),r=t("../../libs/shared/dist/utils/displayPrice.js");const a=e=>({...e,id:e.votePublicKey,name:e.name??(0,n.r)(e.votePublicKey),apyUI:(0,r.ED)({amount:e.apy,suffix:"% APY",displayType:"medium"})})},"../../libs/solflare-shared/dist/features/stakingModal/components/StakeForm.js":function(e,s,t){t.d(s,{m:function(){return u}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../libs/foundation-ui/dist/index.js"),a=t("../../libs/solflare-shared/dist/components/WebInfoTooltip/index.js"),o=t("../../libs/solflare-shared/dist/assets/solana.png"),i=t("../../libs/shared/dist/utils/displayPrice.js"),l=t("../../libs/solflare-shared/dist/utils/lamportToSol.js"),d=t("../../../node_modules/react-i18next/dist/es/useTranslation.js");const c=({validator:e,selectedAmount:s})=>{const{t:t}=(0,d.$)();return(0,n.jsxs)(r.CEA,{children:[(0,n.jsx)(r.q$7,{left:(0,n.jsxs)(r.fGk,{children:[t("table_apy"),(0,n.jsx)(r.bEE,{tooltip:t("staking_apy_description")})]}),right:(0,n.jsx)(r.MuV,{children:e.apyUI})}),(0,n.jsx)(r.q$7,{left:(0,n.jsxs)(r.fGk,{children:[t("staking_stake_detail_annual_return_label"),(0,n.jsx)(r.bEE,{tooltip:t("staking_stake_detail_annual_return_label_tooltip")})]}),right:(0,n.jsx)(r.MuV,{children:s?(0,i.ED)({amount:+(Number(s)||0)*(e.apy/100),displayType:"short",suffix:" SOL"}):"-"})}),(0,n.jsx)(r.q$7,{left:(0,n.jsxs)(r.fGk,{children:[t("staking_stake_detail_total_stake_label"),(0,n.jsx)(r.bEE,{tooltip:t("staking_stake_detail_total_stake_label_tooltip")})]}),right:(0,n.jsx)(r.MuV,{children:(0,i.ED)({amount:(0,l.s)(e.stakeActive),displayType:"none",suffix:" SOL"})})})]})},u=({maxSOLBalance:e,onAmountChange:s,selectedAmount:t,validatorOptions:i,onValidatorQueryChange:l,validatorsFetching:u,validatorsLoading:f,onValidatorChange:m,selectedValidator:p})=>{const{t:h}=(0,d.$)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.HEc,{label:(0,n.jsx)(r.__J,{htmlFor:"token-input",children:h("table_token")}),right:s&&(0,n.jsxs)(r.WOI,{onClick:e.isGreaterThan(0)?()=>s(e.toString()):void 0,children:[h("swap_max"),": ",e.toString()]}),id:"token-input",selectedToken:{tokenId:"-",symbol:"SOL",amount:"-",logoURI:o,verified:!0},readOnly:!s,autoFocusAmount:!0,amount:t,amountInputSize:"m",onAmountChange:e=>s?.(e.target.value),tokens:[],onSelectedTokenChange:()=>{},disabledTokenSelect:!0,amountTextInputType:"number"}),(0,n.jsx)(r.ky$,{options:i,onSearchChange:e=>l(e.target.value),isLoading:f,isFetching:u,onChange:m,onOpenChange:e=>!e&&l(void 0),value:p??void 0,placeholder:h("staking_please_select_a_validator"),searchInputPlaceholder:h("form_recepient_placeholder"),label:(0,n.jsxs)(n.Fragment,{children:[h("table_validator"),(0,n.jsx)(a.s,{tooltip:h("staking_validator_description")})]})}),p&&(0,n.jsx)(c,{validator:p,selectedAmount:t})]})}},"../../libs/solflare-shared/dist/features/stakingModal/hooks/useCreateStakeForm.js":function(e,s,t){t.d(s,{g:function(){return g}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react/index.js"),a=t("../../libs/solflare-shared/dist/utils/lamportToSol.js"),o=t("../../libs/solflare-shared/dist/features/stakingCore/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),l=t("../../libs/solflare-shared/dist/components/ConfirmationHelpers/ConfirmationStaking.js"),d=t("../../../node_modules/bignumber.js/bignumber.js"),c=t.n(d),u=t("../../libs/solflare-shared/dist/features/stakingCore/constants.js"),f=t("../../libs/solflare-shared/dist/utils/truncateMiddle.js"),m=t("../../../node_modules/lodash/lodash.js"),p=t("../../../node_modules/react-router/esm/react-router.js"),h=t("../../libs/solflare-shared/dist/features/portfolio/hooks/useSolanaToken.js"),b=t("../../libs/solflare-shared/dist/features/stakingCore/utils/transformValidatorResponse.js");const g=(e,s)=>{const{push:t}=(0,p.k6)(),{t:d}=(0,i.$)(),{data:g}=(0,h.D)(),[y,k]=(0,r.useState)(s&&(0,a.s)(s.amount).toString()),[j,_]=(0,r.useState)(s?.validator?(0,b.s)(s.validator):void 0),[x,v]=r.useState(),[w,S]=r.useState(),[T,C,E]=(0,o.Bf)(),A=r.useRef((0,m.debounce)((e=>S(e)),700)).current,I=(0,r.useCallback)((e=>{v(e),A(e)}),[A]),N=+(g?.accounts[0]?.amount||0),P=c().maximum((0,a.s)(N||0).minus(.05),0),{data:O,isLoading:R,isFetching:D}=(0,o.te)(w,j?.votePublicKey??void 0),{mutateAsync:F,isLoading:U}=(0,o.gK)(),{mutateAsync:L,isLoading:M}=(0,o.jg)(),B=(O||[]).map((e=>({...e,recommendedTagText:e.recommended?d("form_recommended"):void 0}))),K=((e,s,t=!1,n)=>{if(void 0===s)return;if(s<3200760)return{title:n("validation_insufficient_balance_title",{symbol:"SOL"}),message:n("validation_insufficient_balance_description",{amount:"0.01 SOL"})};if(s<1e7)return{title:n("validation_insufficient_balance_to_stake_title",{symbol:"SOL"}),message:n("validation_insufficient_balance_description",{amount:"0.02 SOL"})};if(t)return;if(void 0===e||isNaN(+e))return;if(0==+e)return;const r=new(c())(e||0);return""===e||r.isLessThan(u.T)?{title:n("staking_validation_amount_below_minimum_title"),message:n("staking_validation_amount_below_minimum_description",{amount:`${u.T} SOL`})}:(0,a.s)(s).isLessThan(r.plus(.05))?{title:n("staking_validation_insufficient_balance_title"),message:n("staking_validation_insufficient_balance_description")}:void 0})(y,N,Boolean(s),d),Z=()=>{k(void 0),_(void 0),E()},H=!j&&O?B[0]:j,$=s?L:F,G=s?{stakePubkey:s.publicKey,validatorPubkey:H?.votePublicKey,amountSOL:y,wallet:e,confirmData:(0,n.jsx)(l.Z,{validatorName:H?.name??(0,f.r)(H?.votePublicKey),validatorImage:H?.image??void 0,amount:y??"0"}),onBroadcast:()=>{Z(),t("/staking")}}:{validator:H?.votePublicKey,amountSOL:y,wallet:e,confirmData:(0,n.jsx)(l.Z,{validatorName:H?.name??(0,f.r)(H?.votePublicKey),validatorImage:H?.image??void 0,amount:y??"0"}),onBroadcast:()=>{Z(),t("/staking")}};return{selectedAmount:y,setSelectedAmount:k,selectedValidator:H,setSelectedValidator:e=>{_(e),I()},validatorOptions:B,maxSOLBalance:P,setValidatorFilter:I,validatorFilter:x,validatorsLoading:R,validatorsFetching:D,createStake:()=>$(G),createStakeLoading:U||M,closeStakeModal:Z,error:K,isStakeModalOpen:T}}},"../../libs/solflare-shared/dist/features/stakingModal/hooks/useStakingBanner.js":function(e,s,t){t.d(s,{g:function(){return d}});var n=t("../../../node_modules/react/index.js"),r=t("../../libs/solflare-shared/dist/features/stakingCore/index.js"),a=t("../../libs/solflare-shared/dist/features/portfolio/hooks/useSolanaToken.js"),o=t("../../libs/solflare-shared/dist/wallet/index.js"),i=t("../../libs/wallet-core/dist/solana/shared.js"),l=t("../../libs/solflare-shared/dist/hooks/useMetamask/index.js");const d=()=>{const[e,s]=(0,r.Bf)(),{data:t}=(0,a.D)(),{isMetamask:d}=(0,l.U)(),{wallet:{instance:c}}=(0,o.we)(),u=c?.type===i.CO;return{shouldShowBanner:(0,n.useMemo)((()=>{const e=+(t?.accounts[0]?.amount??0);return e&&!u&&101e7<e&&!d}),[u,d,t?.accounts]),openStakeModal:s}}},"../../libs/solflare-shared/dist/features/stakingModal/web/StakingBanner.js":function(e,s,t){t.d(s,{G:function(){return u}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../libs/rise-ui/dist/index.js"),a=t("../../libs/foundation-ui/dist/index.js"),o=t("../../../node_modules/@mui/material/styles/styled.js"),i=t("../../../node_modules/@mui/material/Typography/Typography.js"),l=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),d=t("../../libs/solflare-shared/dist/features/stakingModal/hooks/useStakingBanner.js");const c=(0,o.ZP)(a.zxk)((({theme:e})=>({"&&&":{color:e.palette.primary.main,"&:hover":{opacity:.8}}}))),u=({onDismiss:e})=>{const{t:s}=(0,l.$)(),{openStakeModal:t,shouldShowBanner:o}=(0,d.g)();return o?(0,n.jsx)(r.Zb,{padding:"small",children:(0,n.jsxs)(r.kC,{justifyContent:"space-between",px:1,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(i.Z,{variant:"h2",pb:.5,children:s("portfolio_staking_title",{token:"SOL"})}),(0,n.jsx)(i.Z,{variant:"body1",color:"textSecondary",children:s("portfolio_staking_description")})]}),(0,n.jsxs)(r.kC,{gap:"8px",alignItems:"center",children:[(0,n.jsx)(c,{variant:"tertiary",onClick:e,children:s("action_not_now")}),(0,n.jsx)(a.zxk,{onClick:t,children:s("action_stake")})]})]})}):null}},"../../libs/solflare-shared/dist/features/taskmask/components/TaskmaskBanner/index.js":function(e,s,t){t.d(s,{J:function(){return k}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react/index.js"),a=t("../../libs/rise-ui/dist/index.js"),o=t("../../libs/foundation-ui/dist/index.js"),i=t("../../../node_modules/@mui/material/Typography/Typography.js"),l=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),d=t("../../libs/solflare-shared/dist/features/taskmask/hooks/useTaskmask/index.js"),c=t("../../../node_modules/react-countdown/dist/index.es.js"),u=t("../../../node_modules/@mui/styles/makeStyles/makeStyles.js"),f=t("../../libs/solflare-shared/dist/assets/taskmask-banner-bridge.mp4"),m=t("../../libs/solflare-shared/dist/assets/taskmask-banner-active.mp4"),p=t("../../libs/solflare-shared/dist/assets/taskmask-banner-upcoming.mp4"),h=t("../../libs/solflare-shared/dist/assets/taskmask-banner-won.mp4"),b=t("../../../node_modules/@fortawesome/pro-regular-svg-icons/index.mjs"),g=t("../../libs/solflare-shared/dist/utils/extension.js");const y=(0,u.Z)((e=>({clickableCard:{"&:hover":{cursor:"pointer"}},underlay:{position:"absolute",top:0,left:0,bottom:0,background:"linear-gradient(90deg, #212126 22.08%, rgba(33, 33, 38, 0.00) 100%)",width:"615px",maxWidth:"100%",height:"100%"},hoverOverlay:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"rgba(255,255,255,0.2)"},video:{position:"absolute",top:0,right:g.Qd||g.UJ?"-100px":0,bottom:0,height:"100%",width:"1234px",objectPosition:"right center"},smallCard:{paddingLeft:"4px",paddingRight:"4px"},smallTitle:{fontSize:"16px",lineHeight:"20px"},smallSubtitle:{fontSize:"12px",lineHeight:"14px"},closeButtonContainer:{position:"absolute",top:4,right:4,borderRadius:"100%",background:"rgba(0, 0, 0, 0.4)",zIndex:1,"&:hover":{background:"rgba(0, 0, 0, 0.7)"},"&:active":{background:"rgba(0, 0, 0, 1)"}}}))),k=({onClick:e,onDismiss:s})=>{const{t:t}=(0,l.$)(),u=y(),[k,j]=(0,r.useState)(!1),{heroTask:_,bridgeStatus:x,isLoading:v,isInFinalPhase:w,timeUntilTheEnd:S,isWinner:T}=(0,d.P)(),{title:C,subtitle:E,timerStartTime:A}=((e,s,t,n,r,a)=>{if("active"===e)return{title:r("taskmask_banner_invitation_title"),subtitle:r("taskmask_banner_invitation_subtitle")};if(n)return{title:r("taskmask_banner_won_saga_title"),subtitle:r("taskmask_banner_won_saga_subtitle")};if(t)return{title:r("taskmask_banner_boost_chances_title"),subtitle:r("taskmask_banner_boost_chances_subtitle"),timerStartTime:a};switch(s?.status){case"active":return{title:r("taskmask_banner_active_title"),subtitle:r("taskmask_banner_active_subtitle")};case"locked":default:return{title:r("taskmask_banner_invitation_title"),subtitle:r("taskmask_banner_invitation_subtitle")};case"upcoming":return{title:r("taskmask_banner_upcoming_title"),subtitle:r("taskmask_banner_upcoming_subtitle"),timerStartTime:s.startTime};case"won":return{title:r("taskmask_banner_win_title"),subtitle:r("taskmask_banner_win_subtitle")}}})(x,_,w,T,t,S),I=((e,s,t,r)=>{if("active"===e)return(0,n.jsx)("source",{src:f,type:"video/mp4"});if(r)return(0,n.jsx)("source",{src:h,type:"video/mp4"});if(t)return(0,n.jsx)("source",{src:p,type:"video/mp4"});switch(s?.status){case"active":return(0,n.jsx)("source",{src:m,type:"video/mp4"});case"upcoming":return(0,n.jsx)("source",{src:p,type:"video/mp4"});case"won":return(0,n.jsx)("source",{src:h,type:"video/mp4"});default:return}})(x,_,w,T),N=g.Qd||g.UJ,P=((e,s,t)=>e&&!t?(0,n.jsx)(o.zxk,{variant:"contrast",onClick:s,children:"Claim"}):(0,n.jsx)(n.Fragment,{}))(T,e,N),O=!(T&&!N);return v||!_&&"completed"===x&&!w?N?(0,n.jsx)(a.Zb,{padding:"small",position:"relative",overflow:"hidden",children:(0,n.jsxs)(a.kC,{px:1,position:"relative",flexDirection:"column",zIndex:1,children:[(0,n.jsx)(o.OdW,{__height:"16px",__width:"25%"}),(0,n.jsx)(o.OdW,{__height:"14px",__width:"45%"})]})}):(0,n.jsx)(a.Zb,{padding:"small",position:"relative",overflow:"hidden",children:(0,n.jsxs)(a.kC,{px:1,position:"relative",flexDirection:"column",zIndex:1,children:[(0,n.jsx)(o.OdW,{__height:"24px",__width:"25%"}),(0,n.jsx)(o.OdW,{__height:"19px",__width:"45%"})]})}):(0,n.jsxs)(a.Zb,{onClick:O?e:void 0,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),padding:"small",position:"relative",overflow:"hidden",className:`${N&&u.smallCard} ${O&&u.clickableCard}`,children:[(0,n.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,className:u.video,children:I},"video"),(0,n.jsxs)(a.kC,{justifyContent:"space-between",px:1,position:"relative",zIndex:1,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(i.Z,{variant:"h2",pb:.5,className:N?u.smallTitle:void 0,children:C}),(0,n.jsx)(i.Z,{variant:"body1",color:"textSecondary",className:N?u.smallSubtitle:void 0,children:E})]}),(0,n.jsxs)(a.kC,{gap:"24px",alignItems:"center",children:[!N&&void 0!==A&&(0,n.jsx)(c.ZP,{date:A,renderer:e=>(0,n.jsx)(o.ztj,{...e})}),P,s&&N&&(0,n.jsx)(o.KsU,{icon:b.YIN,onClick:e=>{e.stopPropagation(),s()}})]})]}),s&&!N&&(0,n.jsx)("div",{className:u.closeButtonContainer,onClick:e=>{e.stopPropagation(),s()},children:(0,n.jsx)(o.KsU,{icon:b.YIN,size:"s"})}),(0,n.jsx)("div",{className:u.underlay}),k&&O&&(0,n.jsx)("div",{className:u.hoverOverlay})]})}},"../../libs/solflare-shared/dist/features/taskmask/hooks/useSignAndSendRevealCode/index.js":function(e,s,t){t.d(s,{j:function(){return c}});var n=t("../../../node_modules/react/index.js"),r=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),a=t("../../libs/solflare-shared/dist/wallet/index.js"),o=t("../../libs/solflare-shared/dist/features/taskmask/api/index.js"),i=t("../../../node_modules/bs58/index.js"),l=t.n(i),d=t("../../../node_modules/console-browserify/index.js");const c=()=>{const{wallet:e,transactionData:s,callbacks:t,signTransaction:i}=(0,a.we)();return{signAndSend:(0,n.useCallback)((async()=>{try{const n=t,a=s&&"transaction"in s?s.transaction:null;if(n.onStart(),!a)throw Error("No transaction data");const d=new r.PublicKey(e.publicKey),c=a.serializeMessage();let u;try{u=await i(c)}catch(e){t.onSign({status:"rejected"})}if(!u)return void t.onSign({status:"rejected"});t.onSign({status:"success"}),a.addSignature(d,u);try{if(s&&"data"in s){const{data:n}=await(0,o.dD)(e.publicKey,s.data.timestamp,l().encode(a.serialize()),"transaction");t.onConfirm({data:n,status:"success"})}}catch(e){t.onConfirm({status:"fail"})}}catch(e){d.error("Sign and send",e)}finally{t.onEnd()}}),[t,i,s,e.publicKey])}}},"../../libs/solflare-shared/dist/features/taskmask/hooks/useTaskmask/index.js":function(e,s,t){t.d(s,{P:function(){return A}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react/index.js"),a=t("../../../node_modules/react-redux/es/index.js"),o=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),i=t("../../libs/solflare-shared/dist/store/selectors/config.js"),l=t("../../libs/solflare-shared/dist/features/taskmask/api/index.js"),d=t("../../libs/solflare-shared/dist/hooks/useMetamask/index.js"),c=t("../../../node_modules/lodash/lodash.js"),u=t("../../libs/solflare-shared/dist/storage/solflareService.js"),f=t("../../libs/solflare-shared/dist/wallet/index.js"),m=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),p=t("../../../node_modules/base64-js/index.js"),h=t("../../libs/solflare-shared/dist/components/ConfirmationHelpers/ConfirmationMintNft.js"),b=t("../../libs/solflare-shared/dist/utils/lamportToSol.js"),g=t("../../libs/solflare-shared/dist/utils/extension.js"),y=t("../../libs/solflare-shared/dist/features/taskmask/utils/index.js"),k=t("../../libs/solflare-shared/dist/utils/featureFlags.js"),j=t("../../../node_modules/dayjs/dayjs.min.js"),_=t.n(j),x=t("../../libs/solflare-shared/dist/features/taskmask/hooks/useSignAndSendRevealCode/index.js"),v=t("../../libs/solflare-shared/dist/utils/signMessageTransaction.js"),w=t("../../libs/solflare-shared/dist/features/taskmask/components/ConfirmSignRevealCode/index.js"),S=t("../../libs/solflare-shared/dist/features/taskmask/components/ConfirmSignSavedCode/index.js"),T=t("../../libs/solflare-shared/dist/features/taskmask/hooks/useSignAndSendSavedCode/index.js");const C=async e=>({transaction:m.VersionedTransaction.deserialize(p.toByteArray(e))}),E=async({transactionInit:e,tx:s,nftImage:t,nftName:r,nftCollection:a,solAmount:o,onStart:i,onEnd:l,onConfirm:d})=>{await e({title:"Mint NFT",txBuilder:C,builderParams:s,commitment:"confirmed",confirmDialog:(0,n.jsx)(h.Z,{nftImage:t,nftName:r,nftCollection:a,solAmount:(0,b.s)(o||0).toString()}),onStart:i,onEnd:l,onConfirm:d})},A=()=>{const e=(0,a.v9)(i.Wg),{transactionInit:s}=(0,f.we)(),{isMetamask:t}=(0,d.U)(),[p,h]=(0,r.useState)(!1),[b,j]=(0,r.useState)(),[C,A]=(0,r.useState)(void 0),[I,N]=(0,r.useState)(),[P,O]=(0,r.useState)(!1),{data:{data:{tasks:R=[],bridgeTask:{status:D}={},entryTask:F,winner:U=!1}={}}={},isLoading:L,refetch:M}=(0,o.a)({queryKey:["tasks",e],queryFn:()=>(0,l.Ak)(e,t?"mm":"ext"),keepPreviousData:!0,refetchInterval:1e4}),B=(0,r.useMemo)((()=>{if(!(0,c.isEmpty)(R))return R[R.length-1].endTime}),[R]),K=R.every((e=>"completed"===e.status||"won"===e.status)),Z=!(0,c.isEmpty)(R)&&_()(R[R.length-1].endTime).isBefore(_()()),H=!(0,c.isEmpty)(R)&&(_()(R[R.length-1].countDownTime).isBefore(_()())||"completed"===R[R.length-1].status)&&!Z,$=(0,r.useCallback)((async()=>{const s=(0,c.filter)(R,{status:"won"});if(s){const t=(0,c.last)(s),n=await u.Z.taskmask.getWonTasks(e);return t&&!n.includes(t.slug)?t:void 0}}),[R,e]),G=(0,r.useCallback)((()=>{const e=(0,c.findIndex)(R,{current:!0}),s=R[e],t=R[e+1];return s&&"active"===s.status?s:t}),[R]),V=(0,r.useCallback)((async()=>{if(!b)return;await u.Z.taskmask.addWonTask(e,b.slug);const s=G();j(s)}),[G,b,e]),W=(0,r.useCallback)((async({cta:e,ctaType:t},n,r,a)=>{if("link"===t)return window.open(`${e}`);"object"==typeof e&&E({transactionInit:s,tx:e.txs[0],...e,onStart:n,onEnd:r,onConfirm:a})}),[s]),z=(0,r.useCallback)(((e,t,n,r)=>{E({transactionInit:s,tx:e.txs[0],...e,onStart:t,onConfirm:r,onEnd:n})}),[s]),q=(0,r.useCallback)((async()=>{await s({txBuilder:async()=>{const s=new m.Transaction,t=_()().valueOf(),n={publicKey:e,timestamp:t,signatureType:"transaction"};return s.add(new m.TransactionInstruction({keys:[{pubkey:new m.PublicKey(e),isSigner:!0,isWritable:!1}],programId:new m.PublicKey(v.I),data:(new TextEncoder).encode(JSON.stringify(n))})),s.recentBlockhash="4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZAMdL4VZHirAn",s.feePayer=new m.PublicKey(e),{transaction:s,data:n}},builderParams:{},commitment:"confirmed",title:"Sign message",confirmDialog:(0,n.jsx)(w.x,{}),onConfirm:({data:e,status:s})=>{e&&"success"===s&&N(e?.reward)},useSignAndSend:x.j})}),[e,s]),Y=(0,r.useCallback)((async t=>{await s({txBuilder:async()=>{const s=new m.Transaction,t=_()().valueOf(),n={publicKey:e,timestamp:t,signatureType:"transaction"};return s.add(new m.TransactionInstruction({keys:[{pubkey:new m.PublicKey(e),isSigner:!0,isWritable:!1}],programId:new m.PublicKey(v.I),data:(new TextEncoder).encode(JSON.stringify(n))})),s.recentBlockhash="4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZAMdL4VZHirAn",s.feePayer=new m.PublicKey(e),{transaction:s,data:n}},builderParams:{},commitment:"confirmed",title:"Sign message",confirmDialog:(0,n.jsx)(S.n,{}),onConfirm:({data:e,status:s})=>{e&&"success"===s&&(O(!0),M(),t())},useSignAndSend:T.x})}),[e,s,M]),J=(0,r.useMemo)((()=>{if(!R.length)return;const e=(0,c.filter)(R,(e=>"completed"===e.status||"won"===e.status)).length;return`${Math.min(Math.round(e/25*100),100)} %`}),[R]);return(0,r.useEffect)((()=>{(async()=>{const e=await $();if(e&&!g.Qd)return void j(e);const s=G();j(s)})()}),[$,G]),(0,r.useEffect)((()=>{L||A(D)}),[D,L]),(0,r.useEffect)((()=>{(async()=>{(0,c.isEmpty)(R)||Z&&!U||P||await k.Z.flagsLoaded()&&h(t||(0,y.I)())})()}),[Z,t,P,R,U]),{isWinner:U,bridgeStatus:C,heroTask:b,shouldShowBanner:p,tasks:R,isLoading:L,completedPercentage:J,entryTask:F,finishedAllTasks:K,timeUntilTheEnd:B,isInFinalPhase:H,hasEndedTaskmask:Z,sagaCode:I,savedCode:P,refetch:M,handleShowNextTask:V,handleCompleteTask:W,handleMintNft:z,handleRevealCode:q,handleConfirmSavedCode:Y}}},"../../libs/solflare-shared/dist/hooks/useDebounce.js":function(e,s,t){t.d(s,{N:function(){return r}});var n=t("../../../node_modules/react/index.js");const r=(e,s=300)=>{const[t,r]=(0,n.useState)(e);return(0,n.useEffect)((()=>{const t=setTimeout((()=>{r(e)}),s);return()=>{clearTimeout(t)}}),[e,s]),t}},"../../libs/solflare-shared/dist/hooks/useMetamask/index.js":function(e,s,t){t.d(s,{U:function(){return o}});var n=t("../../../node_modules/react/index.js"),r=t("../../libs/wallet-core/dist/solana/shared.js"),a=t("../../libs/solflare-shared/dist/wallet/index.js");const o=()=>{const{wallet:e}=(0,a.we)(),s=e.instance?.type===r.Yg,t=(0,n.useMemo)((()=>e.instance?.getDerivationPath?.()),[e.publicKey]),o=(0,n.useMemo)((()=>`https://solflare.com/loadmetamask?mmpubkey=${e.publicKey}`),[e.publicKey]);return(0,n.useMemo)((()=>({isMetamask:s,publicKey:e.publicKey,derivationPath:t,accountName:e.accountName,externalUrl:o})),[s,t,o,e.accountName,e.publicKey])}},"../../libs/solflare-shared/dist/hooks/useSolanaBalance/index.js":function(e,s,t){t.d(s,{h:function(){return d}});var n=t("../../../node_modules/react-redux/es/index.js"),r=t("../../libs/solflare-shared/dist/store/selectors/config.js"),a=t("../../libs/shared/dist/features/currencies/index.js"),o=t("../../../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),i=t("../../libs/solflare-shared/dist/features/portfolio/api/portfolio.js"),l=t("../../libs/solflare-shared/dist/constants/mints.js");const d=()=>{const{data:e,isLoading:s}=(()=>{const e=(0,n.v9)(r.Wg),s=(0,n.v9)(r.eN),t=(0,a.Af)();return(0,o.a)({queryKey:["tokens",e,s.url,t.ticker],queryFn:()=>(0,i.lz)(e,s.cluster,t.ticker),refetchInterval:6e4,enabled:!!e})})(),t=e?.tokens?.find((e=>e.mint===l.BH));return{isLoading:s,lamports:t?.accounts?.[0]?.amount||0,price:t?.price?.price||0,usdPrice:t?.price?.usdPrice||0}}},"../../libs/solflare-shared/dist/store/actions/addressBook.js":function(e,s,t){t.d(s,{Cj:function(){return g},IZ:function(){return k},KV:function(){return b},Mi:function(){return c},YW:function(){return p},bd:function(){return m},kl:function(){return h},lQ:function(){return y},qj:function(){return u}});var n=t("../../libs/solflare-shared/dist/storage/solflareService.js"),r=t("../../libs/solflare-shared/dist/store/selectors/data.js"),a=t("../../../node_modules/lodash/lodash.js"),o=t("../../../node_modules/dayjs/dayjs.min.js"),i=t.n(o),l=t("../../libs/solflare-shared/dist/store/selectors/config.js"),d=t("../../libs/solflare-shared/dist/features/shared/account/index.js");const c="LOAD_ADDRESS_BOOK",u="LOAD_RECENT_ADDRESSES",f=e=>async(s,t)=>{const n=t(),r=(0,l.eN)(n),a=await(0,d.ru)(e,r.cluster);return a?a.publicKey:null},m=()=>async e=>{const s=await n.Z.solflareaddressbook.get();for(const t of s)t.pubkey=await e(f(t.address))||t.address;e({type:c,payload:s})},p=()=>async e=>{const s=await n.Z.solflarerecentaddresses.get();for(const t of s)t.pubkey=await e(f(t.address))||t.address;e({type:u,payload:(0,a.sortBy)(s,(e=>-e.timestamp))})},h=()=>async e=>{const s=await n.Z.solflareaddressbook.get(),t=await n.Z.solflarerecentaddresses.get();for(const t of s)t.pubkey=await e(f(t.address))||t.address;for(const s of t)s.pubkey=await e(f(s.address))||s.address;e({type:c,payload:s}),e({type:u,payload:(0,a.sortBy)(t,(e=>-e.timestamp))})},b=({address:e,name:s})=>async(t,o)=>{const i=o(),l=await t(f(e))||e,d=[...(0,r.Hj)(i)],u=(0,a.findIndex)(d,(s=>s.address===e));u<0?d.push({name:s,address:e,pubkey:l}):d[u]={name:s,address:e,pubkey:l},await n.Z.solflareaddressbook.set(d.map((({name:e,address:s})=>({name:e,address:s})))),t({type:c,payload:(0,a.sortBy)(d,(e=>e.name.toLowerCase()))})},g=({address:e,name:s,index:t})=>async(o,i)=>{const l=i(),d=await o(f(e))||e,u=[...(0,r.Hj)(l)];u[t]={name:s,address:e,pubkey:d},await n.Z.solflareaddressbook.set(u.map((({name:e,address:s})=>({name:e,address:s})))),o({type:c,payload:(0,a.sortBy)(u,(e=>e.name.toLowerCase()))})},y=({index:e})=>async(s,t)=>{const o=t(),i=[...(0,r.Hj)(o)];i.splice(e,1),await n.Z.solflareaddressbook.set(i.map((({name:e,address:s})=>({name:e,address:s})))),s({type:c,payload:(0,a.sortBy)(i,(e=>e.name.toLowerCase()))})},k=({address:e})=>async(s,t)=>{const o=t(),l=await s(f(e))||e;let d=[...(0,r.Pu)(o)];const c=(0,a.findIndex)(d,(s=>s.address===e));c<0?d.push({address:e,pubkey:l,timestamp:i()().unix()}):d[c]={address:e,pubkey:l,timestamp:i()().unix()},d=(0,a.sortBy)(d,(e=>-e.timestamp)),d.length>30&&(d=d.slice(0,30)),await n.Z.solflarerecentaddresses.set(d.map((({address:e,timestamp:s})=>({address:e,timestamp:s})))),s({type:u,payload:d})}},"../../libs/solflare-shared/dist/store/actions/common.js":function(e,s,t){t.d(s,{Md:function(){return f},Wi:function(){return p},i5:function(){return m},zG:function(){return h}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../libs/solflare-shared/dist/store/actions/snackbar.js"),a=t("../../../node_modules/copy-to-clipboard/index.js"),o=t.n(a),i=t("../../../node_modules/@mui/material/IconButton/IconButton.js"),l=t("../../../node_modules/@mui/icons-material/esm/Close.js"),d=t("../../../node_modules/react-i18next/dist/es/Trans.js"),c=t("../../libs/solflare-shared/dist/store/selectors/config.js"),u=t("../../libs/solflare-shared/dist/constants/networks.js");const f=e=>async s=>{const t=o()(e);s((0,r.yv)({message:(0,n.jsx)(d.c,{i18nKey:t?"copied_to_clipboard":"error_unable_to_access_clipboard"}),options:{variant:"info",onClick:()=>{},autoHideDuration:1e3,action:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.Z,{size:"small",onClick:()=>s((0,r.sy)(e)),children:(0,n.jsx)(l.Z,{})})})}}))},m=({account:e})=>async(s,t)=>{const n=t(),r=(0,c.eN)(n).cluster,a=r===u.EE.mainnet?`https://solscan.io/token/${e}`:`https://solscan.io/token/${e}?cluster=${r}`;window.open(a,"_blank")},p=({account:e})=>async(s,t)=>{const n=t(),r=(0,c.eN)(n).cluster,a=r===u.EE.mainnet?`https://solscan.io/account/${e}`:`https://solscan.io/account/${e}?cluster=${r}`;window.open(a,"_blank")},h=({signature:e})=>async(s,t)=>{const n=t(),r=(0,c.eN)(n).cluster,a=r===u.EE.mainnet?`https://solscan.io/tx/${e}`:`https://solscan.io/tx/${e}?cluster=${r}`;window.open(a,"_blank")}},"../../libs/solflare-shared/dist/store/actions/config.js":function(e,s,t){t.d(s,{A_:function(){return k},DF:function(){return y},F7:function(){return C},Mz:function(){return I},PF:function(){return v},PG:function(){return p},TN:function(){return _},cY:function(){return x},de:function(){return E},eq:function(){return h},fY:function(){return g},kS:function(){return N},ml:function(){return T},o0:function(){return b},pt:function(){return j},tC:function(){return A},uO:function(){return w},vf:function(){return S}});var n=t("../../libs/solflare-shared/dist/store/api/config.js"),r=t("../../libs/solflare-shared/dist/storage/solflareService.js"),a=t("../../libs/shared/dist/utils/number.js"),o=t("../../libs/solflare-shared/dist/store/api/utils.js"),i=t("../../libs/shared/dist/features/currencies/index.js"),l=t("../../libs/solflare-shared/dist/store/actions/notifications.js"),d=t("../../libs/solflare-shared/dist/constants/networks.js"),c=t("../../libs/shared/dist/constants/autolock.js"),u=t("../../libs/solflare-shared/dist/utils/featureFlags.js"),f=t("../../libs/solflare-shared/dist/utils/extension.js"),m=t("../../../node_modules/console-browserify/index.js");const p="NETWORK_CHANGE",h="HIDE_BALANCES_CHANGE",b="SHOW_RAW_TRANSACTION_CHANGE",g="AUTO_LOCK_CHANGE",y="AUTO_LOCK_TIME_CHANGE",k="FETCH_BLOCKLIST_SUCCESS",j="GET_COMPRESSED_NFT_RPCS_START",_="GET_COMPRESSED_NFT_RPCS_SUCCESS",x="GET_COMPRESSED_NFT_RPCS_ERROR",v=(0,o.cT)(n.PF,j,_,x),w=e=>async(s,t)=>{t().config.network.current!==e&&(await r.Z.solflareconfig.setField("network",e),s({type:p,network:e}))},S=e=>s=>(s({type:h,payload:e}),r.Z.solflareconfig.setField("hideBalances",e)),T=e=>s=>(s({type:g,payload:e}),r.Z.solflareconfig.setField("autoLock",e)),C=e=>s=>(s({type:y,payload:e}),r.Z.solflareconfig.setField("autoLockTime",e)),E=()=>async e=>{const s=c.pT.TWENTY_FOUR_HOURS;e({type:g,payload:!0}),e({type:y,payload:s}),await r.Z.solflareconfig.setField("autoLock",!0),await r.Z.solflareconfig.setField("autoLockTime",s)},A=()=>async(e,s)=>{const t=await r.Z.solflareconfig.get();if(t?.network){let s=t.network;t.customNetworks&&(t.customNetworks[s]&&(s=t.customNetworks[s].cluster,await r.Z.solflareconfig.setField("network",s)),await r.Z.solflareconfig.removeField("customNetworks")),d.g5[s]&&e({type:p,network:s})}return e({type:h,payload:!!t?.hideBalances}),e({type:g,payload:!!t?.autoLock}),e({type:y,payload:(0,a.b)(parseFloat(t?.autoLockTime),15)}),!f.Cy&&f.p1||await u.Z.flagsLoaded(),await e((0,i.ft)(t?.currency||i.a7)),await e((0,i.fh)(t?.currencyDisplays||{})),s().config},I=()=>async e=>{e({type:"FETCH_BLOCKLIST_START"});try{const s=await n.Mz();e({type:k,payload:s})}catch(s){e({type:"FETCH_BLOCKLIST_ERROR",error:s})}},N=({language:e})=>async s=>{await Promise.all([r.Z.clearPassInStore(),r.Z.solflaredata.remove(),r.Z.solflaremmonly.remove(),r.Z.solflaremmaccounts.remove(),r.Z.solflareaddressbook.remove(),r.Z.solflareFollowModal.remove(),r.Z.solflarerecentaddresses.remove(),r.Z.solflaresigneddata.remove(),r.Z.solflarenotificationsopts.remove(),r.Z.solflarenotificationapps.remove(),r.Z.solflareEnableNotificationsModal.remove(),r.Z.solflaretrustedappsperwallet.remove(),r.Z.solflareDismissStakingBanner.remove(),r.Z.gridView.remove(),r.Z.solflarenftsorting.remove(),r.Z.solflarenftgroupsorting.remove(),r.Z.markedNfts.remove(),r.Z.swapSlippage.remove(),r.Z.burnerTutorial.remove(),r.Z.mmBridgeTutorial.remove(),r.Z.whatsNew.remove(),r.Z.userJunkPreferenceIsHidden.remove()]);try{await s((0,l.zH)({language:e}))}catch(e){m.error(e)}}},"../../libs/solflare-shared/dist/store/actions/exchange.js":function(e,s,t){t.d(s,{$r:function(){return f},Ae:function(){return o},Fe:function(){return l},Hw:function(){return b},OX:function(){return g},WL:function(){return i},av:function(){return u},dq:function(){return d},f:function(){return c},pl:function(){return p}});var n=t("../../libs/solflare-shared/dist/store/api/utils.js"),r=t("../../libs/solflare-shared/dist/store/api/exchange.js"),a=t("../../libs/solflare-shared/dist/store/actions/transaction.js");const o="GET_EXCHANGE_ACCOUNT_SUCCESS",i="GET_EXCHANGE_SOL",l="GET_EXCHANGE_TOKENS",d="GET_EXCHANGE_COINS",c="GET_WITHDRAWAL_HISTORY_START",u="GET_WITHDRAWAL_HISTORY_SUCCESS",f="GET_WITHDRAWAL_HISTORY_ERROR",m="GET_EXCHANGE_HISTORY_START",p="GET_EXCHANGE_HISTORY_SUCCESS",h="GET_EXCHANGE_HISTORY_ERROR",b="GET_FTX_CONVERT_QUOTE_SUCCESS",g=(0,n.l2)(r.OX);(0,n.l2)(r._E),(0,n.l2)(r.Zt),(0,n.l2)(r.D0,null,o),(0,n.l2)(r.K5),(0,n.l2)(r.kS,null,d),(0,n.l2)(r.lz),(0,n.l2)(r.J8),(0,n.l2)(r.ld),(0,n.l2)(r.Eg),(0,n.l2)(r.wE,null,null,null,a.Du),(0,n.l2)(r.Tn,m,p,h),(0,n.l2)(r.Ox,m,p,h),(0,n.l2)(r.zD,m,p,h),(0,n.l2)(r.CY,m,p,h),(0,n.l2)(r.GQ,m,p,h),(0,n.l2)(r.Pk),(0,n.l2)(r.Vk),(0,n.l2)(r.wK,"GET_FTX_CONVERT_QUOTE_START",b,"GET_FTX_CONVERT_QUOTE_ERROR")},"../../libs/solflare-shared/dist/store/actions/ftxReconnect.js":function(e,s,t){t.d(s,{XB:function(){return a},jq:function(){return r},qB:function(){return n}});const n="SHOW_FTX_RECONNECT",r="HIDE_FTX_RECONNECT";function a(){return{type:r}}},"../../libs/solflare-shared/dist/store/actions/notificationProtocol.js":function(e,s,t){t.d(s,{$q:function(){return l},Kt:function(){return i},ej:function(){return o},fU:function(){return u},l9:function(){return a},o7:function(){return d},w$:function(){return c}});var n=t("../../libs/solflare-shared/dist/store/api/utils.js"),r=t("../../libs/solflare-shared/dist/store/api/notificationProtocol.js");t("../../libs/solflare-shared/dist/storage/solflareService.js"),t("../../libs/solflare-shared/dist/store/selectors/config.js"),t("../../libs/wallet-core/dist/solana/shared.js"),t("../../libs/solflare-shared/dist/utils/signMessageTransaction.js"),t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),t("../../../node_modules/bs58/index.js"),t("../../../node_modules/lodash/lodash.js"),t("../../libs/solflare-shared/dist/utils/notifications.js"),t("../../../node_modules/js-sha256/src/sha256.js");const a="GET_PK_CONNECTIONS_START",o="GET_PK_CONNECTIONS_SUCCESS",i="GET_PK_CONNECTIONS_ERROR",l="SAVE_AUTH_TOKENS",d="LOAD_AUTH_TOKENS",c="REMOVE_AUTH_TOKENS_BY_KEYS",u="GET_NC_UNREAD_SUCCESS";(0,n.OJ)(r.Hs),(0,n.OJ)(r.L_),(0,n.OJ)(r.oV),(0,n.OJ)(r.c2),(0,n.OJ)(r.RY),(0,n.OJ)(r.z$),(0,n.OJ)(r.jo),(0,n.OJ)(r.NR),(0,n.OJ)(r.FE),(0,n.OJ)(r.D9,a,o,i),(0,n.OJ)(r.C4),(0,n.OJ)(r.sd),(0,n.OJ)(r.lC),(0,n.OJ)(r.QK),(0,n.OJ)(r.oO,"GET_NC_UNREAD_START",u,"GET_NC_UNREAD_ERROR")},"../../libs/solflare-shared/dist/store/actions/notifications.js":function(e,s,t){t.d(s,{Bn:function(){return v},GM:function(){return w},GU:function(){return m},Gy:function(){return d},HU:function(){return C},N9:function(){return f},Pb:function(){return S},WZ:function(){return c},_R:function(){return x},bB:function(){return h},dh:function(){return _},e9:function(){return p},nS:function(){return u},zH:function(){return T}});var n=t("../../libs/solflare-shared/dist/store/api/utils.js"),r=t("../../libs/solflare-shared/dist/storage/solflareService.js"),a=t("../../libs/solflare-shared/dist/constants/notifications.js"),o=t("../../libs/solflare-shared/dist/store/api/notifications.js"),i=t("../../../node_modules/lodash/lodash.js"),l=t("../../libs/solflare-shared/dist/store/selectors/data.js");const d="LOAD_NOTIFICATIONS_DEVICE",c="TOGGLE_NOTIFICATIONS_ENABLED",u="GET_NOTIFICATION_STATE_SUCCESS",f="PUT_NOTIFICATIONS_STATE_START",m="PUT_NOTIFICATIONS_STATE_SUCCESS",p="PUT_NOTIFICATIONS_STATE_ERROR",h="DELETE_NOTIFICATIONS_STATE_SUCCESS",b=(0,n.xJ)(o.Qo),g=(0,n.xJ)(o.hs,"PUT_NOTIFICATIONS_PART_STATE_START","PUT_NOTIFICATIONS_PART_STATE_SUCCESS","PUT_NOTIFICATIONS_PART_STATE_ERROR"),y=(0,n.xJ)(o.Ae,"GET_NOTIFICATIONS_STATE_START",u,"GET_NOTIFICATION_STATE_ERROR"),k=(0,n.xJ)(o.Li,f,m,p),j=(0,n.xJ)(o.RF,"DELETE_NOTIFICATIONS_STATE_START",h,"DELETE_NOTIFICATIONS_STATE_ERROR"),_=({language:e,enabled:s})=>async(t,n)=>{const a=n(),o=(0,l.yu)(a).pushToken,i=(0,l.yu)(a).pushProvider;s?(await t({type:c,payload:!0}),r.Z.solflarenotificationsdevice.set({pushToken:o,pushProvider:i,enabled:!0})):await t(T({language:e,keepPushToken:!0}))},x=()=>async(e,s)=>{const t=s(),n=(0,l.yu)(t);if(void 0!==n.pushToken&&void 0!==n.pushProvider)return;const a=await r.Z.solflarenotificationsdevice.get()||null;a&&(a.enabled="enabled"in a?a.enabled:a.pushToken&&a.pushProvider,await e({type:d,payload:a}))},v=({language:e})=>async s=>{const{pushToken:t,pushProvider:n}=await r.Z.solflarenotificationsdevice.get()||{};t&&n?s(y({language:e,pushToken:t,pushProvider:n})):await s({type:h})},w=e=>(s,t)=>{const n=t(),r=(0,l.yu)(n).pushToken,a=(0,l.yu)(n).subscriptions;void 0!==!r&&void 0!==a&&s(g({language:e,...(0,i.pick)((0,l.yu)(n),["pushToken","pushProvider"])}))},S=({osVersion:e,language:s,topics:t,subscriptions:n})=>(r,o)=>{const i=o(),d=(0,l.yu)(i).pushToken,c=(0,l.yu)(i).enabled;r(k({pushToken:d,osVersion:e,language:s,topics:t,subscriptions:n,enabled:c,pushProvider:a.x3}))},T=({language:e,keepPushToken:s})=>async(t,n)=>{const r=n(),o=(0,l.yu)(r).pushToken;o&&await t(j({pushToken:o,language:e,pushProvider:a.x3,keepPushToken:s}))},C=({pushToken:e,osVersion:s,language:t,accounts:n})=>async(r,o)=>{const d=o(),c=(0,l.yu)(d),u=(0,i.map)(n,"publicKey");if(c.enabled){if((0,i.isEmpty)((0,i.pick)(c,["pushToken","pushProvider"])))return await r(E({language:t,pushToken:e,osVersion:s,publicKeys:u})),!1;try{void 0===c.pushToken||c.pushToken===e&&c.pushProvider===a.x3?void 0!==c.topics&&void 0!==c.subscriptions||await r(y({language:t,pushToken:e,pushProvider:a.x3})):(await r(b({language:t,newPushToken:e,newPushProvider:a.x3,pushToken:c.pushToken,pushProvider:c.pushProvider})),r(y({language:t,pushToken:e,pushProvider:a.x3}))),await r(((e,s)=>(t,n)=>{const r=n(),a=(0,l.yu)(r).pushToken,o=(0,l.yu)(r).language;let d=(0,l.yu)(r).subscriptions;if(void 0===!a||void 0===d)return;d=(0,i.cloneDeep)(d);const c=(0,i.map)(d,"publicKey"),u=(0,i.map)(e,"publicKey"),f=(0,i.difference)(c,u),m=(0,i.difference)(u,c);d=(0,i.filter)(d,(e=>!f.includes(e.publicKey))),(0,i.forEach)(m,(e=>d.push(A(e)))),f.length||m.length?t(S({subscriptions:d,language:s,...(0,i.pick)((0,l.yu)(r),["osVersion","topics"])})):o&&o!==s&&t(g({language:s,...(0,i.pick)((0,l.yu)(r),["pushToken","pushProvider"])}))})(n,t))}catch(n){await r(E({language:t,pushToken:e,osVersion:s,publicKeys:u}))}return!0}},E=({language:e,pushToken:s,osVersion:t,publicKeys:n})=>{const r=[];for(let e=0;e<n.length;e++)r.push(A(n[e]));return k({language:e,pushToken:s,pushProvider:a.x3,osVersion:t,topics:a.E5,subscriptions:r})},A=e=>({publicKey:e,preferences:a.Tc})},"../../libs/solflare-shared/dist/store/actions/transaction.js":function(e,s,t){t.d(s,{Ck:function(){return g},Du:function(){return y},gG:function(){return h}});var n=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),a=t("../../libs/solflare-shared/dist/store/api/utils.js"),o=t("../../libs/solflare-shared/dist/store/api/transaction.js"),i=t("../../libs/solflare-shared/dist/store/actions/snackbar.js"),l=t("../../libs/solflare-shared/dist/utils/rpc-errors.js"),d=t("../../../node_modules/react-i18next/dist/es/Trans.js"),c=t("../../libs/solflare-shared/dist/store/selectors/config.js"),u=t("../../libs/wallet-core/dist/solana/shared.js"),f=t("../../../node_modules/console-browserify/index.js");const m=(0,a.fb)(o.vk),p=(0,a.fb)(o.FI),h=((0,a.fb)(o.BL),(0,a.fb)(o.gG)),b=((0,a.fb)(o.iO),async e=>{try{const s=Math.min(14e5,2e5*e.instructions.length);if(!s)return;const{body:t}=await(0,a.U2)("https://priority-fee-api.solflare.com");if(!t?.compute_unit_price)return;e.instructions.unshift(r.ComputeBudgetProgram.setComputeUnitLimit({units:s})),e.instructions.unshift(r.ComputeBudgetProgram.setComputeUnitPrice({microLamports:Math.min(t.compute_unit_price,Math.floor(1e13/s))}))}catch(e){f.log(e)}}),g=({request:e,transaction:s,signers:t=[],...n})=>async(r,a)=>{const o=a(),d=(0,c.eN)(o).cluster,f=(0,c.Rx)(o);e.skipComputeBudget||f?.instance?.type===u.pe||await b(s),s.recentBlockhash=await r(m({commitment:e.commitment}));const g=await e.sign(s,t,e.confirmData||null);if(e.onError&&!g&&e.onError("Failed to sign the transaction"),g){const s=new i.lw({dispatch:r,network:d});let t;s.nextNotification();try{t=await r(p({transaction:g,preflightCommitment:e.commitment})),s.setTransaction(t),s.nextNotification()}catch(t){const n=(0,l.t)(t);return s.errorNotification(n.message||t.message),void(e.onError&&e.onError(t))}try{const a=await r(h({tx:t,commitment:e.commitment}));s.nextNotification(),e.onConfirm&&e.onConfirm({...a,...n})}catch(t){s.errorNotification(t.toString()),e.onError&&e.onError(t)}}},y=({request:e,transaction:s,url:t,ftxSubaccountKey:r,_call:a})=>async(o,l)=>{const c=await e.sign(s,[],e.confirmData||null);if(c)try{const s=await a({url:t,ftxSubaccountKey:r},{...e,...c});return o((0,i.GV)({message:(0,n.jsx)(d.c,{i18nKey:"transaction_confirmed"})})),e.onConfirm?.({request:e,...s}),s}catch(t){o((0,i.GV)({message:t.response.data.error,variant:"error"})),e.onError?.(t.toString(),{transaction:s,request:e})}}},"../../libs/solflare-shared/dist/store/selectors/data.js":function(e,s,t){t.d(s,{Hj:function(){return a},Pu:function(){return o},Th:function(){return r},sZ:function(){return n},yu:function(){return i}});const n=e=>e.data.ftxReconnect,r=e=>e.data?.mints||{},a=e=>e.data.addressBook,o=e=>e.data.recentAddresses,i=e=>e.data.notifications},"../../libs/solflare-shared/dist/utils/borsh.js":function(e,s,t){var n=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),r=t("../../../node_modules/borsh/lib/index.js");r.BinaryReader.prototype.readPubkey=function(){const e=this.readFixedArray(32);return new n.PublicKey(e)},r.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())}},"../../libs/solflare-shared/dist/utils/common.js":function(e,s,t){t.d(s,{LD:function(){return d},T4:function(){return a},T7:function(){return l},iP:function(){return i},w9:function(){return o}});var n=t("../../../node_modules/bignumber.js/bignumber.js"),r=t.n(n);const a=e=>{const s=Number(e);return!(isNaN(s)||s<0)},o=(e,s)=>{const t=e.split(".")[1]?.length;return!t||s>=t},i=(e,s)=>{const t=new(r())(e).dp(s??99,r().ROUND_FLOOR);return t.toFixed(t.dp())},l=e=>e.replace(/,/g,""),d=(e,s)=>(e-s)/s*100},"../../libs/solflare-shared/dist/utils/extension.js":function(e,s,t){t.d(s,{Af:function(){return i},Cy:function(){return r},Qd:function(){return o},UJ:function(){return a},p1:function(){return n}});const n=!!globalThis.SOLFLARE_EXTENSION,r=!!globalThis.SOLFLARE_EXTENSION&&!!globalThis.SOLFLARE_EXPANDED,a=!!globalThis.SOLFLARE_APP_POPUP,o=!!globalThis.SOLFLARE_CONNECT_WIDGET;function i(){return window?o?7:r?2:n?3:4:1}},"../../libs/solflare-shared/dist/utils/lamportToSol.js":function(e,s,t){t.d(s,{m:function(){return i},s:function(){return o}});var n=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),r=t("../../../node_modules/bignumber.js/bignumber.js"),a=t.n(r);const o=e=>new(a())(e).dividedBy(n.LAMPORTS_PER_SOL),i=e=>new(a())(e).times(n.LAMPORTS_PER_SOL)},"../../libs/solflare-shared/dist/utils/notifications.js":function(e,s,t){t.d(s,{YE:function(){return i},Yz:function(){return o},vM:function(){return a}}),t("../../libs/solflare-shared/dist/storage/solflareService.js");var n=t("../../libs/solflare-shared/dist/utils/extension.js"),r=t("../../libs/wallet-core/dist/solana/shared.js");const a=()=>"MISSING_ENV_VAR".NP_COOLDOWN_BANNER?parseInt("MISSING_ENV_VAR".NP_COOLDOWN_BANNER,10):6048e5,o=()=>{const e=/Chrome/.test(navigator.userAgent);return n.p1?e:/Firefox/.test(navigator.userAgent)||e},i=e=>[r.R7,r.vn,r.CO,r.pe,r.x4].includes(e)},"../../libs/solflare-shared/dist/utils/popupMessaging.js":function(e,s,t){t.d(s,{f:function(){return i},w:function(){return o}});var n=t("../../libs/solflare-shared/dist/utils/extension.js"),r=t("../../../node_modules/webextension-polyfill/dist/browser-polyfill.js"),a=t.n(r);async function o(e){if(!n.p1)return;const s=await a().tabs.query({});for(const t of s)if(t.url.startsWith(e))try{await a().tabs.sendMessage(t.id,{channel:"solflarePopupToContent",data:{method:"disconnect"}})}catch(e){}}async function i(e){if(!n.p1)return;const s=await a().tabs.query({});for(const t of s)try{await a().tabs.sendMessage(t.id,{channel:"solflarePopupToContent",data:{method:"accountChanged",publicKey:e}})}catch(e){}}},"../../libs/solflare-shared/dist/utils/tokenAccounts.js":function(e,s,t){t.d(s,{d:function(){return l}});var n=t("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),r=t("../../../node_modules/@solana/spl-token/lib/esm/state/mint.js"),a=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js");const o=new Map,i={native:void 0,"spl-token":n.H_,"spl-token-2022":n.nA},l=(e,s,t="spl-token")=>{if(o.has(`${e}-${s}`))return o.get(`${e}-${s}`);const n=(0,r.MO)(new a.PublicKey(e),new a.PublicKey(s),!0,i[t])?.toString();return o.set(`${e}-${s}`,n),n}},"../../libs/solflare-shared/dist/utils/units.js":function(e,s,t){t.d(s,{d:function(){return a},z:function(){return o}});var n=t("../../../node_modules/bignumber.js/bignumber.js"),r=t.n(n);const a=(e,s)=>{const t=new(r())(10).pow(s);return new(r())(e.toString()).div(t).toFixed()},o=(e,s)=>{const t=new(r())(10).pow(s);return new(r())(e).times(t).toFixed(0,r().ROUND_FLOOR)}},"../../libs/solflare-shared/dist/wallet/hooks/index.js":function(e,s,t){t.d(s,{Ht:function(){return n.H},go:function(){return m},HG:function(){return h}});var n=t("../../libs/solflare-shared/dist/wallet/hooks/useSignAndSend/index.js"),r=t("../../../node_modules/react/index.js"),a=t("../../../node_modules/react-redux/es/index.js"),o=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),i=t("../../libs/wallet-core/dist/solana/shared.js"),l=t("../../libs/solflare-shared/dist/store/actions/snackbar.js"),d=t("../../libs/solflare-shared/dist/wallet/context/utils.js"),c=t("../../libs/solflare-shared/dist/wallet/context/index.js"),u=t("../../libs/solflare-shared/dist/contexts/solana/index.js"),f=t("../../../node_modules/console-browserify/index.js");const m=()=>{const e=(0,a.I0)(),{connection:s}=(0,u.j5)(),{wallet:t,transactionData:n,callbacks:m,signAndSendProps:p,signAllTransactions:h,sendAllTransactions:b}=(0,c.w)();return{signAndSend:(0,r.useCallback)((async()=>{const r=n&&"transactions"in n?n.transactions:null;if(!r)return;m.onStart();const{commitment:a,skipComputeBudget:c}=p;try{const n=new o.PublicKey(t.publicKey),l=await e((0,d.vk)({commitment:a})),u=[];for(const e of r){const{transaction:n}=e;c||t?.instance?.type===i.pe||await(0,d.K1)(s,n),n instanceof o.Transaction&&(n.recentBlockhash=l),u.push(n)}u.forEach((e=>{e instanceof o.Transaction&&(e.feePayer||(e.feePayer=n))}));const f=u.map((e=>e instanceof o.Transaction?e.serializeMessage():e.message.serialize()));let p;try{p=await h(f)}catch(e){return void m.onSign({status:"rejected"})}if(!p)return void m.onSign({status:"rejected"});m.onSign({status:"success"});const g=[...u];if(g.forEach(((e,s)=>{e.addSignature(n,p?.[s])})),g?.length!==u?.length)throw new Error("Failed to sign the transactions");await b({signedTransactions:g,commitment:a})}catch(s){f.error(s),e((0,l.yv)({message:s.toString(),variant:"warning",autoHideDuration:5e3}))}finally{m.onEnd()}}),[m,s,e,b,h,p,n,t?.instance?.type,t.publicKey])}};t("../../libs/solflare-shared/dist/wallet/hooks/useSignAndSendAllSerial/index.js");var p=t("../../../node_modules/console-browserify/index.js");const h=()=>{const e=(0,a.I0)(),{connection:s}=(0,u.j5)(),{wallet:t,transactionData:n,callbacks:f,signAndSendProps:m,signAllTransactions:h,sendBundleTransactions:b,sendTransaction:g}=(0,c.w)();return{signAndSend:(0,r.useCallback)((async()=>{const r=n&&"transactions"in n?n.transactions:null;if(!r)throw Error("No transactions data");let a=[];f.onStart();const{commitment:c,skipComputeBudget:u}=m;try{const n=new o.PublicKey(t.publicKey),l=await e((0,d.vk)({commitment:c})),m=[];for(const e of r){const{transaction:r}=e;u||t?.instance?.type===i.pe||await(0,d.K1)(s,r),r instanceof o.Transaction&&(r.recentBlockhash=l),m.push(r),m.forEach((e=>{e instanceof o.Transaction&&(e.feePayer||(e.feePayer=n))}));const c=m.map((e=>e instanceof o.Transaction?e.serializeMessage():e.message.serialize()));let p;try{p=await h(c)}catch(e){return void f.onSign({status:"rejected"})}if(!p)return void f.onSign({status:"rejected"});if(f.onSign({status:"success"}),a=[...m],a.forEach(((e,s)=>{e.addSignature(n,p?.[s])})),a?.length!==m?.length)throw new Error("Failed to sign the transactions")}1===a.length?await g({commitment:c,transaction:a[0]}):await b({commitment:c,transactions:a})}catch(s){p.error(s),e((0,l.yv)({message:s.toString(),variant:"warning",autoHideDuration:5e3}))}finally{f.onEnd()}}),[f,s,e,b,g,h,m,n,t?.instance?.type,t.publicKey])}}},"../../libs/wallet-core/dist/solana/mnemonic.js":function(e,s,t){t.d(s,{Bn:function(){return g},Db:function(){return m},OI:function(){return h},_I:function(){return b},c3:function(){return p}});var n=t("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),r=t("../../../node_modules/tweetnacl/nacl-fast.js"),a=t.n(r),o=t("../../../node_modules/bs58/index.js"),i=t.n(o),l=t("../../../node_modules/bip32/src/index.js"),d=t("../../../node_modules/bip39/src/index.js"),c=t("../../../node_modules/ed25519-hd-key/dist/index.js"),u=t("../../libs/wallet-core/dist/solana/shared.js"),f=t("../../../node_modules/buffer/index.js").Buffer;async function m(){const e=d.OF(128),s=await d.OI(e);return{mnemonic:e,seed:f.from(s).toString("hex")}}function p(e,s,t,r=0){const o=function(e,s,t,n){switch(t){case u.PT.deprecated:{const t=`m/501'/${s}'/0/${n}`;return l.WC(e).derivePath(t).privateKey}case u.PT.bip44Root:{const s="m/44'/501'";return(0,c.derivePath)(s,e).key}case u.PT.bip44:{const t=`m/44'/501'/${s}'`;return(0,c.derivePath)(t,e).key}case u.PT.bip44Change:{const t=`m/44'/501'/${s}'/0'`;return(0,c.derivePath)(t,e).key}default:throw new Error(`invalid derivation path: ${t}`)}}(f.from(e,"hex"),s,t,r);return n.Keypair.fromSecretKey(a().sign.keyPair.fromSeed(o).secretKey)}async function h(e){if(!d._I(e))throw new Error("Invalid mnemonic");const s=await d.OI(e);return f.from(s).toString("hex")}function b(e){return d._I(e)}class g extends u.SE{constructor(){super(...arguments),this.type=u.R7,this.encryptedData=null,this.base=null,this.seed=null,this.accountIndex=0,this.publicKey=null,this.locked=!1,this._account=null,this.initUnlocked=({base:e,seed:s,derivationPath:t},n=null,r=0)=>{this.locked=!1,this.base=e,this.derivationPath=t,this.seed=s,this.accountIndex=r,this.publicKey=n||this.account.publicKey.toString()},this.initLocked=(e,s,t=0)=>{this.locked=!0,this.encryptedData=e,this.publicKey=s,this.accountIndex=t},this.signTransaction=e=>a().sign.detached(e,this.account?.secretKey),this.signMessage=this.signTransaction,this.signAllTransactions=e=>e.map(this.signTransaction),this.toObject=()=>{const{base:e,seed:s,derivationPath:t,encryptedData:n,locked:r,publicKey:a,accountIndex:o}=this;return{type:u.R7,locked:r,data:r?n:{base:e,seed:s,derivationPath:t},publicKey:a,accountIndex:o}},this.toJSON=()=>JSON.stringify(this.toObject()),this.unlock=async e=>{if(this.locked){const{mnemonic:s,seed:t,derivationPath:n}=await async function(e,s){const{mnemonic:t,seed:n,derivationPath:r}=await(0,u.bI)(e,s);return{mnemonic:t,seed:n,derivationPath:r}}(this.encryptedData,e),r=new g;return r.initUnlocked({base:s,seed:t,derivationPath:n},this.publicKey,this.accountIndex),r}return this}}get account(){if(this.locked)throw new Error("Wallet is locked");return this._account||(this._account=p(this.seed,this.accountIndex,this.derivationPath,0)),this._account}get mnemonic(){return this.base?(new TextDecoder).decode(i().decode(this.base)):null}static fromObject(e){const s=new g;return e.locked?s.initLocked(e.data,e.publicKey,e.accountIndex):s.initUnlocked(e.data,e.publicKey,e.accountIndex),s}}},"../../libs/solflare-shared/dist/assets/nft-default-img.svg":function(e,s,t){e.exports=t.p+"assets/nft-default-img.10b4e2b2..svg"},"../../libs/solflare-shared/dist/assets/solana-logo-white.svg":function(e,s,t){e.exports=t.p+"assets/solana-logo-white.743ffb87..svg"},"../../libs/solflare-shared/dist/assets/solana.png":function(e,s,t){e.exports=t.p+"assets/solana.356c6cf4..png"},"../../libs/solflare-shared/dist/assets/taskmask-banner-active.mp4":function(e,s,t){e.exports=t.p+"assets/taskmask-banner-active.ef0526c2..mp4"},"../../libs/solflare-shared/dist/assets/taskmask-banner-bridge.mp4":function(e,s,t){e.exports=t.p+"assets/taskmask-banner-bridge.b31ade61..mp4"},"../../libs/solflare-shared/dist/assets/taskmask-banner-upcoming.mp4":function(e,s,t){e.exports=t.p+"assets/taskmask-banner-upcoming.470ca459..mp4"},"../../libs/solflare-shared/dist/assets/taskmask-banner-won.mp4":function(e,s,t){e.exports=t.p+"assets/taskmask-banner-won.2235bc33..mp4"}}]);