"use strict";(self.webpackChunk_rise_wallet_solflare_extension=self.webpackChunk_rise_wallet_solflare_extension||[]).push([["PortfolioPage"],{"./src/pages/Portfolio/index.tsx":function(e,n,t){t.r(n),t.d(n,{default:function(){return oe}});var o=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../../node_modules/react/index.js"),s=t("../../libs/solflare-shared/dist/features/portfolio/index.js"),i=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),a=t("../../../node_modules/react-redux/es/index.js"),l=t("../../libs/solflare-shared/dist/store/selectors/config.js"),c=t("../../libs/foundation-ui/dist/index.js"),d=t("../../libs/shared/dist/features/currencies/index.js"),u=t("../../../node_modules/crypto-browserify/index.js"),f=t("../../../node_modules/buffer/index.js").Buffer;function p(e){const n=`?apiKey=pk_live_eVl5696SEf2QM8FCvCCXQI63k4OxJJf&currencyCode=sol&colorCode=${encodeURIComponent("#FF842D")}&walletAddress=${e}`,t=(0,u.createHmac)("sha256",f.from("sk_live_uujqqbJQPUtNtfxTCvzPPsz6FUErJEI9"));t.update(n);const o=t.digest();return`https://buy.moonpay.com${n}&signature=${encodeURIComponent(f.from(o).toString("base64"))}`}var b=t("../../../node_modules/webextension-polyfill/dist/browser-polyfill.js"),m=t.n(b),x=t("../../libs/solflare-shared/dist/components/withWallet/index.js"),y=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),j=t("../../libs/solflare-shared/dist/constants/mints.js"),h=t("../../libs/solflare-shared/dist/utils/truncateMiddle.js"),v=t("../../../node_modules/@fortawesome/pro-regular-svg-icons/index.mjs"),k=t("../../libs/solflare-shared/dist/store/actions/common.js");const g=({isSolana:e,isWrappedSolana:n,isSingleAccount:t,isEmptyAccount:r,onCloseAccount:s,onUnwrap:l,onReceive:d,defaultPubkey:u})=>{const f=(0,a.I0)(),{t:p}=(0,i.$)(),b=(0,o.jsx)(c.Xiv,{onClick:()=>f((0,k.Wi)({account:u})),children:p("action_view_in_explorer")}),m=(0,o.jsx)(c.Xiv,{onClick:d,children:p("action_receive")});return e?(0,o.jsxs)(o.Fragment,{children:[m,b]}):t&&r?(0,o.jsxs)(o.Fragment,{children:[m,(0,o.jsx)(c.Xiv,{onClick:s,children:p("action_close_account")}),b]}):n&&!r?(0,o.jsxs)(o.Fragment,{children:[m,(0,o.jsx)(c.Xiv,{onClick:l,children:p("action_unwrap_sol")}),b]}):(0,o.jsxs)(o.Fragment,{children:[m,b]})};var w=t("../../libs/rise-ui/dist/index.js"),_=t("../../../node_modules/@fortawesome/fontawesome-svg-core/index.mjs"),C=t("../../../node_modules/prop-types/index.js"),A=t.n(C),O=t("../../../node_modules/console-browserify/index.js");function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){P(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function P(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function z(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},s=Object.keys(e);for(o=0;o<s.length;o++)t=s[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)t=s[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function U(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return M(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function R(e){return n=e,(n-=0)==n?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,n){return n?n.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var n}var D=["style"];function $(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,n){var t,o=n.indexOf(":"),r=R(n.slice(0,o)),s=n.slice(o+1).trim();return r.startsWith("webkit")?e[(t=r,t.charAt(0).toUpperCase()+t.slice(1))]=s:e[r]=s,e}),{})}var E=!1;try{E=!0}catch(e){}function F(e){return e&&"object"===T(e)&&e.prefix&&e.iconName&&e.icon?e:_.Qc.icon?_.Qc.icon(e):null===e?null:e&&"object"===T(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:"fas",iconName:e}:void 0}function B(e,n){return Array.isArray(n)&&n.length>0||!Array.isArray(n)&&n?P({},e,n):{}}var H=["forwardedRef"];function J(e){var n=e.forwardedRef,t=z(e,H),o=t.icon,r=t.mask,s=t.symbol,i=t.className,a=t.title,l=t.titleId,c=t.maskId,d=F(o),u=B("classes",[].concat(U(function(e){var n,t=e.beat,o=e.fade,r=e.beatFade,s=e.bounce,i=e.shake,a=e.flash,l=e.spin,c=e.spinPulse,d=e.spinReverse,u=e.pulse,f=e.fixedWidth,p=e.inverse,b=e.border,m=e.listItem,x=e.flip,y=e.size,j=e.rotation,h=e.pull,v=(P(n={"fa-beat":t,"fa-fade":o,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":i,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":d,"fa-spin-pulse":c,"fa-pulse":u,"fa-fw":f,"fa-inverse":p,"fa-border":b,"fa-li":m,"fa-flip":!0===x,"fa-flip-horizontal":"horizontal"===x||"both"===x,"fa-flip-vertical":"vertical"===x||"both"===x},"fa-".concat(y),null!=y),P(n,"fa-rotate-".concat(j),null!=j&&0!==j),P(n,"fa-pull-".concat(h),null!=h),P(n,"fa-swap-opacity",e.swapOpacity),n);return Object.keys(v).map((function(e){return v[e]?e:null})).filter((function(e){return e}))}(t)),U(i.split(" ")))),f=B("transform","string"==typeof t.transform?_.Qc.transform(t.transform):t.transform),p=B("mask",F(r)),b=(0,_.qv)(d,I(I(I(I({},u),f),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!b)return function(){var e;!E&&O&&"function"==typeof O.error&&(e=O).error.apply(e,arguments)}("Could not find icon",d),null;var m=b.abstract,x={ref:n};return Object.keys(t).forEach((function(e){J.defaultProps.hasOwnProperty(e)||(x[e]=t[e])})),N(m[0],x)}J.displayName="FontAwesomeIcon",J.propTypes={beat:A().bool,border:A().bool,beatFade:A().bool,bounce:A().bool,className:A().string,fade:A().bool,flash:A().bool,mask:A().oneOfType([A().object,A().array,A().string]),maskId:A().string,fixedWidth:A().bool,inverse:A().bool,flip:A().oneOf([!0,!1,"horizontal","vertical","both"]),icon:A().oneOfType([A().object,A().array,A().string]),listItem:A().bool,pull:A().oneOf(["right","left"]),pulse:A().bool,rotation:A().oneOf([0,90,180,270]),shake:A().bool,size:A().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:A().bool,spinPulse:A().bool,spinReverse:A().bool,symbol:A().oneOfType([A().bool,A().string]),title:A().string,titleId:A().string,transform:A().oneOfType([A().string,A().object]),swapOpacity:A().bool},J.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var N=function e(n,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof t)return t;var r=(t.children||[]).map((function(t){return e(n,t)})),s=Object.keys(t.attributes||{}).reduce((function(e,n){var o=t.attributes[n];switch(n){case"class":e.attrs.className=o,delete t.attributes.class;break;case"style":e.attrs.style=$(o);break;default:0===n.indexOf("aria-")||0===n.indexOf("data-")?e.attrs[n.toLowerCase()]=o:e.attrs[R(n)]=o}return e}),{attrs:{}}),i=o.style,a=void 0===i?{}:i,l=z(o,D);return s.attrs.style=I(I({},s.attrs.style),a),n.apply(void 0,[t.tag,I(I({},s.attrs),l)].concat(U(r)))}.bind(null,r.createElement),Q=t("../../libs/shared/dist/utils/displayPrice.js"),K=t("../../libs/shared/dist/features/currencies/utils/index.js"),W=t("../../libs/solflare-shared/dist/features/stakingModal/extension/StakingBanner.js"),X=t("../../libs/solflare-shared/dist/utils/extension.js"),L=t("../../libs/solflare-shared/dist/features/lidoRestake/index.js"),q=t("../../../node_modules/react-router/esm/react-router.js"),Z=({token:e,onSendSol:n,onSendSpl:t,onReceiveSol:u,onReceiveSpl:f,onUnwrap:p,onCloseAccount:b,onBurnAccount:m,onClose:x,onBuy:_,moonpay:C})=>{const{t:A}=(0,i.$)(),O=(0,q.k6)(),S=(0,a.I0)(),I=(0,a.v9)(l.Wg),T=(0,a.v9)(l.g0),P=(0,d.Af)(),z=(0,K.MK)(P.ticker,P.symbol),[U,M]=(0,r.useState)(!1),R=(0,r.useMemo)((()=>(0,s.As)(e,I,P,"fiat")),[P,e,I]),D=e.mint===j.BH,$=e.mint===j.Jb,E=e.mint===j.DH,F=1===e.accounts?.length,B=!parseFloat(e.amount||"0"),H="mainnet"===T.current,N=e.actions?.find((e=>"send"===e.name)),Z=e.accounts.map((n=>({tokenId:n.pubkey,amount:(0,Q.ED)({amount:n?.amount,displayType:"amount",pricePerCoin:e.price?.usdPrice||0}),name:(0,h.r)(n.pubkey),price:n.isAta?"ATA":"Legacy",value:(0,Q.ED)({amount:n?.value,displayType:"value",prefix:z})})))?.sort(((e,n)=>"ATA"===e.price&&"ATA"!==n.price?-1:"ATA"!==e.price&&"ATA"===n.price?1:0)),Y=e.accounts.find((e=>e.isAta))||e.accounts[0],G=D?(0,o.jsx)(W.G,{alwaysShow:!0}):E?(0,o.jsx)(c.$LY,{title:A("lido_widget_title_restake"),subtitle:A("lido_widget_subtitle_restake"),right:(0,o.jsx)(c.zxk,{size:"s",onClick:()=>M(!0),children:A("action_restake")})}):void 0;return(0,o.jsxs)(c.m04,{children:[(0,o.jsx)(c.V1P,{left:(0,o.jsx)(c.KsU,{onClick:x,icon:y.acZ,size:"l"}),center:e.name?e.name:(0,h.r)(e.mint),right:(0,o.jsx)(c.h_2,{trigger:F&&(0,o.jsx)(c.KsU,{icon:v.Uwo,size:"l"}),children:(0,o.jsx)(g,{isSolana:D,isWrappedSolana:$,isSingleAccount:F,isEmptyAccount:B,onUnwrap:()=>p(e,null,x),onCloseAccount:()=>b(e),onBurnAccount:()=>m(e),onReceive:()=>D?u():f(e),defaultPubkey:Y?.pubkey??""})})}),(0,o.jsxs)(c.JHu,{overflow:!0,children:[!1===R.verified&&(0,o.jsx)(c.bZj,{title:"Unverified token",variant:"warning",message:"This asset may not represent the token it claims to be."}),E&&(0,o.jsx)(c.bZj,{title:A("lido_alert_title"),variant:"warning",message:A("lido_alert_subtitle")}),E&&(0,o.jsx)(L.HO,{}),(0,o.jsx)(c.vg6,{price:`${R.rawAmount}${e?.symbol?` ${e.symbol}`:" tokens"}`,variant:void 0,subtext:{children:R.value},avatar:(0,o.jsx)(w.sg,{size:"large",src:R?.logoURI||"",resizeOptions:{width:80,quality:75},sx:{backgroundColor:"rgba(255, 255, 255, 0.06)"},children:(0,o.jsx)(J,{icon:y.Psp})}),actions:(0,o.jsxs)(c.hE2,{children:[H&&D&&(0,o.jsx)(c.zxk,{variant:B?"primary":"secondary",onClick:X.Qd?()=>window.open(C,"_blank"):_,children:A("action_buy")}),e.swappable&&(0,o.jsx)(c.zxk,{variant:"secondary",onClick:()=>{let n="",t="";D||$?B?(n=j.Xz,t=j.Jb):(n=j.Jb,t=j.Xz):B?(n=j.Jb,t=e.mint):(n=e.mint,t=j.Jb),O.push(`/swap?from=${n}&to=${t}`)},children:A("action_swap")}),N&&(0,o.jsx)(c.zxk,{variant:"secondary",onClick:()=>D?n():t(e),children:A("action_send")})]}),banner:G}),!F&&(0,o.jsx)(c.ZBx,{data:Z,renderItem:e=>(0,o.jsx)(c.oGx,{onClick:()=>S((0,k.Md)(e.tokenId)),avatarSrc:e.logoURI,title:e.name??e.tokenId,amount:e.amount,value:e.value,price:e.price,verified:e.verified,tag:e.priceDiff&&(0,o.jsx)(c.uSq,{variant:e.priceDiff.positive?"positive":"negative",size:"xs",children:e.priceDiff.value})})})]}),U&&(0,o.jsx)(L.Uy,{token:e,onClose:()=>M(!1)})]})},Y=t("../../libs/solflare-shared/dist/features/currencies/index.js"),G=t("../../libs/solflare-shared/dist/components/Receive/Receive.js"),V=t("../../libs/solflare-shared/dist/features/portfolio/components/SendModal/index.js"),ee=t("../../libs/solflare-shared/dist/features/recipientInput/index.js"),ne=t("../../libs/solflare-shared/dist/hooks/useMetamask/index.js"),te=(0,x.a)()((({wallet:e})=>{const{t:n}=(0,i.$)(),t=(0,a.I0)(),u=(0,a.v9)(l.d2),f=(0,a.v9)(l.Wg),b=(0,a.v9)(l.g0),{externalUrl:x}=(0,ne.U)(),h=`${x}&path=/bridge`,v=(0,d.Af)(),g=(0,d.__)("portfolioHero"),{singleTokenModal:w,singleTokenId:_,openSingleTokenModal:C,closeSingleTokenModal:A,receiveModal:O,receiveModalData:S,closeReceiveModal:I,createTokenModal:T,openCreateTokenModal:P,closeCreateTokenModal:z,providedAccount:U,transferModal:M,openTransferModal:R,closeTransferModal:D,splTransferModal:$,splTransferToken:E,closeSplTransferModal:F}=(0,s.hk)(),{data:B,isLoading:H,actions:J}=(0,s.h1)(),N=(0,r.useMemo)((()=>w&&B&&B?.tokens?.find((e=>e.mint===_))||null),[B,w,_]),Q=(0,r.useCallback)((()=>{m().tabs.create({url:p(e.getPublicKey())})}),[e]),{handleReceiveSolanaClick:K,handleReceiveTokenClick:W,handleTransferTokenClick:L,handleCreateTokenAccount:q,handleUnwrapTokenAccount:te,handleCloseTokenAccount:oe,handleBurnTokenAccount:re}=(0,s.nD)(e,J,!0),se=(0,r.useMemo)((()=>(0,s.uv)(B,f,v,g)),[B,f,v,g]),ie=0===B?.solValue.total,ae="mainnet"===b.current;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.vg6,{price:(0,o.jsx)(Y.DX,{configKey:"portfolioHero",children:se?.heroUi?.total}),isLoading:H,variant:se?.heroUi?.variant,subtext:{children:(0,o.jsx)(Y.DX,{configKey:"portfolioHero",children:se?.heroUi?.change})},tag:{children:(0,o.jsx)(Y.DX,{configKey:"portfolioHero",children:se?.heroUi?.percentage})},hideBalance:u,actions:(0,o.jsxs)(c.hE2,{children:[X.Qd&&(0,o.jsx)(c.zxk,{variant:ie?"primary":"secondary",disabled:H,onClick:()=>window.open(h,"_blank"),children:n("action_bridge")}),ae&&!X.Qd&&(0,o.jsx)(c.zxk,{variant:ie?"primary":"secondary",disabled:H,onClick:Q,children:n("action_buy")}),(0,o.jsx)(c.zxk,{variant:"secondary",disabled:H,onClick:K,children:n("action_receive")}),(0,o.jsx)(c.zxk,{variant:"secondary",disabled:H,onClick:R,children:n("action_send")})]}),banner:(0,o.jsx)(s.tq,{isLoading:H,onClick:C})}),(0,o.jsx)(c.ZBx,{isLoading:H,data:se?.tokens||[],renderItem:e=>(0,o.jsx)(c.oGx,{onClick:()=>C(e.tokenId),avatarSrc:e.logoURI,title:e.name??e.tokenId,amount:e.amount,value:e.value,price:e.price,verified:e.verified,ending:e.ending,tag:e.priceDiff&&""!==e.priceDiff?.value&&(0,o.jsx)(c.uSq,{variant:e.priceDiff.positive?"positive":"negative",size:"xs",children:e.priceDiff.value}),hideBalance:u,titleTag:e.tokenId===j.DH&&(0,o.jsx)(c.Njx,{variant:"warning",children:n("status_ending")})}),children:!ie&&!X.Qd&&(0,o.jsx)(c.zxk,{variant:"tertiary",size:"s",left:(0,o.jsx)(c.JO$,{icon:y.r8p,color:"primary"}),onClick:P,children:n("action_add_asset")})}),(M||$)&&(0,o.jsx)(ee.jH,{children:(0,o.jsx)(V.Z,{wallet:e,onClose:()=>{D(),F()},pubkey:E?.token?.accounts?.[E?.tokenAccountIndex||0]?.pubkey,providedAccount:U})}),O&&(0,o.jsx)(G.Y,{address:S?.address||"",title:n("action_receive"),label:"Your address",onClose:()=>I(),onCopyAddress:()=>t((0,k.Md)(S?.address||""))}),w&&!!N&&(0,o.jsx)(Z,{token:N,onSendSol:R,onSendSpl:L,onReceiveSol:K,onReceiveSpl:W,onUnwrap:te,onCloseAccount:oe,onBurnAccount:re,onClose:A,onBuy:Q,moonpay:p(e.getPublicKey())}),T&&(0,o.jsx)(s.a$,{submit:q,onClose:z,portfolioList:se?.tokens})]})})),oe=()=>(0,o.jsx)(s.N2,{children:(0,o.jsx)(c.JHu,{children:(0,o.jsx)(te,{})})})},"../../libs/solflare-shared/dist/components/Receive/Receive.js":function(e,n,t){t.d(n,{Y:function(){return a}});var o=t("../../../node_modules/react/jsx-runtime.js"),r=t("../../libs/foundation-ui/dist/index.js"),s=t("../../../node_modules/@fortawesome/pro-light-svg-icons/index.mjs"),i=t("../../libs/solflare-shared/dist/components/QRGenerator/index.js");const a=({address:e,onClose:n,title:t,onCopyAddress:a,label:l})=>(0,o.jsxs)(r.m04,{children:[(0,o.jsx)(r.V1P,{left:(0,o.jsx)(r.KsU,{icon:s.acZ,size:"l",onClick:n}),center:t}),(0,o.jsx)(r.JHu,{children:(0,o.jsx)(r.kCb,{gap:"l",flexDirection:"column",alignItems:"center",children:(0,o.jsx)(r.QYw,{address:e,label:l,qrCode:(0,o.jsx)(i.Z,{text:e})})})}),(0,o.jsx)(r.p4T,{children:(0,o.jsx)(r.zxk,{onClick:a,children:"Copy address"})})]})}}]);