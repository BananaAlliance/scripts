"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getWithdrawalMessages = void 0;
const contracts_ts_1 = require("@eth-optimism/contracts-ts");
const viem_1 = require("viem");
const actions_1 = require("viem/actions");
async function getWithdrawalMessages(client, { hash, txReceipt }) {
    const receipt = txReceipt ?? await (0, actions_1.getTransactionReceipt)(client, { hash });
    const messages = [];
    for (const log of receipt.logs) {
        try {
            const event = (0, viem_1.decodeEventLog)({
                abi: contracts_ts_1.l2ToL1MessagePasserABI,
                data: log.data,
                topics: log.topics,
            });
            if (event.eventName === 'MessagePassed') {
                messages.push(event.args);
            }
        }
        catch { }
    }
    return { messages, blockNumber: receipt.blockNumber };
}
exports.getWithdrawalMessages = getWithdrawalMessages;
//# sourceMappingURL=getWithdrawalMessages.js.map