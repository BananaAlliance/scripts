/*! For license information please see vendors-node_modules_solana_spl-token_lib_esm_index_js.js.LICENSE.txt */
"use strict";(self.webpackChunk_rise_wallet_solflare_extension=self.webpackChunk_rise_wallet_solflare_extension||[]).push([["vendors-node_modules_solana_spl-token_lib_esm_index_js"],{"../../../node_modules/@solana/buffer-layout/lib/Layout.js":function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.s16=e.s8=e.nu64be=e.u48be=e.u40be=e.u32be=e.u24be=e.u16be=e.nu64=e.u48=e.u40=e.u32=e.u24=e.u16=e.u8=e.offset=e.greedy=e.Constant=e.UTF8=e.CString=e.Blob=e.Boolean=e.BitField=e.BitStructure=e.VariantLayout=e.Union=e.UnionLayoutDiscriminator=e.UnionDiscriminator=e.Structure=e.Sequence=e.DoubleBE=e.Double=e.FloatBE=e.Float=e.NearInt64BE=e.NearInt64=e.NearUInt64BE=e.NearUInt64=e.IntBE=e.Int=e.UIntBE=e.UInt=e.OffsetLayout=e.GreedyCount=e.ExternalLayout=e.bindConstructorLayout=e.nameWithProperty=e.Layout=e.uint8ArrayToBuffer=e.checkUint8Array=void 0,e.constant=e.utf8=e.cstr=e.blob=e.unionLayoutDiscriminator=e.union=e.seq=e.bits=e.struct=e.f64be=e.f64=e.f32be=e.f32=e.ns64be=e.s48be=e.s40be=e.s32be=e.s24be=e.s16be=e.ns64=e.s48=e.s40=e.s32=e.s24=void 0;const r=n("../../../node_modules/buffer/index.js");function i(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function o(t){return i(t),r.Buffer.from(t.buffer,t.byteOffset,t.length)}e.checkUint8Array=i,e.uint8ArrayToBuffer=o;class s{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function a(t,e){return e.property?t+"["+e.property+"]":t}e.Layout=s,e.nameWithProperty=a,e.bindConstructorLayout=function(t,e){if("function"!=typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof s))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(t,"decode",{value:(t,n)=>e.decode(t,n),writable:!0})};class c extends s{isCount(){throw new Error("ExternalLayout is abstract")}}e.ExternalLayout=c;class u extends c{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){i(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}e.GreedyCount=u;class d extends c{constructor(t,e=0,n){if(!(t instanceof s))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof l||this.layout instanceof h}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}e.OffsetLayout=d;class l extends s{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return o(t).readUIntLE(e,this.span)}encode(t,e,n=0){return o(e).writeUIntLE(t,n,this.span),this.span}}e.UInt=l;class h extends s{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return o(t).readUIntBE(e,this.span)}encode(t,e,n=0){return o(e).writeUIntBE(t,n,this.span),this.span}}e.UIntBE=h;class f extends s{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return o(t).readIntLE(e,this.span)}encode(t,e,n=0){return o(e).writeIntLE(t,n,this.span),this.span}}e.Int=f;class p extends s{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return o(t).readIntBE(e,this.span)}encode(t,e,n=0){return o(e).writeIntBE(t,n,this.span),this.span}}e.IntBE=p;const m=Math.pow(2,32);function y(t){const e=Math.floor(t/m);return{hi32:e,lo32:t-e*m}}function g(t,e){return t*m+e}class b extends s{constructor(t){super(8,t)}decode(t,e=0){const n=o(t),r=n.readUInt32LE(e);return g(n.readUInt32LE(e+4),r)}encode(t,e,n=0){const r=y(t),i=o(e);return i.writeUInt32LE(r.lo32,n),i.writeUInt32LE(r.hi32,n+4),8}}e.NearUInt64=b;class k extends s{constructor(t){super(8,t)}decode(t,e=0){const n=o(t);return g(n.readUInt32BE(e),n.readUInt32BE(e+4))}encode(t,e,n=0){const r=y(t),i=o(e);return i.writeUInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}e.NearUInt64BE=k;class w extends s{constructor(t){super(8,t)}decode(t,e=0){const n=o(t),r=n.readUInt32LE(e);return g(n.readInt32LE(e+4),r)}encode(t,e,n=0){const r=y(t),i=o(e);return i.writeUInt32LE(r.lo32,n),i.writeInt32LE(r.hi32,n+4),8}}e.NearInt64=w;class I extends s{constructor(t){super(8,t)}decode(t,e=0){const n=o(t);return g(n.readInt32BE(e),n.readUInt32BE(e+4))}encode(t,e,n=0){const r=y(t),i=o(e);return i.writeInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}e.NearInt64BE=I;class A extends s{constructor(t){super(4,t)}decode(t,e=0){return o(t).readFloatLE(e)}encode(t,e,n=0){return o(e).writeFloatLE(t,n),4}}e.Float=A;class S extends s{constructor(t){super(4,t)}decode(t,e=0){return o(t).readFloatBE(e)}encode(t,e,n=0){return o(e).writeFloatBE(t,n),4}}e.FloatBE=S;class _ extends s{constructor(t){super(8,t)}decode(t,e=0){return o(t).readDoubleLE(e)}encode(t,e,n=0){return o(e).writeDoubleLE(t,n),8}}e.Double=_;class T extends s{constructor(t){super(8,t)}decode(t,e=0){return o(t).readDoubleBE(e)}encode(t,e,n=0){return o(e).writeDoubleBE(t,n),8}}e.DoubleBE=T;class x extends s{constructor(t,e,n){if(!(t instanceof s))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof c&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(e instanceof c)&&0<t.span&&(r=e*t.span),super(r,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof c&&(r=r.decode(t,e)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let i=0;for(;i<r;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let r=0,i=this.count;for(i instanceof c&&(i=i.decode(t,e));r<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),r+=1;return n}encode(t,e,n=0){const r=this.elementLayout,i=t.reduce(((t,i)=>t+r.encode(i,e,n+t)),0);return this.count instanceof c&&this.count.encode(t.length,e,n),i}}e.Sequence=x;class v extends s{constructor(t,e,n){if(!Array.isArray(t)||!t.reduce(((t,e)=>t&&e instanceof s),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===n&&(n=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=t.reduce(((t,e)=>t+e.getSpan()),0)}catch(t){}super(r,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce(((n,r)=>{const i=r.getSpan(t,e);return e+=i,n+i}),0)}catch(t){throw new RangeError("indeterminate span")}return n}decode(t,e=0){i(t);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(t,e)),e+=r.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const r=n;let i=0,o=0;for(const r of this.fields){let s=r.span;if(o=0<s?s:0,void 0!==r.property){const i=t[r.property];void 0!==i&&(o=r.encode(i,e,n),0>s&&(s=r.getSpan(e,n)))}i=n,n+=s}return i+o-r}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}e.Structure=v;class E{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}e.UnionDiscriminator=E;class P extends E{constructor(t,e){if(!(t instanceof c&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}e.UnionLayoutDiscriminator=P;class B extends s{constructor(t,e,n){let r;if(t instanceof l||t instanceof h)r=new P(new d(t));else if(t instanceof c&&t.isCount())r=new P(t);else{if(!(t instanceof E))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");r=t}if(void 0===e&&(e=null),!(null===e||e instanceof s))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof l||t instanceof h)&&(i+=r.layout.span)),super(i,n),this.discriminator=r,this.usesPrefixDiscriminator=t instanceof l||t instanceof h,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return o(t)},this.configGetSourceVariant=function(t){o=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const r=this.discriminator,i=r.decode(t,e),o=this.registry[i];if(void 0===o){const o=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=i,n[o.property]=o.decode(t,e+s)}else n=o.decode(t,e);return n}encode(t,e,n=0){const r=this.getSourceVariant(t);if(void 0===r){const r=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=r.layout.span),r.encode(t[r.property],e,n),o+i.encode(t[i.property],e,n+o)}return r.encode(t,e,n)}addVariant(t,e,n){const r=new R(this,t,e,n);return this.registry[t]=r,r}getVariant(t,e=0){let n;return n=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[n]}}e.Union=B;class R extends s{constructor(t,e,n,r){if(!(t instanceof B))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof s))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,r),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(t,e+n)),n+r}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=r;if(this.layout&&(this.layout.encode(t[this.property],e,n+r),i+=this.layout.getSpan(e,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function C(t){return 0>t&&(t+=4294967296),t}e.VariantLayout=R;class W extends s{constructor(t,e,n){if(!(t instanceof l||t instanceof h))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===n&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let r=0;this._packedSetValue=function(t){return r=C(t),this},this._packedGetValue=function(){return r}}decode(t,e=0){const n=this.makeDestinationObject(),r=this.word.decode(t,e);this._packedSetValue(r);for(const e of this.fields)void 0!==e.property&&(n[e.property]=e.decode(t));return n}encode(t,e,n=0){const r=this.word.decode(e,n);this._packedSetValue(r);for(const e of this.fields)if(void 0!==e.property){const n=t[e.property];void 0!==n&&e.encode(n)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new z(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new L(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}e.BitStructure=W;class z{constructor(t,e,n){if(!(t instanceof W))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const r=8*t.span,i=t.fields.reduce(((t,e)=>t+e.bits),0);if(e+i>r)throw new Error("bits too long for span remainder ("+(r-i)+" of "+r+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=r-i-e),this.wordMask=C(this.valueMask<<this.start),this.property=n}decode(t,e){return C(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==C(t&this.valueMask))throw new TypeError(a("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=C(t<<this.start);this.container._packedSetValue(C(e&~this.wordMask)|n)}}e.BitField=z;class L extends z{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}}e.Boolean=L;class O extends s{constructor(t,e){if(!(t instanceof c&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof c||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),o(t).slice(e,e+n)}encode(t,e,n){let r=this.length;if(this.length instanceof c&&(r=t.length),!(t instanceof Uint8Array&&r===t.length))throw new TypeError(a("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>e.length)throw new RangeError("encoding overruns Uint8Array");const i=o(t);return o(e).write(i.toString("hex"),n,r,"hex"),this.length instanceof c&&this.length.encode(r,e,n),r}}e.Blob=O;class U extends s{constructor(t){super(-1,t)}getSpan(t,e=0){i(t);let n=e;for(;n<t.length&&0!==t[n];)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return o(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){"string"!=typeof t&&(t=String(t));const i=r.Buffer.from(t,"utf8"),s=i.length;if(n+s>e.length)throw new RangeError("encoding overruns Buffer");const a=o(e);return i.copy(a,n),a[n+s]=0,s+1}}e.CString=U;class j extends s{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return i(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return o(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){"string"!=typeof t&&(t=String(t));const i=r.Buffer.from(t,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(n+s>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(o(e),n),s}}e.UTF8=j;class K extends s{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}e.Constant=K,e.greedy=(t,e)=>new u(t,e),e.offset=(t,e,n)=>new d(t,e,n),e.u8=t=>new l(1,t),e.u16=t=>new l(2,t),e.u24=t=>new l(3,t),e.u32=t=>new l(4,t),e.u40=t=>new l(5,t),e.u48=t=>new l(6,t),e.nu64=t=>new b(t),e.u16be=t=>new h(2,t),e.u24be=t=>new h(3,t),e.u32be=t=>new h(4,t),e.u40be=t=>new h(5,t),e.u48be=t=>new h(6,t),e.nu64be=t=>new k(t),e.s8=t=>new f(1,t),e.s16=t=>new f(2,t),e.s24=t=>new f(3,t),e.s32=t=>new f(4,t),e.s40=t=>new f(5,t),e.s48=t=>new f(6,t),e.ns64=t=>new w(t),e.s16be=t=>new p(2,t),e.s24be=t=>new p(3,t),e.s32be=t=>new p(4,t),e.s40be=t=>new p(5,t),e.s48be=t=>new p(6,t),e.ns64be=t=>new I(t),e.f32=t=>new A(t),e.f32be=t=>new S(t),e.f64=t=>new _(t),e.f64be=t=>new T(t),e.struct=(t,e,n)=>new v(t,e,n),e.bits=(t,e,n)=>new W(t,e,n),e.seq=(t,e,n)=>new x(t,e,n),e.union=(t,e,n)=>new B(t,e,n),e.unionLayoutDiscriminator=(t,e)=>new P(t,e),e.blob=(t,e)=>new O(t,e),e.cstr=t=>new U(t),e.utf8=(t,e)=>new j(t,e),e.constant=(t,e)=>new K(t,e)},"../../../node_modules/@solana/web3.js/lib/index.browser.esm.js":function(t,e,n){n.r(e),n.d(e,{Account:function(){return O},AddressLookupTableAccount:function(){return qt},AddressLookupTableInstruction:function(){return Mn},AddressLookupTableProgram:function(){return Dn},Authorized:function(){return Jn},BLOCKHASH_CACHE_TIMEOUT_MS:function(){return Xt},BPF_LOADER_DEPRECATED_PROGRAM_ID:function(){return U},BPF_LOADER_PROGRAM_ID:function(){return Rt},BpfLoader:function(){return Ct},COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:function(){return qn},ComputeBudgetInstruction:function(){return Fn},ComputeBudgetProgram:function(){return Hn},Connection:function(){return jn},Ed25519Program:function(){return Gn},Enum:function(){return P},EpochSchedule:function(){return jt},FeeCalculatorLayout:function(){return It},Keypair:function(){return Kn},LAMPORTS_PER_SOL:function(){return Ir},LOOKUP_TABLE_INSTRUCTION_LAYOUTS:function(){return Nn},Loader:function(){return Bt},Lockup:function(){return Qn},MAX_SEED_LENGTH:function(){return C},Message:function(){return Q},MessageAccountKeys:function(){return q},MessageV0:function(){return tt},NONCE_ACCOUNT_LENGTH:function(){return St},NonceAccount:function(){return _t},PACKET_DATA_SIZE:function(){return j},PUBLIC_KEY_LENGTH:function(){return W},PublicKey:function(){return L},SIGNATURE_LENGTH_IN_BYTES:function(){return N},SOLANA_SCHEMA:function(){return B},STAKE_CONFIG_ID:function(){return Yn},STAKE_INSTRUCTION_LAYOUTS:function(){return er},SYSTEM_INSTRUCTION_LAYOUTS:function(){return vt},SYSVAR_CLOCK_PUBKEY:function(){return ct},SYSVAR_EPOCH_SCHEDULE_PUBKEY:function(){return ut},SYSVAR_INSTRUCTIONS_PUBKEY:function(){return dt},SYSVAR_RECENT_BLOCKHASHES_PUBKEY:function(){return lt},SYSVAR_RENT_PUBKEY:function(){return ht},SYSVAR_REWARDS_PUBKEY:function(){return ft},SYSVAR_SLOT_HASHES_PUBKEY:function(){return pt},SYSVAR_SLOT_HISTORY_PUBKEY:function(){return mt},SYSVAR_STAKE_HISTORY_PUBKEY:function(){return yt},Secp256k1Program:function(){return Xn},SendTransactionError:function(){return Kt},SolanaJSONRPCError:function(){return Mt},SolanaJSONRPCErrorCode:function(){return Nt},StakeAuthorizationLayout:function(){return nr},StakeInstruction:function(){return tr},StakeProgram:function(){return rr},Struct:function(){return E},SystemInstruction:function(){return xt},SystemProgram:function(){return Et},Transaction:function(){return ot},TransactionExpiredBlockheightExceededError:function(){return M},TransactionExpiredNonceInvalidError:function(){return F},TransactionExpiredTimeoutError:function(){return D},TransactionInstruction:function(){return it},TransactionMessage:function(){return st},TransactionStatus:function(){return nt},VALIDATOR_INFO_KEY:function(){return ur},VERSION_PREFIX_MASK:function(){return K},VOTE_PROGRAM_ID:function(){return hr},ValidatorInfo:function(){return lr},VersionedMessage:function(){return et},VersionedTransaction:function(){return at},VoteAccount:function(){return pr},VoteAuthorizationLayout:function(){return ar},VoteInit:function(){return ir},VoteInstruction:function(){return or},VoteProgram:function(){return cr},clusterApiUrl:function(){return kr},sendAndConfirmRawTransaction:function(){return wr},sendAndConfirmTransaction:function(){return gt}});var r=n("../../../node_modules/buffer/index.js"),i=n("../../../node_modules/@noble/curves/esm/ed25519.js"),o=n("../../../node_modules/bn.js/lib/bn.js"),s=n.n(o),a=n("../../../node_modules/bs58/index.js"),c=n.n(a),u=n("../../../node_modules/@solana/web3.js/node_modules/@noble/hashes/esm/sha256.js"),d=n("../../../node_modules/@solana/web3.js/node_modules/borsh/lib/index.js"),l=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),h=n("../../../node_modules/bigint-buffer/dist/browser.js"),f=n("../../../node_modules/@solana/web3.js/node_modules/superstruct/lib/index.es.js"),p=n("../../../node_modules/@solana/web3.js/node_modules/jayson/lib/client/browser/index.js"),m=n.n(p),y=n("../../../node_modules/rpc-websockets/dist/lib/client.js"),g=n("../../../node_modules/rpc-websockets/dist/lib/client/websocket.browser.js"),b=n("../../../node_modules/@solana/web3.js/node_modules/@noble/hashes/esm/sha3.js"),k=n("../../../node_modules/@noble/curves/esm/secp256k1.js"),w=n("../../../node_modules/console-browserify/index.js");const I=i.UN.utils.randomPrivateKey,A=()=>{const t=i.UN.utils.randomPrivateKey(),e=S(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},S=i.UN.getPublicKey;function _(t){try{return i.UN.ExtendedPoint.fromHex(t),!0}catch{return!1}}const T=(t,e)=>i.UN.sign(t,e.slice(0,32)),x=i.UN.verify,v=t=>r.Buffer.isBuffer(t)?t:t instanceof Uint8Array?r.Buffer.from(t.buffer,t.byteOffset,t.byteLength):r.Buffer.from(t);class E{constructor(t){Object.assign(this,t)}encode(){return r.Buffer.from((0,d.serialize)(B,this))}static decode(t){return(0,d.deserialize)(B,this,t)}static decodeUnchecked(t){return(0,d.deserializeUnchecked)(B,this,t)}}class P extends E{constructor(t){if(super(t),this.enum="",1!==Object.keys(t).length)throw new Error("Enum can only take single value");Object.keys(t).map((t=>{this.enum=t}))}}const B=new Map;let R;const C=32,W=32;let z=1;R=Symbol.toStringTag;class L extends E{constructor(t){if(super({}),this._bn=void 0,function(t){return void 0!==t._bn}(t))this._bn=t._bn;else{if("string"==typeof t){const e=c().decode(t);if(e.length!=W)throw new Error("Invalid public key input");this._bn=new(s())(e)}else this._bn=new(s())(t);if(this._bn.byteLength()>W)throw new Error("Invalid public key input")}}static unique(){const t=new L(z);return z+=1,new L(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return c().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(r.Buffer);if(t.length===W)return t;const e=r.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[R](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const i=r.Buffer.concat([t.toBuffer(),r.Buffer.from(e),n.toBuffer()]),o=(0,u.J)(i);return new L(o)}static createProgramAddressSync(t,e){let n=r.Buffer.alloc(0);t.forEach((function(t){if(t.length>C)throw new TypeError("Max seed length exceeded");n=r.Buffer.concat([n,v(t)])})),n=r.Buffer.concat([n,e.toBuffer(),r.Buffer.from("ProgramDerivedAddress")]);const i=(0,u.J)(n);if(_(i))throw new Error("Invalid seeds, address must fall off the curve");return new L(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n,i=255;for(;0!=i;){try{const o=t.concat(r.Buffer.from([i]));n=this.createProgramAddressSync(o,e)}catch(t){if(t instanceof TypeError)throw t;i--;continue}return[n,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){return _(new L(t).toBytes())}}L.default=new L("11111111111111111111111111111111"),B.set(L,{kind:"struct",fields:[["_bn","u256"]]});class O{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=v(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=v(I()),this._publicKey=v(S(this._secretKey))}get publicKey(){return new L(this._publicKey)}get secretKey(){return r.Buffer.concat([this._secretKey,this._publicKey],64)}}const U=new L("BPFLoader1111111111111111111111111111111111"),j=1232,K=127,N=64;class M extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(M.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class D extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(D.prototype,"name",{value:"TransactionExpiredTimeoutError"});class F extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(F.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class q{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const e=new Map;this.keySegments().flat().forEach(((t,n)=>{e.set(t.toBase58(),n)}));const n=t=>{const n=e.get(t.toBase58());if(void 0===n)throw new Error("Encountered an unknown instruction account key during compilation");return n};return t.map((t=>({programIdIndex:n(t.programId),accountKeyIndexes:t.keys.map((t=>n(t.pubkey))),data:t.data})))}}const H=(t="publicKey")=>l.blob(32,t),Z=(t="signature")=>l.blob(64,t),G=(t="string")=>{const e=l.struct([l.u32("length"),l.u32("lengthPadding"),l.blob(l.offset(l.u32(),-8),"chars")],t),n=e.decode.bind(e),i=e.encode.bind(e),o=e;return o.decode=(t,e)=>n(t,e).chars.toString(),o.encode=(t,e,n)=>{const o={chars:r.Buffer.from(t,"utf8")};return i(o,e,n)},o.alloc=t=>l.u32().span+l.u32().span+r.Buffer.from(t,"utf8").length,o};function V(t,e){const n=t=>{if(t.span>=0)return t.span;if("function"==typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const r=e[t.property];if(Array.isArray(r))return r.length*n(t.elementLayout)}else if("fields"in t)return V({layout:t},e[t.property]);return 0};let r=0;return t.layout.fields.forEach((t=>{r+=n(t)})),r}function $(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(127&r)<<7*n,n+=1,0==(128&r))break}return e}function X(t,e){let n=e;for(;;){let e=127&n;if(n>>=7,0==n){t.push(e);break}e|=128,t.push(e)}}function Y(t,e){if(!t)throw new Error(e||"Assertion failed")}class J{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,r=t=>{const e=t.toBase58();let r=n.get(e);return void 0===r&&(r={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(e,r)),r},i=r(e);i.isSigner=!0,i.isWritable=!0;for(const e of t){r(e.programId).isInvoked=!0;for(const t of e.keys){const e=r(t.pubkey);e.isSigner||=t.isSigner,e.isWritable||=t.isWritable}}return new J(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Y(t.length<=256,"Max static account keys length exceeded");const e=t.filter((([,t])=>t.isSigner&&t.isWritable)),n=t.filter((([,t])=>t.isSigner&&!t.isWritable)),r=t.filter((([,t])=>!t.isSigner&&t.isWritable)),i=t.filter((([,t])=>!t.isSigner&&!t.isWritable)),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Y(e.length>0,"Expected at least one writable signer key");const[t]=e[0];Y(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...e.map((([t])=>new L(t))),...n.map((([t])=>new L(t))),...r.map((([t])=>new L(t))),...i.map((([t])=>new L(t)))]]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,(t=>!t.isSigner&&!t.isInvoked&&t.isWritable)),[r,i]=this.drainKeysFoundInLookupTable(t.state.addresses,(t=>!t.isSigner&&!t.isInvoked&&!t.isWritable));if(0!==e.length||0!==r.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:r},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,r=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const e=new L(i),o=t.findIndex((t=>t.equals(e)));o>=0&&(Y(o<256,"Max lookup table index exceeded"),n.push(o),r.push(e),this.keyMetaMap.delete(i))}return[n,r]}}class Q{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((t=>new L(t))),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:c().decode(t.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new q(this.staticAccountKeys)}static compile(t){const e=J.compile(t.instructions,t.payerKey),[n,r]=e.getMessageComponents(),i=new q(r).compileInstructions(t.instructions).map((t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:c().encode(t.data)})));return new Q({header:n,accountKeys:r,recentBlockhash:t.recentBlockhash,instructions:i})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;return t>=this.header.numRequiredSignatures?t-e<this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts:t<e-this.header.numReadonlySignedAccounts}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((t,e)=>!this.isProgramId(e)))}serialize(){const t=this.accountKeys.length;let e=[];X(e,t);const n=this.instructions.map((t=>{const{accounts:e,programIdIndex:n}=t,i=Array.from(c().decode(t.data));let o=[];X(o,e.length);let s=[];return X(s,i.length),{programIdIndex:n,keyIndicesCount:r.Buffer.from(o),keyIndices:e,dataLength:r.Buffer.from(s),data:i}}));let i=[];X(i,n.length);let o=r.Buffer.alloc(j);r.Buffer.from(i).copy(o);let s=i.length;n.forEach((t=>{const e=l.struct([l.u8("programIdIndex"),l.blob(t.keyIndicesCount.length,"keyIndicesCount"),l.seq(l.u8("keyIndex"),t.keyIndices.length,"keyIndices"),l.blob(t.dataLength.length,"dataLength"),l.seq(l.u8("userdatum"),t.data.length,"data")]).encode(t,o,s);s+=e})),o=o.slice(0,s);const a=l.struct([l.blob(1,"numRequiredSignatures"),l.blob(1,"numReadonlySignedAccounts"),l.blob(1,"numReadonlyUnsignedAccounts"),l.blob(e.length,"keyCount"),l.seq(H("key"),t,"keys"),H("recentBlockhash")]),u={numRequiredSignatures:r.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:r.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:r.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:r.Buffer.from(e),keys:this.accountKeys.map((t=>v(t.toBytes()))),recentBlockhash:c().decode(this.recentBlockhash)};let d=r.Buffer.alloc(2048);const h=a.encode(u,d);return o.copy(d,h),d.slice(0,h+o.length)}static from(t){let e=[...t];const n=e.shift();if(n!==(n&K))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=e.shift(),o=e.shift(),s=$(e);let a=[];for(let t=0;t<s;t++){const t=e.slice(0,W);e=e.slice(W),a.push(new L(r.Buffer.from(t)))}const u=e.slice(0,W);e=e.slice(W);const d=$(e);let l=[];for(let t=0;t<d;t++){const t=e.shift(),n=$(e),i=e.slice(0,n);e=e.slice(n);const o=$(e),s=e.slice(0,o),a=c().encode(r.Buffer.from(s));e=e.slice(o),l.push({programIdIndex:t,accounts:i,data:a})}const h={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:c().encode(r.Buffer.from(u)),accountKeys:a,instructions:l};return new Q(h)}}class tt{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new q(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;return t>=n?t-n<this.addressTableLookups.reduce(((t,e)=>t+e.writableIndexes.length),0):t>=this.header.numRequiredSignatures?t-e<n-e-this.header.numReadonlyUnsignedAccounts:t<e-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const r=t.find((t=>t.key.equals(n.accountKey)));if(!r)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const t of n.writableIndexes){if(!(t<r.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${n.accountKey.toBase58()}`);e.writable.push(r.state.addresses[t])}for(const t of n.readonlyIndexes){if(!(t<r.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${n.accountKey.toBase58()}`);e.readonly.push(r.state.addresses[t])}}return e}static compile(t){const e=J.compile(t.instructions,t.payerKey),n=new Array,r={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const t of i){const i=e.extractTableLookup(t);if(void 0!==i){const[t,{writable:e,readonly:o}]=i;n.push(t),r.writable.push(...e),r.readonly.push(...o)}}const[o,s]=e.getMessageComponents(),a=new q(s,r).compileInstructions(t.instructions);return new tt({header:o,staticAccountKeys:s,recentBlockhash:t.recentBlockhash,compiledInstructions:a,addressTableLookups:n})}serialize(){const t=Array();X(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();X(n,this.compiledInstructions.length);const r=this.serializeAddressTableLookups(),i=Array();X(i,this.addressTableLookups.length);const o=l.struct([l.u8("prefix"),l.struct([l.u8("numRequiredSignatures"),l.u8("numReadonlySignedAccounts"),l.u8("numReadonlyUnsignedAccounts")],"header"),l.blob(t.length,"staticAccountKeysLength"),l.seq(H(),this.staticAccountKeys.length,"staticAccountKeys"),H("recentBlockhash"),l.blob(n.length,"instructionsLength"),l.blob(e.length,"serializedInstructions"),l.blob(i.length,"addressTableLookupsLength"),l.blob(r.length,"serializedAddressTableLookups")]),s=new Uint8Array(j),a=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map((t=>t.toBytes())),recentBlockhash:c().decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:r},s);return s.slice(0,a)}serializeInstructions(){let t=0;const e=new Uint8Array(j);for(const n of this.compiledInstructions){const r=Array();X(r,n.accountKeyIndexes.length);const i=Array();X(i,n.data.length),t+=l.struct([l.u8("programIdIndex"),l.blob(r.length,"encodedAccountKeyIndexesLength"),l.seq(l.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),l.blob(i.length,"encodedDataLength"),l.blob(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(r),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(j);for(const n of this.addressTableLookups){const r=Array();X(r,n.writableIndexes.length);const i=Array();X(i,n.readonlyIndexes.length),t+=l.struct([H("accountKey"),l.blob(r.length,"encodedWritableIndexesLength"),l.seq(l.u8(),n.writableIndexes.length,"writableIndexes"),l.blob(i.length,"encodedReadonlyIndexesLength"),l.seq(l.u8(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(r),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=e.shift(),r=n&K;Y(n!==r,"Expected versioned message but received legacy message"),Y(0===r,`Expected versioned message with version 0 but found version ${r}`);const i={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},o=[],s=$(e);for(let t=0;t<s;t++)o.push(new L(e.splice(0,W)));const a=c().encode(e.splice(0,W)),u=$(e),d=[];for(let t=0;t<u;t++){const t=e.shift(),n=$(e),r=e.splice(0,n),i=$(e),o=new Uint8Array(e.splice(0,i));d.push({programIdIndex:t,accountKeyIndexes:r,data:o})}const l=$(e),h=[];for(let t=0;t<l;t++){const t=new L(e.splice(0,W)),n=$(e),r=e.splice(0,n),i=$(e),o=e.splice(0,i);h.push({accountKey:t,writableIndexes:r,readonlyIndexes:o})}return new tt({header:i,staticAccountKeys:o,recentBlockhash:a,compiledInstructions:d,addressTableLookups:h})}}const et={deserializeMessageVersion(t){const e=t[0],n=e&K;return n===e?"legacy":n},deserialize:t=>{const e=et.deserializeMessageVersion(t);if("legacy"===e)return Q.from(t);if(0===e)return tt.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let nt;!function(t){t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID"}(nt||(nt={}));const rt=r.Buffer.alloc(N).fill(0);class it{constructor(t){this.keys=void 0,this.programId=void 0,this.data=r.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map((({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n}))),programId:this.programId.toJSON(),data:[...this.data]}}}class ot{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((t=>t.toJSON())),signers:this.signatures.map((({publicKey:t})=>t.toJSON()))}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach((t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new it(t))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,n;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length<1&&w.warn("No instructions provided"),this.feePayer)n=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");n=this.signatures[0].publicKey}for(let t=0;t<e.length;t++)if(void 0===e[t].programId)throw new Error(`Transaction instruction index ${t} has undefined program id`);const r=[],i=[];e.forEach((t=>{t.keys.forEach((t=>{i.push({...t})}));const e=t.programId.toString();r.includes(e)||r.push(e)})),r.forEach((t=>{i.push({pubkey:new L(t),isSigner:!1,isWritable:!1})}));const o=[];i.forEach((t=>{const e=t.pubkey.toString(),n=o.findIndex((t=>t.pubkey.toString()===e));n>-1?(o[n].isWritable=o[n].isWritable||t.isWritable,o[n].isSigner=o[n].isSigner||t.isSigner):o.push(t)})),o.sort((function(t,e){return t.isSigner!==e.isSigner?t.isSigner?-1:1:t.isWritable!==e.isWritable?t.isWritable?-1:1:t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const s=o.findIndex((t=>t.pubkey.equals(n)));if(s>-1){const[t]=o.splice(s,1);t.isSigner=!0,t.isWritable=!0,o.unshift(t)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const t of this.signatures){const e=o.findIndex((e=>e.pubkey.equals(t.publicKey)));if(!(e>-1))throw new Error(`unknown signer: ${t.publicKey.toString()}`);o[e].isSigner||(o[e].isSigner=!0,w.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,u=0,d=0;const l=[],h=[];o.forEach((({pubkey:t,isSigner:e,isWritable:n})=>{e?(l.push(t.toString()),a+=1,n||(u+=1)):(h.push(t.toString()),n||(d+=1))}));const f=l.concat(h),p=e.map((t=>{const{data:e,programId:n}=t;return{programIdIndex:f.indexOf(n.toString()),accounts:t.keys.map((t=>f.indexOf(t.pubkey.toString()))),data:c().encode(e)}}));return p.forEach((t=>{Y(t.programIdIndex>=0),t.accounts.forEach((t=>Y(t>=0)))})),new Q({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:d},accountKeys:f,recentBlockhash:t,instructions:p})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every(((t,n)=>e[n].equals(t.publicKey)))||(this.signatures=e.map((t=>({signature:null,publicKey:t})))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter((t=>{const n=t.toString();return!e.has(n)&&(e.add(n),!0)})).map((t=>({signature:null,publicKey:t})))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,n=[];for(const r of t){const t=r.publicKey.toString();e.has(t)||(e.add(t),n.push(r))}this.signatures=n.map((t=>({signature:null,publicKey:t.publicKey})));const r=this._compile();this._partialSign(r,...n)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,n=[];for(const r of t){const t=r.publicKey.toString();e.has(t)||(e.add(t),n.push(r))}const r=this._compile();this._partialSign(r,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach((t=>{const e=T(n,t.secretKey);this._addSignature(t.publicKey,v(e))}))}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Y(64===e.length);const n=this.signatures.findIndex((e=>t.equals(e.publicKey)));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=r.Buffer.from(e)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),void 0===t||t)}_verifySignatures(t,e){for(const{signature:n,publicKey:r}of this.signatures)if(null===n){if(e)return!1}else if(!x(n,t,r.toBytes()))return!1;return!0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),r=this.serializeMessage();if(n&&!this._verifySignatures(r,e))throw new Error("Signature verification failed");return this._serialize(r)}_serialize(t){const{signatures:e}=this,n=[];X(n,e.length);const i=n.length+64*e.length+t.length,o=r.Buffer.alloc(i);return Y(e.length<256),r.Buffer.from(n).copy(o,0),e.forEach((({signature:t},e)=>{null!==t&&(Y(64===t.length,"signature has invalid length"),r.Buffer.from(t).copy(o,n.length+64*e))})),t.copy(o,n.length+64*e.length),Y(o.length<=j,`Transaction too large: ${o.length} > ${j}`),o}get keys(){return Y(1===this.instructions.length),this.instructions[0].keys.map((t=>t.pubkey))}get programId(){return Y(1===this.instructions.length),this.instructions[0].programId}get data(){return Y(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const n=$(e);let i=[];for(let t=0;t<n;t++){const t=e.slice(0,N);e=e.slice(N),i.push(c().encode(r.Buffer.from(t)))}return ot.populate(Q.from(e),i)}static populate(t,e=[]){const n=new ot;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach(((e,r)=>{const i={signature:e==c().encode(rt)?null:c().decode(e),publicKey:t.accountKeys[r]};n.signatures.push(i)})),t.instructions.forEach((e=>{const r=e.accounts.map((e=>{const r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some((t=>t.publicKey.toString()===r.toString()))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));n.instructions.push(new it({keys:r,programId:t.accountKeys[e.programIdIndex],data:c().decode(e.data)}))})),n._message=t,n._json=n.toJSON(),n}}class st{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:n,compiledInstructions:r,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:a}=n,c=o-s;Y(c>0,"Message header is invalid");const u=t.staticAccountKeys.length-o-a;Y(u>=0,"Message header is invalid");const d=t.getAccountKeys(e),l=d.get(0);if(void 0===l)throw new Error("Failed to decompile message because no account keys were found");const h=[];for(const t of r){const e=[];for(const r of t.accountKeyIndexes){const t=d.get(r);if(void 0===t)throw new Error(`Failed to find key for account key index ${r}`);let i;i=r<o?r<c:r<d.staticAccountKeys.length?r-o<u:r-d.staticAccountKeys.length<d.accountKeysFromLookups.writable.length,e.push({pubkey:t,isSigner:r<n.numRequiredSignatures,isWritable:i})}const r=d.get(t.programIdIndex);if(void 0===r)throw new Error(`Failed to find program id for program id index ${t.programIdIndex}`);h.push(new it({programId:r,data:v(t.data),keys:e}))}return new st({payerKey:l,instructions:h,recentBlockhash:i})}compileToLegacyMessage(){return Q.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return tt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class at{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)Y(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let n=0;n<t.header.numRequiredSignatures;n++)e.push(new Uint8Array(N));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();X(e,this.signatures.length);const n=l.struct([l.blob(e.length,"encodedSignaturesLength"),l.seq(Z(),this.signatures.length,"signatures"),l.blob(t.length,"serializedMessage")]),r=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},r);return r.slice(0,i)}static deserialize(t){let e=[...t];const n=[],r=$(e);for(let t=0;t<r;t++)n.push(new Uint8Array(e.splice(0,N)));const i=et.deserialize(new Uint8Array(e));return new at(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const r of t){const t=n.findIndex((t=>t.equals(r.publicKey)));Y(t>=0,`Cannot sign with non signer key ${r.publicKey.toBase58()}`),this.signatures[t]=T(e,r.secretKey)}}addSignature(t,e){Y(64===e.byteLength,"Signature must be 64 bytes long");const n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((e=>e.equals(t)));Y(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}}const ct=new L("SysvarC1ock11111111111111111111111111111111"),ut=new L("SysvarEpochSchedu1e111111111111111111111111"),dt=new L("Sysvar1nstructions1111111111111111111111111"),lt=new L("SysvarRecentB1ockHashes11111111111111111111"),ht=new L("SysvarRent111111111111111111111111111111111"),ft=new L("SysvarRewards111111111111111111111111111111"),pt=new L("SysvarS1otHashes111111111111111111111111111"),mt=new L("SysvarS1otHistory11111111111111111111111111"),yt=new L("SysvarStakeHistory1111111111111111111111111");async function gt(t,e,n,r){const i=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},o=await t.sendTransaction(e,n,i);let s;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)s=(await t.confirmTransaction({abortSignal:r?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:n}=e.nonceInfo,i=n.keys[0].pubkey;s=(await t.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:e.nonceInfo.nonce,signature:o},r&&r.commitment)).value}else null!=r?.abortSignal&&w.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await t.confirmTransaction(o,r&&r.commitment)).value;if(s.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function bt(t){return new Promise((e=>setTimeout(e,t)))}function kt(t,e){const n=t.layout.span>=0?t.layout.span:V(t,e),i=r.Buffer.alloc(n),o=Object.assign({instruction:t.index},e);return t.layout.encode(o,i),i}function wt(t,e){let n;try{n=t.layout.decode(e)}catch(t){throw new Error("invalid instruction; "+t)}if(n.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${n.instruction} != ${t.index}`);return n}const It=l.nu64("lamportsPerSignature"),At=l.struct([l.u32("version"),l.u32("state"),H("authorizedPubkey"),H("nonce"),l.struct([It],"feeCalculator")]),St=At.span;class _t{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=At.decode(v(t),0);return new _t({authorizedPubkey:new L(e.authorizedPubkey),nonce:new L(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Tt=(8,t=>{const e=(0,l.blob)(8,t),{encode:n,decode:i}=(t=>({decode:t.decode.bind(t),encode:t.encode.bind(t)}))(e),o=e;return o.decode=(t,e)=>{const n=i(t,e);return(0,h.toBigIntLE)(r.Buffer.from(n))},o.encode=(t,e,r)=>{const i=(0,h.toBufferLE)(t,8);return n(i,e,r)},o});class xt{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=l.u32("instruction").decode(t.data);let n;for(const[t,r]of Object.entries(vt))if(r.index==e){n=t;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:n,programId:r}=wt(vt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:n,programId:new L(r)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=wt(vt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:n,programId:r}=wt(vt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:n,programId:new L(r)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=wt(vt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:n,space:r,programId:i}=wt(vt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new L(e),seed:n,space:r,programId:new L(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=wt(vt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new L(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:n,programId:r}=wt(vt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new L(e),seed:n,programId:new L(r)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:n,lamports:r,space:i,programId:o}=wt(vt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new L(e),seed:n,lamports:r,space:i,programId:new L(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=wt(vt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new L(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),wt(vt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=wt(vt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=wt(vt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new L(e)}}static checkProgramId(t){if(!t.equals(Et.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const vt=Object.freeze({Create:{index:0,layout:l.struct([l.u32("instruction"),l.ns64("lamports"),l.ns64("space"),H("programId")])},Assign:{index:1,layout:l.struct([l.u32("instruction"),H("programId")])},Transfer:{index:2,layout:l.struct([l.u32("instruction"),Tt("lamports")])},CreateWithSeed:{index:3,layout:l.struct([l.u32("instruction"),H("base"),G("seed"),l.ns64("lamports"),l.ns64("space"),H("programId")])},AdvanceNonceAccount:{index:4,layout:l.struct([l.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:l.struct([l.u32("instruction"),l.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:l.struct([l.u32("instruction"),H("authorized")])},AuthorizeNonceAccount:{index:7,layout:l.struct([l.u32("instruction"),H("authorized")])},Allocate:{index:8,layout:l.struct([l.u32("instruction"),l.ns64("space")])},AllocateWithSeed:{index:9,layout:l.struct([l.u32("instruction"),H("base"),G("seed"),l.ns64("space"),H("programId")])},AssignWithSeed:{index:10,layout:l.struct([l.u32("instruction"),H("base"),G("seed"),H("programId")])},TransferWithSeed:{index:11,layout:l.struct([l.u32("instruction"),Tt("lamports"),G("seed"),H("programId")])},UpgradeNonceAccount:{index:12,layout:l.struct([l.u32("instruction")])}});class Et{constructor(){}static createAccount(t){const e=kt(vt.Create,{lamports:t.lamports,space:t.space,programId:v(t.programId.toBuffer())});return new it({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:e})}static transfer(t){let e,n;return"basePubkey"in t?(e=kt(vt.TransferWithSeed,{lamports:BigInt(t.lamports),seed:t.seed,programId:v(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]):(e=kt(vt.Transfer,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]),new it({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;return"basePubkey"in t?(e=kt(vt.AssignWithSeed,{base:v(t.basePubkey.toBuffer()),seed:t.seed,programId:v(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]):(e=kt(vt.Assign,{programId:v(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]),new it({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=kt(vt.CreateWithSeed,{base:v(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:v(t.programId.toBuffer())});let n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new it({keys:n,programId:this.programId,data:e})}static createNonceAccount(t){const e=new ot;"basePubkey"in t&&"seed"in t?e.add(Et.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:St,programId:this.programId})):e.add(Et.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:St,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=kt(vt.InitializeNonceAccount,{authorized:v(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:lt,isSigner:!1,isWritable:!1},{pubkey:ht,isSigner:!1,isWritable:!1}],programId:this.programId,data:e};return new it(n)}static nonceAdvance(t){const e=kt(vt.AdvanceNonceAccount),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:lt,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e};return new it(n)}static nonceWithdraw(t){const e=kt(vt.WithdrawNonceAccount,{lamports:t.lamports});return new it({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:lt,isSigner:!1,isWritable:!1},{pubkey:ht,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static nonceAuthorize(t){const e=kt(vt.AuthorizeNonceAccount,{authorized:v(t.newAuthorizedPubkey.toBuffer())});return new it({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static allocate(t){let e,n;return"basePubkey"in t?(e=kt(vt.AllocateWithSeed,{base:v(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:v(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]):(e=kt(vt.Allocate,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]),new it({keys:n,programId:this.programId,data:e})}}Et.programId=new L("11111111111111111111111111111111");const Pt=j-300;class Bt{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Bt.chunkSize)+1+1)}static async load(t,e,n,i,o){{const r=await t.getMinimumBalanceForRentExemption(o.length),s=await t.getAccountInfo(n.publicKey,"confirmed");let a=null;if(null!==s){if(s.executable)return w.error("Program load failed, account is already executable"),!1;s.data.length!==o.length&&(a=a||new ot,a.add(Et.allocate({accountPubkey:n.publicKey,space:o.length}))),s.owner.equals(i)||(a=a||new ot,a.add(Et.assign({accountPubkey:n.publicKey,programId:i}))),s.lamports<r&&(a=a||new ot,a.add(Et.transfer({fromPubkey:e.publicKey,toPubkey:n.publicKey,lamports:r-s.lamports})))}else a=(new ot).add(Et.createAccount({fromPubkey:e.publicKey,newAccountPubkey:n.publicKey,lamports:r>0?r:1,space:o.length,programId:i}));null!==a&&await gt(t,a,[e,n],{commitment:"confirmed"})}const s=l.struct([l.u32("instruction"),l.u32("offset"),l.u32("bytesLength"),l.u32("bytesLengthPadding"),l.seq(l.u8("byte"),l.offset(l.u32(),-8),"bytes")]),a=Bt.chunkSize;let c=0,u=o,d=[];for(;u.length>0;){const o=u.slice(0,a),l=r.Buffer.alloc(a+16);s.encode({instruction:0,offset:c,bytes:o,bytesLength:0,bytesLengthPadding:0},l);const h=(new ot).add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:l});if(d.push(gt(t,h,[e,n],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await bt(1e3/t)}c+=a,u=u.slice(a)}await Promise.all(d);{const o=l.struct([l.u32("instruction")]),s=r.Buffer.alloc(o.span);o.encode({instruction:1},s);const a=(new ot).add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:ht,isSigner:!1,isWritable:!1}],programId:i,data:s}),c="processed",u=await t.sendTransaction(a,[e,n],{preflightCommitment:c}),{context:d,value:h}=await t.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(h.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(h)})`);for(;;){try{if(await t.getSlot({commitment:c})>d.slot)break}catch{}await new Promise((t=>setTimeout(t,Math.round(200))))}}return!0}}Bt.chunkSize=Pt;const Rt=new L("BPFLoader2111111111111111111111111111111111");class Ct{static getMinNumSignatures(t){return Bt.getMinNumSignatures(t)}static load(t,e,n,r,i){return Bt.load(t,e,n,i,r)}}var Wt=Object.prototype.toString,zt=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function Lt(t,e){var n,r,i,o,s,a,c;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if(t.toJSON&&"function"==typeof t.toJSON)return Lt(t.toJSON(),e);if("[object Array]"===(c=Wt.call(t))){for(i="[",r=t.length-1,n=0;n<r;n++)i+=Lt(t[n],!0)+",";return r>-1&&(i+=Lt(t[n],!0)),i+"]"}if("[object Object]"===c){for(r=(o=zt(t).sort()).length,i="",n=0;n<r;)void 0!==(a=Lt(t[s=o[n]],!1))&&(i&&(i+=","),i+=JSON.stringify(s)+":"+a),n++;return"{"+i+"}"}return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var Ot=function(t){var e=Lt(t,!1);if(void 0!==e)return""+e};function Ut(t){let e=0;for(;t>1;)t/=2,e++;return e}class jt{constructor(t,e,n,r,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=r,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const n=Ut(0===(e=t+32+1)?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,1+(e|=e>>32)))-Ut(32)-1;return[n,t-(this.getSlotsInEpoch(n)-32)]}{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch);return[this.firstNormalEpoch+n,e%this.slotsPerEpoch]}var e}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?32*(Math.pow(2,t)-1):(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ut(32)):this.slotsPerEpoch}}class Kt extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}const Nt={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Mt extends Error{constructor({code:t,message:e,data:n},r){super(null!=r?`${r}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}var Dt=globalThis.fetch;class Ft extends y.Z{constructor(t,e,n){super((t=>{const n=(0,g.Z)(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in n?n.socket:n,n}),t,e,n),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}class qt{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=function(t,e){let n;try{n=t.layout.decode(e)}catch(t){throw new Error("invalid instruction; "+t)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}(Ht,t),n=t.length-56;Y(n>=0,"lookup table is invalid"),Y(n%32==0,"lookup table is invalid");const r=n/32,{addresses:i}=l.struct([l.seq(H(),r,"addresses")]).decode(t.slice(56));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new L(e.authority[0]):void 0,addresses:i.map((t=>new L(t)))}}}const Ht={index:1,layout:l.struct([l.u32("typeIndex"),Tt("deactivationSlot"),l.nu64("lastExtendedSlot"),l.u8("lastExtendedStartIndex"),l.u8(),l.seq(H(),l.offset(l.u8(),-1),"authority")])},Zt=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,Gt=(0,f.oQ)((0,f.eE)(L),(0,f.Z_)(),(t=>new L(t))),Vt=(0,f.bc)([(0,f.Z_)(),(0,f.i0)("base64")]),$t=(0,f.oQ)((0,f.eE)(r.Buffer),Vt,(t=>r.Buffer.from(t[0],"base64"))),Xt=3e4;function Yt(t){let e,n;if("string"==typeof t)e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function Jt(t){return(0,f.G0)([(0,f.dt)({jsonrpc:(0,f.i0)("2.0"),id:(0,f.Z_)(),result:t}),(0,f.dt)({jsonrpc:(0,f.i0)("2.0"),id:(0,f.Z_)(),error:(0,f.dt)({code:(0,f._4)(),message:(0,f.Z_)(),data:(0,f.jt)((0,f.Yj)())})})])}const Qt=Jt((0,f._4)());function te(t){return(0,f.oQ)(Jt(t),Qt,(e=>"error"in e?e:{...e,result:(0,f.Ue)(e.result,t)}))}function ee(t){return te((0,f.dt)({context:(0,f.dt)({slot:(0,f.Rx)()}),value:t}))}function ne(t){return(0,f.dt)({context:(0,f.dt)({slot:(0,f.Rx)()}),value:t})}function re(t,e){return 0===t?new tt({header:e.header,staticAccountKeys:e.accountKeys.map((t=>new L(t))),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map((t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:c().decode(t.data)}))),addressTableLookups:e.addressTableLookups}):new Q(e)}const ie=(0,f.dt)({foundation:(0,f.Rx)(),foundationTerm:(0,f.Rx)(),initial:(0,f.Rx)(),taper:(0,f.Rx)(),terminal:(0,f.Rx)()}),oe=te((0,f.IX)((0,f.AG)((0,f.dt)({epoch:(0,f.Rx)(),effectiveSlot:(0,f.Rx)(),amount:(0,f.Rx)(),postBalance:(0,f.Rx)(),commission:(0,f.jt)((0,f.AG)((0,f.Rx)()))})))),se=(0,f.IX)((0,f.dt)({slot:(0,f.Rx)(),prioritizationFee:(0,f.Rx)()})),ae=(0,f.dt)({total:(0,f.Rx)(),validator:(0,f.Rx)(),foundation:(0,f.Rx)(),epoch:(0,f.Rx)()}),ce=(0,f.dt)({epoch:(0,f.Rx)(),slotIndex:(0,f.Rx)(),slotsInEpoch:(0,f.Rx)(),absoluteSlot:(0,f.Rx)(),blockHeight:(0,f.jt)((0,f.Rx)()),transactionCount:(0,f.jt)((0,f.Rx)())}),ue=(0,f.dt)({slotsPerEpoch:(0,f.Rx)(),leaderScheduleSlotOffset:(0,f.Rx)(),warmup:(0,f.O7)(),firstNormalEpoch:(0,f.Rx)(),firstNormalSlot:(0,f.Rx)()}),de=(0,f.IM)((0,f.Z_)(),(0,f.IX)((0,f.Rx)())),le=(0,f.AG)((0,f.G0)([(0,f.dt)({}),(0,f.Z_)()])),he=(0,f.dt)({err:le}),fe=(0,f.i0)("receivedSignature"),pe=(0,f.dt)({"solana-core":(0,f.Z_)(),"feature-set":(0,f.jt)((0,f.Rx)())}),me=ee((0,f.dt)({err:(0,f.AG)((0,f.G0)([(0,f.dt)({}),(0,f.Z_)()])),logs:(0,f.AG)((0,f.IX)((0,f.Z_)())),accounts:(0,f.jt)((0,f.AG)((0,f.IX)((0,f.AG)((0,f.dt)({executable:(0,f.O7)(),owner:(0,f.Z_)(),lamports:(0,f.Rx)(),data:(0,f.IX)((0,f.Z_)()),rentEpoch:(0,f.jt)((0,f.Rx)())}))))),unitsConsumed:(0,f.jt)((0,f.Rx)()),returnData:(0,f.jt)((0,f.AG)((0,f.dt)({programId:(0,f.Z_)(),data:(0,f.bc)([(0,f.Z_)(),(0,f.i0)("base64")])})))})),ye=ee((0,f.dt)({byIdentity:(0,f.IM)((0,f.Z_)(),(0,f.IX)((0,f.Rx)())),range:(0,f.dt)({firstSlot:(0,f.Rx)(),lastSlot:(0,f.Rx)()})})),ge=te(ie),be=te(ae),ke=te(se),we=te(ce),Ie=te(ue),Ae=te(de),Se=te((0,f.Rx)()),_e=ee((0,f.dt)({total:(0,f.Rx)(),circulating:(0,f.Rx)(),nonCirculating:(0,f.Rx)(),nonCirculatingAccounts:(0,f.IX)(Gt)})),Te=(0,f.dt)({amount:(0,f.Z_)(),uiAmount:(0,f.AG)((0,f.Rx)()),decimals:(0,f.Rx)(),uiAmountString:(0,f.jt)((0,f.Z_)())}),xe=ee((0,f.IX)((0,f.dt)({address:Gt,amount:(0,f.Z_)(),uiAmount:(0,f.AG)((0,f.Rx)()),decimals:(0,f.Rx)(),uiAmountString:(0,f.jt)((0,f.Z_)())}))),ve=ee((0,f.IX)((0,f.dt)({pubkey:Gt,account:(0,f.dt)({executable:(0,f.O7)(),owner:Gt,lamports:(0,f.Rx)(),data:$t,rentEpoch:(0,f.Rx)()})}))),Ee=(0,f.dt)({program:(0,f.Z_)(),parsed:(0,f._4)(),space:(0,f.Rx)()}),Pe=ee((0,f.IX)((0,f.dt)({pubkey:Gt,account:(0,f.dt)({executable:(0,f.O7)(),owner:Gt,lamports:(0,f.Rx)(),data:Ee,rentEpoch:(0,f.Rx)()})}))),Be=ee((0,f.IX)((0,f.dt)({lamports:(0,f.Rx)(),address:Gt}))),Re=(0,f.dt)({executable:(0,f.O7)(),owner:Gt,lamports:(0,f.Rx)(),data:$t,rentEpoch:(0,f.Rx)()}),Ce=(0,f.dt)({pubkey:Gt,account:Re}),We=(0,f.oQ)((0,f.G0)([(0,f.eE)(r.Buffer),Ee]),(0,f.G0)([Vt,Ee]),(t=>Array.isArray(t)?(0,f.Ue)(t,$t):t)),ze=(0,f.dt)({executable:(0,f.O7)(),owner:Gt,lamports:(0,f.Rx)(),data:We,rentEpoch:(0,f.Rx)()}),Le=(0,f.dt)({pubkey:Gt,account:ze}),Oe=(0,f.dt)({state:(0,f.G0)([(0,f.i0)("active"),(0,f.i0)("inactive"),(0,f.i0)("activating"),(0,f.i0)("deactivating")]),active:(0,f.Rx)(),inactive:(0,f.Rx)()}),Ue=te((0,f.IX)((0,f.dt)({signature:(0,f.Z_)(),slot:(0,f.Rx)(),err:le,memo:(0,f.AG)((0,f.Z_)()),blockTime:(0,f.jt)((0,f.AG)((0,f.Rx)()))}))),je=te((0,f.IX)((0,f.dt)({signature:(0,f.Z_)(),slot:(0,f.Rx)(),err:le,memo:(0,f.AG)((0,f.Z_)()),blockTime:(0,f.jt)((0,f.AG)((0,f.Rx)()))}))),Ke=(0,f.dt)({subscription:(0,f.Rx)(),result:ne(Re)}),Ne=(0,f.dt)({pubkey:Gt,account:Re}),Me=(0,f.dt)({subscription:(0,f.Rx)(),result:ne(Ne)}),De=(0,f.dt)({parent:(0,f.Rx)(),slot:(0,f.Rx)(),root:(0,f.Rx)()}),Fe=(0,f.dt)({subscription:(0,f.Rx)(),result:De}),qe=(0,f.G0)([(0,f.dt)({type:(0,f.G0)([(0,f.i0)("firstShredReceived"),(0,f.i0)("completed"),(0,f.i0)("optimisticConfirmation"),(0,f.i0)("root")]),slot:(0,f.Rx)(),timestamp:(0,f.Rx)()}),(0,f.dt)({type:(0,f.i0)("createdBank"),parent:(0,f.Rx)(),slot:(0,f.Rx)(),timestamp:(0,f.Rx)()}),(0,f.dt)({type:(0,f.i0)("frozen"),slot:(0,f.Rx)(),timestamp:(0,f.Rx)(),stats:(0,f.dt)({numTransactionEntries:(0,f.Rx)(),numSuccessfulTransactions:(0,f.Rx)(),numFailedTransactions:(0,f.Rx)(),maxTransactionsPerEntry:(0,f.Rx)()})}),(0,f.dt)({type:(0,f.i0)("dead"),slot:(0,f.Rx)(),timestamp:(0,f.Rx)(),err:(0,f.Z_)()})]),He=(0,f.dt)({subscription:(0,f.Rx)(),result:qe}),Ze=(0,f.dt)({subscription:(0,f.Rx)(),result:ne((0,f.G0)([he,fe]))}),Ge=(0,f.dt)({subscription:(0,f.Rx)(),result:(0,f.Rx)()}),Ve=(0,f.dt)({pubkey:(0,f.Z_)(),gossip:(0,f.AG)((0,f.Z_)()),tpu:(0,f.AG)((0,f.Z_)()),rpc:(0,f.AG)((0,f.Z_)()),version:(0,f.AG)((0,f.Z_)())}),$e=(0,f.dt)({votePubkey:(0,f.Z_)(),nodePubkey:(0,f.Z_)(),activatedStake:(0,f.Rx)(),epochVoteAccount:(0,f.O7)(),epochCredits:(0,f.IX)((0,f.bc)([(0,f.Rx)(),(0,f.Rx)(),(0,f.Rx)()])),commission:(0,f.Rx)(),lastVote:(0,f.Rx)(),rootSlot:(0,f.AG)((0,f.Rx)())}),Xe=te((0,f.dt)({current:(0,f.IX)($e),delinquent:(0,f.IX)($e)})),Ye=(0,f.G0)([(0,f.i0)("processed"),(0,f.i0)("confirmed"),(0,f.i0)("finalized")]),Je=(0,f.dt)({slot:(0,f.Rx)(),confirmations:(0,f.AG)((0,f.Rx)()),err:le,confirmationStatus:(0,f.jt)(Ye)}),Qe=ee((0,f.IX)((0,f.AG)(Je))),tn=te((0,f.Rx)()),en=(0,f.dt)({accountKey:Gt,writableIndexes:(0,f.IX)((0,f.Rx)()),readonlyIndexes:(0,f.IX)((0,f.Rx)())}),nn=(0,f.dt)({signatures:(0,f.IX)((0,f.Z_)()),message:(0,f.dt)({accountKeys:(0,f.IX)((0,f.Z_)()),header:(0,f.dt)({numRequiredSignatures:(0,f.Rx)(),numReadonlySignedAccounts:(0,f.Rx)(),numReadonlyUnsignedAccounts:(0,f.Rx)()}),instructions:(0,f.IX)((0,f.dt)({accounts:(0,f.IX)((0,f.Rx)()),data:(0,f.Z_)(),programIdIndex:(0,f.Rx)()})),recentBlockhash:(0,f.Z_)(),addressTableLookups:(0,f.jt)((0,f.IX)(en))})}),rn=(0,f.dt)({pubkey:Gt,signer:(0,f.O7)(),writable:(0,f.O7)(),source:(0,f.jt)((0,f.G0)([(0,f.i0)("transaction"),(0,f.i0)("lookupTable")]))}),on=(0,f.dt)({accountKeys:(0,f.IX)(rn),signatures:(0,f.IX)((0,f.Z_)())}),sn=(0,f.dt)({parsed:(0,f._4)(),program:(0,f.Z_)(),programId:Gt}),an=(0,f.dt)({accounts:(0,f.IX)(Gt),data:(0,f.Z_)(),programId:Gt}),cn=(0,f.G0)([an,sn]),un=(0,f.G0)([(0,f.dt)({parsed:(0,f._4)(),program:(0,f.Z_)(),programId:(0,f.Z_)()}),(0,f.dt)({accounts:(0,f.IX)((0,f.Z_)()),data:(0,f.Z_)(),programId:(0,f.Z_)()})]),dn=(0,f.oQ)(cn,un,(t=>"accounts"in t?(0,f.Ue)(t,an):(0,f.Ue)(t,sn))),ln=(0,f.dt)({signatures:(0,f.IX)((0,f.Z_)()),message:(0,f.dt)({accountKeys:(0,f.IX)(rn),instructions:(0,f.IX)(dn),recentBlockhash:(0,f.Z_)(),addressTableLookups:(0,f.jt)((0,f.AG)((0,f.IX)(en)))})}),hn=(0,f.dt)({accountIndex:(0,f.Rx)(),mint:(0,f.Z_)(),owner:(0,f.jt)((0,f.Z_)()),uiTokenAmount:Te}),fn=(0,f.dt)({writable:(0,f.IX)(Gt),readonly:(0,f.IX)(Gt)}),pn=(0,f.dt)({err:le,fee:(0,f.Rx)(),innerInstructions:(0,f.jt)((0,f.AG)((0,f.IX)((0,f.dt)({index:(0,f.Rx)(),instructions:(0,f.IX)((0,f.dt)({accounts:(0,f.IX)((0,f.Rx)()),data:(0,f.Z_)(),programIdIndex:(0,f.Rx)()}))})))),preBalances:(0,f.IX)((0,f.Rx)()),postBalances:(0,f.IX)((0,f.Rx)()),logMessages:(0,f.jt)((0,f.AG)((0,f.IX)((0,f.Z_)()))),preTokenBalances:(0,f.jt)((0,f.AG)((0,f.IX)(hn))),postTokenBalances:(0,f.jt)((0,f.AG)((0,f.IX)(hn))),loadedAddresses:(0,f.jt)(fn),computeUnitsConsumed:(0,f.jt)((0,f.Rx)())}),mn=(0,f.dt)({err:le,fee:(0,f.Rx)(),innerInstructions:(0,f.jt)((0,f.AG)((0,f.IX)((0,f.dt)({index:(0,f.Rx)(),instructions:(0,f.IX)(dn)})))),preBalances:(0,f.IX)((0,f.Rx)()),postBalances:(0,f.IX)((0,f.Rx)()),logMessages:(0,f.jt)((0,f.AG)((0,f.IX)((0,f.Z_)()))),preTokenBalances:(0,f.jt)((0,f.AG)((0,f.IX)(hn))),postTokenBalances:(0,f.jt)((0,f.AG)((0,f.IX)(hn))),loadedAddresses:(0,f.jt)(fn),computeUnitsConsumed:(0,f.jt)((0,f.Rx)())}),yn=(0,f.G0)([(0,f.i0)(0),(0,f.i0)("legacy")]),gn=(0,f.dt)({pubkey:(0,f.Z_)(),lamports:(0,f.Rx)(),postBalance:(0,f.AG)((0,f.Rx)()),rewardType:(0,f.AG)((0,f.Z_)()),commission:(0,f.jt)((0,f.AG)((0,f.Rx)()))}),bn=te((0,f.AG)((0,f.dt)({blockhash:(0,f.Z_)(),previousBlockhash:(0,f.Z_)(),parentSlot:(0,f.Rx)(),transactions:(0,f.IX)((0,f.dt)({transaction:nn,meta:(0,f.AG)(pn),version:(0,f.jt)(yn)})),rewards:(0,f.jt)((0,f.IX)(gn)),blockTime:(0,f.AG)((0,f.Rx)()),blockHeight:(0,f.AG)((0,f.Rx)())}))),kn=te((0,f.AG)((0,f.dt)({blockhash:(0,f.Z_)(),previousBlockhash:(0,f.Z_)(),parentSlot:(0,f.Rx)(),rewards:(0,f.jt)((0,f.IX)(gn)),blockTime:(0,f.AG)((0,f.Rx)()),blockHeight:(0,f.AG)((0,f.Rx)())}))),wn=te((0,f.AG)((0,f.dt)({blockhash:(0,f.Z_)(),previousBlockhash:(0,f.Z_)(),parentSlot:(0,f.Rx)(),transactions:(0,f.IX)((0,f.dt)({transaction:on,meta:(0,f.AG)(pn),version:(0,f.jt)(yn)})),rewards:(0,f.jt)((0,f.IX)(gn)),blockTime:(0,f.AG)((0,f.Rx)()),blockHeight:(0,f.AG)((0,f.Rx)())}))),In=te((0,f.AG)((0,f.dt)({blockhash:(0,f.Z_)(),previousBlockhash:(0,f.Z_)(),parentSlot:(0,f.Rx)(),transactions:(0,f.IX)((0,f.dt)({transaction:ln,meta:(0,f.AG)(mn),version:(0,f.jt)(yn)})),rewards:(0,f.jt)((0,f.IX)(gn)),blockTime:(0,f.AG)((0,f.Rx)()),blockHeight:(0,f.AG)((0,f.Rx)())}))),An=te((0,f.AG)((0,f.dt)({blockhash:(0,f.Z_)(),previousBlockhash:(0,f.Z_)(),parentSlot:(0,f.Rx)(),transactions:(0,f.IX)((0,f.dt)({transaction:on,meta:(0,f.AG)(mn),version:(0,f.jt)(yn)})),rewards:(0,f.jt)((0,f.IX)(gn)),blockTime:(0,f.AG)((0,f.Rx)()),blockHeight:(0,f.AG)((0,f.Rx)())}))),Sn=te((0,f.AG)((0,f.dt)({blockhash:(0,f.Z_)(),previousBlockhash:(0,f.Z_)(),parentSlot:(0,f.Rx)(),rewards:(0,f.jt)((0,f.IX)(gn)),blockTime:(0,f.AG)((0,f.Rx)()),blockHeight:(0,f.AG)((0,f.Rx)())}))),_n=te((0,f.AG)((0,f.dt)({blockhash:(0,f.Z_)(),previousBlockhash:(0,f.Z_)(),parentSlot:(0,f.Rx)(),transactions:(0,f.IX)((0,f.dt)({transaction:nn,meta:(0,f.AG)(pn)})),rewards:(0,f.jt)((0,f.IX)(gn)),blockTime:(0,f.AG)((0,f.Rx)())}))),Tn=te((0,f.AG)((0,f.dt)({blockhash:(0,f.Z_)(),previousBlockhash:(0,f.Z_)(),parentSlot:(0,f.Rx)(),signatures:(0,f.IX)((0,f.Z_)()),blockTime:(0,f.AG)((0,f.Rx)())}))),xn=te((0,f.AG)((0,f.dt)({slot:(0,f.Rx)(),meta:pn,blockTime:(0,f.jt)((0,f.AG)((0,f.Rx)())),transaction:nn,version:(0,f.jt)(yn)}))),vn=te((0,f.AG)((0,f.dt)({slot:(0,f.Rx)(),transaction:ln,meta:(0,f.AG)(mn),blockTime:(0,f.jt)((0,f.AG)((0,f.Rx)())),version:(0,f.jt)(yn)}))),En=ee((0,f.dt)({blockhash:(0,f.Z_)(),feeCalculator:(0,f.dt)({lamportsPerSignature:(0,f.Rx)()})})),Pn=ee((0,f.dt)({blockhash:(0,f.Z_)(),lastValidBlockHeight:(0,f.Rx)()})),Bn=(0,f.dt)({slot:(0,f.Rx)(),numTransactions:(0,f.Rx)(),numSlots:(0,f.Rx)(),samplePeriodSecs:(0,f.Rx)()}),Rn=te((0,f.IX)(Bn)),Cn=ee((0,f.AG)((0,f.dt)({feeCalculator:(0,f.dt)({lamportsPerSignature:(0,f.Rx)()})}))),Wn=te((0,f.Z_)()),zn=te((0,f.Z_)()),Ln=(0,f.dt)({err:le,logs:(0,f.IX)((0,f.Z_)()),signature:(0,f.Z_)()}),On=(0,f.dt)({result:ne(Ln),subscription:(0,f.Rx)()}),Un={"solana-client":"js/0.0.0-development"};class jn{constructor(t,e){let n,r,i,o,s,a;var c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{const{commitment:n,config:r}=Yt(e),i=this._buildArgs([],n,void 0,r),o=Ot(i);return t[o]=t[o]??(async()=>{try{const e=await this._rpcRequest("getBlockHeight",i),n=(0,f.Ue)(e,te((0,f.Rx)()));if("error"in n)throw new Mt(n.error,"failed to get block height information");return n.result}finally{delete t[o]}})(),await t[o]}})(),e&&"string"==typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,r=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,s=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=function(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}(t),this._rpcWsEndpoint=n||function(t){const e=t.match(Zt);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,o]=e,s=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${s}//${r}${null==a?"":`:${a+1}`}${o}`}(t),this._rpcClient=function(t,e,n,r,i,o){const s=n||Dt;let a;return null!=o&&w.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),r&&(a=async(t,e)=>{const n=await new Promise(((n,i)=>{try{r(t,e,((t,e)=>n([t,e])))}catch(t){i(t)}}));return await s(...n)}),new(m())((async(n,r)=>{const o={method:"POST",body:n,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},e||{},Un)};try{let e,n=5,c=500;for(;e=a?await a(t,o):await s(t,o),429===e.status&&!0!==i&&(n-=1,0!==n);)w.log(`Server responded with ${e.status} ${e.statusText}.  Retrying after ${c}ms delay...`),await bt(c),c*=2;const u=await e.text();e.ok?r(null,u):r(new Error(`${e.status} ${e.statusText}: ${u}`))}catch(t){t instanceof Error&&r(t)}}),{})}(t,r,i,o,s,a),this._rpcRequest=(c=this._rpcClient,(t,e)=>new Promise(((n,r)=>{c.request(t,e,((t,e)=>{t?r(t):n(e)}))}))),this._rpcBatchRequest=function(t){return e=>new Promise(((n,r)=>{0===e.length&&n([]);const i=e.map((e=>t.request(e.methodName,e.args)));t.request(i,((t,e)=>{t?r(t):n(e)}))}))}(this._rpcClient),this._rpcWebSocket=new Ft(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:r}=Yt(e),i=this._buildArgs([t.toBase58()],n,void 0,r),o=await this._rpcRequest("getBalance",i),s=(0,f.Ue)(o,ee((0,f.Rx)()));if("error"in s)throw new Mt(s.error,`failed to get balance for ${t.toBase58()}`);return s.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then((t=>t.value)).catch((e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}))}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=(0,f.Ue)(e,te((0,f.AG)((0,f.Rx)())));if("error"in n)throw new Mt(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=(0,f.Ue)(t,te((0,f.Rx)()));if("error"in e)throw new Mt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=(0,f.Ue)(t,Se);if("error"in e)throw new Mt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};e="string"==typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),r=(0,f.Ue)(n,_e);if("error"in r)throw new Mt(r.error,"failed to get supply");return r.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),r=await this._rpcRequest("getTokenSupply",n),i=(0,f.Ue)(r,ee(Te));if("error"in i)throw new Mt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),r=await this._rpcRequest("getTokenAccountBalance",n),i=(0,f.Ue)(r,ee(Te));if("error"in i)throw new Mt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:r,config:i}=Yt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const s=this._buildArgs(o,r,"base64",i),a=await this._rpcRequest("getTokenAccountsByOwner",s),c=(0,f.Ue)(a,ve);if("error"in c)throw new Mt(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(t,e,n){let r=[t.toBase58()];"mint"in e?r.push({mint:e.mint.toBase58()}):r.push({programId:e.programId.toBase58()});const i=this._buildArgs(r,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),s=(0,f.Ue)(o,Pe);if("error"in s)throw new Mt(s.error,`failed to get token accounts owned by account ${t.toBase58()}`);return s.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],r=await this._rpcRequest("getLargestAccounts",n),i=(0,f.Ue)(r,Be);if("error"in i)throw new Mt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),r=await this._rpcRequest("getTokenLargestAccounts",n),i=(0,f.Ue)(r,xe);if("error"in i)throw new Mt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:r}=Yt(e),i=this._buildArgs([t.toBase58()],n,"base64",r),o=await this._rpcRequest("getAccountInfo",i),s=(0,f.Ue)(o,ee((0,f.AG)(Re)));if("error"in s)throw new Mt(s.error,`failed to get info about account ${t.toBase58()}`);return s.result}async getParsedAccountInfo(t,e){const{commitment:n,config:r}=Yt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",r),o=await this._rpcRequest("getAccountInfo",i),s=(0,f.Ue)(o,ee((0,f.AG)(ze)));if("error"in s)throw new Mt(s.error,`failed to get info about account ${t.toBase58()}`);return s.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(e){throw new Error("failed to get info about account "+t.toBase58()+": "+e)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:r}=Yt(e),i=t.map((t=>t.toBase58())),o=this._buildArgs([i],n,"jsonParsed",r),s=await this._rpcRequest("getMultipleAccounts",o),a=(0,f.Ue)(s,ee((0,f.IX)((0,f.AG)(ze))));if("error"in a)throw new Mt(a.error,`failed to get info for accounts ${i}`);return a.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:r}=Yt(e),i=t.map((t=>t.toBase58())),o=this._buildArgs([i],n,"base64",r),s=await this._rpcRequest("getMultipleAccounts",o),a=(0,f.Ue)(s,ee((0,f.IX)((0,f.AG)(Re))));if("error"in a)throw new Mt(a.error,`failed to get info for accounts ${i}`);return a.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:r,config:i}=Yt(e),o=this._buildArgs([t.toBase58()],r,void 0,{...i,epoch:null!=n?n:i?.epoch}),s=await this._rpcRequest("getStakeActivation",o),a=(0,f.Ue)(s,te(Oe));if("error"in a)throw new Mt(a.error,`failed to get Stake Activation ${t.toBase58()}`);return a.result}async getProgramAccounts(t,e){const{commitment:n,config:r}=Yt(e),{encoding:i,...o}=r||{},s=this._buildArgs([t.toBase58()],n,i||"base64",o),a=await this._rpcRequest("getProgramAccounts",s),c=(0,f.IX)(Ce),u=!0===o.withContext?(0,f.Ue)(a,ee(c)):(0,f.Ue)(a,te(c));if("error"in u)throw new Mt(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:r}=Yt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",r),o=await this._rpcRequest("getProgramAccounts",i),s=(0,f.Ue)(o,te((0,f.IX)(Le)));if("error"in s)throw new Mt(s.error,`failed to get accounts owned by program ${t.toBase58()}`);return s.result}async confirmTransaction(t,e){let n,r;if("string"==typeof t)n=t;else{const e=t;if(e.abortSignal?.aborted)return Promise.reject(e.abortSignal.reason);n=e.signature}try{r=c().decode(n)}catch(t){throw new Error("signature must be base58 encoded: "+n)}return Y(64===r.length,"signature has invalid length"),"string"==typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise(((e,n)=>{null!=t&&(t.aborted?n(t.reason):t.addEventListener("abort",(()=>{n(t.reason)})))}))}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,r,i=!1;return{abortConfirmation:()=>{r&&(r(),r=void 0),null!=n&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:new Promise(((o,s)=>{try{n=this.onSignature(e,((t,e)=>{n=void 0;const r={context:e,value:t};o({__type:nt.PROCESSED,response:r})}),t);const a=new Promise((t=>{null==n?t():r=this._onSubscriptionStateChange(n,(e=>{"subscribed"===e&&t()}))}));(async()=>{if(await a,i)return;const n=await this.getSignatureStatus(e);if(i)return;if(null==n)return;const{context:r,value:c}=n;if(null!=c)if(c?.err)s(c.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return}i=!0,o({__type:nt.PROCESSED,response:{context:r,value:c}})}})()}catch(t){s(t)}}))}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:r}}){let i=!1;const o=new Promise((e=>{const r=async()=>{try{return await this.getBlockHeight(t)}catch(t){return-1}};(async()=>{let t=await r();if(!i){for(;t<=n;){if(await bt(1e3),i)return;if(t=await r(),i)return}e({__type:nt.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:r}),c=this.getCancellationPromise(e);let u;try{const t=await Promise.race([c,a,o]);if(t.__type!==nt.PROCESSED)throw new M(r);u=t.response}finally{i=!0,s()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:r,nonceValue:i,signature:o}}){let s=!1;const a=new Promise((e=>{let o=i,a=null;const c=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(r,{commitment:t,minContextSlot:n});return a=e.slot,i?.nonce}catch(t){return o}};(async()=>{if(o=await c(),!s)for(;;){if(i!==o)return void e({__type:nt.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await bt(2e3),s)return;if(o=await c(),s)return}})()})),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),d=this.getCancellationPromise(e);let l;try{const e=await Promise.race([d,u,a]);if(e.__type===nt.PROCESSED)l=e.response;else{let r;for(;;){const t=await this.getSignatureStatus(o);if(null==t)break;if(!(t.context.slot<(e.slotInWhichNonceDidAdvance??n))){r=t;break}await bt(400)}if(!r?.value)throw new F(o);{const e=t||"finalized",{confirmationStatus:n}=r.value;switch(e){case"processed":case"recent":if("processed"!==n&&"confirmed"!==n&&"finalized"!==n)throw new F(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==n&&"finalized"!==n)throw new F(o);break;case"finalized":case"max":case"root":if("finalized"!==n)throw new F(o)}l={context:r.context,value:{err:r.value.err}}}}}finally{s=!0,c()}return l}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const r=new Promise((e=>{let r=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":r=this._confirmTransactionInitialTimeout||3e4}n=setTimeout((()=>e({__type:nt.TIMED_OUT,timeoutMs:r})),r)})),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let s;try{const t=await Promise.race([o,r]);if(t.__type!==nt.PROCESSED)throw new D(e,t.timeoutMs/1e3);s=t.response}finally{clearTimeout(n),i()}return s}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=(0,f.Ue)(t,te((0,f.IX)(Ve)));if("error"in e)throw new Mt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),r=(0,f.Ue)(n,Xe);if("error"in r)throw new Mt(r.error,"failed to get vote accounts");return r.result}async getSlot(t){const{commitment:e,config:n}=Yt(t),r=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",r),o=(0,f.Ue)(i,te((0,f.Rx)()));if("error"in o)throw new Mt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=Yt(t),r=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",r),o=(0,f.Ue)(i,te((0,f.Z_)()));if("error"in o)throw new Mt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],r=await this._rpcRequest("getSlotLeaders",n),i=(0,f.Ue)(r,te((0,f.IX)(Gt)));if("error"in i)throw new Mt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:r}=await this.getSignatureStatuses([t],e);return Y(1===r.length),{context:n,value:r[0]}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const r=await this._rpcRequest("getSignatureStatuses",n),i=(0,f.Ue)(r,Qe);if("error"in i)throw new Mt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=Yt(t),r=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",r),o=(0,f.Ue)(i,te((0,f.Rx)()));if("error"in o)throw new Mt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),r=(0,f.Ue)(n,ge);if("error"in r)throw new Mt(r.error,"failed to get inflation");return r.result}async getInflationReward(t,e,n){const{commitment:r,config:i}=Yt(n),o=this._buildArgs([t.map((t=>t.toBase58()))],r,void 0,{...i,epoch:null!=e?e:i?.epoch}),s=await this._rpcRequest("getInflationReward",o),a=(0,f.Ue)(s,oe);if("error"in a)throw new Mt(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=(0,f.Ue)(t,be);if("error"in e)throw new Mt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=Yt(t),r=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",r),o=(0,f.Ue)(i,we);if("error"in o)throw new Mt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=(0,f.Ue)(t,Ie);if("error"in e)throw new Mt(e.error,"failed to get epoch schedule");const n=e.result;return new jt(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=(0,f.Ue)(t,Ae);if("error"in e)throw new Mt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),r=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=(0,f.Ue)(r,tn);return"error"in i?(w.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",e),r=(0,f.Ue)(n,En);if("error"in r)throw new Mt(r.error,"failed to get recent blockhash");return r.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=(0,f.Ue)(e,Rn);if("error"in n)throw new Mt(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),r=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=(0,f.Ue)(r,Cn);if("error"in i)throw new Mt(i.error,"failed to get fee calculator");const{context:o,value:s}=i.result;return{context:o,value:null!==s?s.feeCalculator:null}}async getFeeForMessage(t,e){const n=v(t.serialize()).toString("base64"),r=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",r),o=(0,f.Ue)(i,ee((0,f.AG)((0,f.Rx)())));if("error"in o)throw new Mt(o.error,"failed to get fee for message");if(null===o.result)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map((t=>t.toBase58())),n=this._buildArgs(e?.length?[e]:[]),r=await this._rpcRequest("getRecentPrioritizationFees",n),i=(0,f.Ue)(r,ke);if("error"in i)throw new Mt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=Yt(t),r=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",r),o=(0,f.Ue)(i,Pn);if("error"in o)throw new Mt(o.error,"failed to get latest blockhash");return o.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=(0,f.Ue)(t,te(pe));if("error"in e)throw new Mt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=(0,f.Ue)(t,te((0,f.Z_)()));if("error"in e)throw new Mt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:r}=Yt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,r),o=await this._rpcRequest("getBlock",i);try{switch(r?.transactionDetails){case"accounts":{const t=(0,f.Ue)(o,wn);if("error"in t)throw t.error;return t.result}case"none":{const t=(0,f.Ue)(o,kn);if("error"in t)throw t.error;return t.result}default:{const t=(0,f.Ue)(o,bn);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map((({transaction:t,meta:e,version:n})=>({meta:e,transaction:{...t,message:re(n,t.message)},version:n})))}:null}}}catch(t){throw new Mt(t,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:r}=Yt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",r),o=await this._rpcRequest("getBlock",i);try{switch(r?.transactionDetails){case"accounts":{const t=(0,f.Ue)(o,An);if("error"in t)throw t.error;return t.result}case"none":{const t=(0,f.Ue)(o,Sn);if("error"in t)throw t.error;return t.result}default:{const t=(0,f.Ue)(o,In);if("error"in t)throw t.error;return t.result}}}catch(t){throw new Mt(t,"failed to get block")}}async getBlockProduction(t){let e,n;if("string"==typeof t)n=t;else if(t){const{commitment:r,...i}=t;n=r,e=i}const r=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",r),o=(0,f.Ue)(i,ye);if("error"in o)throw new Mt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:r}=Yt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,r),o=await this._rpcRequest("getTransaction",i),s=(0,f.Ue)(o,xn);if("error"in s)throw new Mt(s.error,"failed to get transaction");const a=s.result;return a?{...a,transaction:{...a.transaction,message:re(a.version,a.transaction.message)}}:a}async getParsedTransaction(t,e){const{commitment:n,config:r}=Yt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",r),o=await this._rpcRequest("getTransaction",i),s=(0,f.Ue)(o,vn);if("error"in s)throw new Mt(s.error,"failed to get transaction");return s.result}async getParsedTransactions(t,e){const{commitment:n,config:r}=Yt(e),i=t.map((t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",r)})));return(await this._rpcBatchRequest(i)).map((t=>{const e=(0,f.Ue)(t,vn);if("error"in e)throw new Mt(e.error,"failed to get transactions");return e.result}))}async getTransactions(t,e){const{commitment:n,config:r}=Yt(e),i=t.map((t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],n,void 0,r)})));return(await this._rpcBatchRequest(i)).map((t=>{const e=(0,f.Ue)(t,xn);if("error"in e)throw new Mt(e.error,"failed to get transactions");const n=e.result;return n?{...n,transaction:{...n.transaction,message:re(n.version,n.transaction.message)}}:n}))}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),r=await this._rpcRequest("getConfirmedBlock",n),i=(0,f.Ue)(r,_n);if("error"in i)throw new Mt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const s={...o,transactions:o.transactions.map((({transaction:t,meta:e})=>{const n=new Q(t.message);return{meta:e,transaction:{...t,message:n}}}))};return{...s,transactions:s.transactions.map((({transaction:t,meta:e})=>({meta:e,transaction:ot.populate(t.message,t.signatures)})))}}async getBlocks(t,e,n){const r=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",r),o=(0,f.Ue)(i,te((0,f.IX)((0,f.Rx)())));if("error"in o)throw new Mt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),r=await this._rpcRequest("getBlock",n),i=(0,f.Ue)(r,Tn);if("error"in i)throw new Mt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),r=await this._rpcRequest("getConfirmedBlock",n),i=(0,f.Ue)(r,Tn);if("error"in i)throw new Mt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),r=await this._rpcRequest("getConfirmedTransaction",n),i=(0,f.Ue)(r,xn);if("error"in i)throw new Mt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const s=new Q(o.transaction.message),a=o.transaction.signatures;return{...o,transaction:ot.populate(s,a)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),r=await this._rpcRequest("getConfirmedTransaction",n),i=(0,f.Ue)(r,vn);if("error"in i)throw new Mt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map((t=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([t],e,"jsonParsed")})));return(await this._rpcBatchRequest(n)).map((t=>{const e=(0,f.Ue)(t,vn);if("error"in e)throw new Mt(e.error,"failed to get confirmed transactions");return e.result}))}async getConfirmedSignaturesForAddress(t,e,n){let r={},i=await this.getFirstAvailableBlock();for(;!("until"in r)&&!(--e<=0||e<i);)try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(r.until=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}let o=await this.getSlot("finalized");for(;!("before"in r||++n>o);)try{const t=await this.getConfirmedBlockSignatures(n);t.signatures.length>0&&(r.before=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}return(await this.getConfirmedSignaturesForAddress2(t,r)).map((t=>t.signature))}async getConfirmedSignaturesForAddress2(t,e,n){const r=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",r),o=(0,f.Ue)(i,Ue);if("error"in o)throw new Mt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const r=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",r),o=(0,f.Ue)(i,je);if("error"in o)throw new Mt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:r}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==r&&(i=new qt({key:t,state:qt.deserialize(r.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:r}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==r&&(i=_t.fromAccountData(r.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then((t=>t.value)).catch((e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}))}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),r=(0,f.Ue)(n,Wn);if("error"in r)throw new Mt(r.error,`airdrop to ${t.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await bt(100);const t=Date.now()-this._blockhashInfo.lastFetch>=Xt;if(null!==this._blockhashInfo.latestBlockhash&&!t)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let t=0;t<50;t++){const t=await this.getLatestBlockhash("finalized");if(n!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await bt(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=Yt(t),r=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",r),o=(0,f.Ue)(i,ee((0,f.Rx)()));if("error"in o)throw new Mt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const i=t.serialize(),o=r.Buffer.from(i).toString("base64");if(Array.isArray(e)||void 0!==n)throw new Error("Invalid arguments");const s=e||{};s.encoding="base64","commitment"in s||(s.commitment=this.commitment);const a=[o,s],c=await this._rpcRequest("simulateTransaction",a),u=(0,f.Ue)(c,me);if("error"in u)throw new Error("failed to simulate transaction: "+u.error.message);return u.result}let i;if(t instanceof ot){let e=t;i=new ot,i.feePayer=e.feePayer,i.instructions=t.instructions,i.nonceInfo=e.nonceInfo,i.signatures=e.signatures}else i=ot.populate(t),i._message=i._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const o=e;if(i.nonceInfo&&o)i.sign(...o);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(i.lastValidBlockHeight=e.lastValidBlockHeight,i.recentBlockhash=e.blockhash,!o)break;if(i.sign(...o),!i.signature)throw new Error("!signature");const n=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(n)&&!this._blockhashInfo.transactionSignatures.includes(n)){this._blockhashInfo.simulatedSignatures.push(n);break}t=!0}}const s=i._compile(),a=s.serialize(),c=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(n){const t=(Array.isArray(n)?n:s.nonProgramIds()).map((t=>t.toBase58()));u.accounts={encoding:"base64",addresses:t}}o&&(u.sigVerify=!0);const d=[c,u],l=await this._rpcRequest("simulateTransaction",d),h=(0,f.Ue)(l,me);if("error"in h){let t;if("data"in h.error&&(t=h.error.data.logs,t&&Array.isArray(t))){const e="\n    ",n=e+t.join(e);w.error(h.error.message,n)}throw new Kt("failed to simulate transaction: "+h.error.message,t)}return h.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const n=t.serialize();return await this.sendRawTransaction(n,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const r=e;if(t.nonceInfo)t.sign(...r);else{let e=this._disableBlockhashCaching;for(;;){const n=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=n.lastValidBlockHeight,t.recentBlockhash=n.blockhash,t.sign(...r),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=v(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},r=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(n.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(n.minContextSlot=e.minContextSlot),r&&(n.skipPreflight=r),i&&(n.preflightCommitment=i);const o=[t,n],s=await this._rpcRequest("sendTransaction",o),a=(0,f.Ue)(s,zn);if("error"in a){let t;throw"data"in a.error&&(t=a.error.data.logs),new Kt("failed to send transaction: "+a.error.message,t)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,w.error("ws error:",t.message)}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([t,e])=>{this._setSubscription(t,{...e,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(t,e){const n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const n=this._subscriptionStateChangeCallbacksByHash[t];n&&n.forEach((t=>{try{t(e.state)}catch{}}))}}_onSubscriptionStateChange(t,e){const n=this._subscriptionHashByClientSubscriptionId[t];if(null==n)return()=>{};const r=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return r.add(e),()=>{r.delete(e),0===r.size&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){t instanceof Error&&w.log(`Error when closing socket connection: ${t.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async t=>{const n=this._subscriptionsByHash[t];if(void 0!==n)switch(n.state){case"pending":case"unsubscribed":if(0===n.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===n.state&&delete this._subscriptionCallbacksByServerSubscriptionId[n.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:r,method:i}=n;try{this._setSubscription(t,{...n,state:"subscribing"});const e=await this._rpcWebSocket.call(i,r);this._setSubscription(t,{...n,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=n.callbacks,await this._updateSubscriptions()}catch(o){if(o instanceof Error&&w.error(`${i} error for argument`,r,o.message),!e())return;this._setSubscription(t,{...n,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===n.callbacks.size&&await(async()=>{const{serverSubscriptionId:r,unsubscribeMethod:i}=n;if(this._subscriptionsAutoDisposedByRpc.has(r))this._subscriptionsAutoDisposedByRpc.delete(r);else{this._setSubscription(t,{...n,state:"unsubscribing"}),this._setSubscription(t,{...n,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[r])}catch(r){if(r instanceof Error&&w.error(`${i} error:`,r.message),!e())return;return this._setSubscription(t,{...n,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...n,state:"unsubscribed"}),await this._updateSubscriptions()})()}})))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==n&&n.forEach((t=>{try{t(...e)}catch(t){w.error(t)}}))}_wsOnAccountNotification(t){const{result:e,subscription:n}=(0,f.Ue)(t,Ke);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,r=Ot([t.method,e]),i=this._subscriptionsByHash[r];return void 0===i?this._subscriptionsByHash[r]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=r,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const e=this._subscriptionsByHash[r];Y(void 0!==e,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const r=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},r)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=(0,f.Ue)(t,Me);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,r){const i=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",r?{filters:r}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const r=this._buildArgs(["object"==typeof t?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},r)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=(0,f.Ue)(t,On);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=(0,f.Ue)(t,Fe);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=(0,f.Ue)(t,He);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():w.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,r){const i=e||this._commitment;if(i||n||r){let e={};n&&(e.encoding=n),i&&(e.commitment=i),r&&(e=Object.assign(e,r)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,n,r){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,r)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=(0,f.Ue)(t,Ze);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const r=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,n)=>{if("status"===t.type){e(t.result,n);try{this.removeSignatureListener(i)}catch(t){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},r);return i}onSignatureWithOptions(t,e,n){const{commitment:r,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],r,void 0,i),s=this._makeSubscription({callback:(t,n)=>{e(t,n);try{this.removeSignatureListener(s)}catch(t){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=(0,f.Ue)(t,Ge);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Kn{constructor(t){this._keypair=void 0,this._keypair=t??A()}static generate(){return new Kn(A())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const n=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),r=S(e);for(let t=0;t<32;t++)if(n[t]!==r[t])throw new Error("provided secretKey is invalid")}return new Kn({publicKey:n,secretKey:t})}static fromSeed(t){const e=S(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),new Kn({publicKey:e,secretKey:n})}get publicKey(){return new L(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Nn=Object.freeze({CreateLookupTable:{index:0,layout:l.struct([l.u32("instruction"),Tt("recentSlot"),l.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:l.struct([l.u32("instruction")])},ExtendLookupTable:{index:2,layout:l.struct([l.u32("instruction"),Tt(),l.seq(H(),l.offset(l.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:l.struct([l.u32("instruction")])},CloseLookupTable:{index:4,layout:l.struct([l.u32("instruction")])}});class Mn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=l.u32("instruction").decode(t.data);let n;for(const[t,r]of Object.entries(Nn))if(r.index==e){n=t;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=wt(Nn.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=wt(Nn.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map((t=>new L(t)))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Dn.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class Dn{constructor(){}static createLookupTable(t){const[e,n]=L.findProgramAddressSync([t.authority.toBuffer(),(0,h.toBufferLE)(BigInt(t.recentSlot),8)],this.programId),r=kt(Nn.CreateLookupTable,{recentSlot:BigInt(t.recentSlot),bumpSeed:n}),i=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Et.programId,isSigner:!1,isWritable:!1}];return[new it({programId:this.programId,keys:i,data:r}),e]}static freezeLookupTable(t){const e=kt(Nn.FreezeLookupTable),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new it({programId:this.programId,keys:n,data:e})}static extendLookupTable(t){const e=kt(Nn.ExtendLookupTable,{addresses:t.addresses.map((t=>t.toBytes()))}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Et.programId,isSigner:!1,isWritable:!1}),new it({programId:this.programId,keys:n,data:e})}static deactivateLookupTable(t){const e=kt(Nn.DeactivateLookupTable),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new it({programId:this.programId,keys:n,data:e})}static closeLookupTable(t){const e=kt(Nn.CloseLookupTable),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new it({programId:this.programId,keys:n,data:e})}}Dn.programId=new L("AddressLookupTab1e1111111111111111111111111");class Fn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=l.u8("instruction").decode(t.data);let n;for(const[t,r]of Object.entries(qn))if(r.index==e){n=t;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:n}=wt(qn.RequestUnits,t.data);return{units:e,additionalFee:n}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=wt(qn.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=wt(qn.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=wt(qn.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Hn.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const qn=Object.freeze({RequestUnits:{index:0,layout:l.struct([l.u8("instruction"),l.u32("units"),l.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:l.struct([l.u8("instruction"),l.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:l.struct([l.u8("instruction"),l.u32("units")])},SetComputeUnitPrice:{index:3,layout:l.struct([l.u8("instruction"),Tt("microLamports")])}});class Hn{constructor(){}static requestUnits(t){const e=kt(qn.RequestUnits,t);return new it({keys:[],programId:this.programId,data:e})}static requestHeapFrame(t){const e=kt(qn.RequestHeapFrame,t);return new it({keys:[],programId:this.programId,data:e})}static setComputeUnitLimit(t){const e=kt(qn.SetComputeUnitLimit,t);return new it({keys:[],programId:this.programId,data:e})}static setComputeUnitPrice(t){const e=kt(qn.SetComputeUnitPrice,{microLamports:BigInt(t.microLamports)});return new it({keys:[],programId:this.programId,data:e})}}Hn.programId=new L("ComputeBudget111111111111111111111111111111");const Zn=l.struct([l.u8("numSignatures"),l.u8("padding"),l.u16("signatureOffset"),l.u16("signatureInstructionIndex"),l.u16("publicKeyOffset"),l.u16("publicKeyInstructionIndex"),l.u16("messageDataOffset"),l.u16("messageDataSize"),l.u16("messageInstructionIndex")]);class Gn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:n,signature:i,instructionIndex:o}=t;Y(32===e.length,`Public Key must be 32 bytes but received ${e.length} bytes`),Y(64===i.length,`Signature must be 64 bytes but received ${i.length} bytes`);const s=Zn.span,a=s+e.length,c=a+i.length,u=r.Buffer.alloc(c+n.length),d=null==o?65535:o;return Zn.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:d,publicKeyOffset:s,publicKeyInstructionIndex:d,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:d},u),u.fill(e,s),u.fill(i,a),u.fill(n,c),new it({keys:[],programId:Gn.programId,data:u})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:n,instructionIndex:r}=t;Y(64===e.length,`Private key must be 64 bytes but received ${e.length} bytes`);try{const t=Kn.fromSecretKey(e),i=t.publicKey.toBytes(),o=T(n,t.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:n,signature:o,instructionIndex:r})}catch(t){throw new Error(`Error creating instruction; ${t}`)}}}Gn.programId=new L("Ed25519SigVerify111111111111111111111111111"),k.kA.utils.isValidPrivateKey;const Vn=k.kA.getPublicKey,$n=l.struct([l.u8("numSignatures"),l.u16("signatureOffset"),l.u8("signatureInstructionIndex"),l.u16("ethAddressOffset"),l.u8("ethAddressInstructionIndex"),l.u16("messageDataOffset"),l.u16("messageDataSize"),l.u8("messageInstructionIndex"),l.blob(20,"ethAddress"),l.blob(64,"signature"),l.u8("recoveryId")]);class Xn{constructor(){}static publicKeyToEthAddress(t){Y(64===t.length,`Public key must be 64 bytes but received ${t.length} bytes`);try{return r.Buffer.from((0,b.fr)(v(t))).slice(-20)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:n,signature:r,recoveryId:i,instructionIndex:o}=t;return Xn.createInstructionWithEthAddress({ethAddress:Xn.publicKeyToEthAddress(e),message:n,signature:r,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:n,signature:i,recoveryId:o,instructionIndex:s=0}=t;let a;a="string"==typeof e?e.startsWith("0x")?r.Buffer.from(e.substr(2),"hex"):r.Buffer.from(e,"hex"):e,Y(20===a.length,`Address must be 20 bytes but received ${a.length} bytes`);const c=12+a.length,u=c+i.length+1,d=r.Buffer.alloc($n.span+n.length);return $n.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:s,ethAddressOffset:12,ethAddressInstructionIndex:s,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:s,signature:v(i),ethAddress:v(a),recoveryId:o},d),d.fill(v(n),$n.span),new it({keys:[],programId:Xn.programId,data:d})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:n,instructionIndex:i}=t;Y(32===e.length,`Private key must be 32 bytes but received ${e.length} bytes`);try{const t=v(e),o=Vn(t,!1).slice(1),s=r.Buffer.from((0,b.fr)(v(n))),[a,c]=((t,e)=>{const n=k.kA.sign(t,e);return[n.toCompactRawBytes(),n.recovery]})(s,t);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:a,recoveryId:c,instructionIndex:i})}catch(t){throw new Error(`Error creating instruction; ${t}`)}}}Xn.programId=new L("KeccakSecp256k11111111111111111111111111111");const Yn=new L("StakeConfig11111111111111111111111111111111");class Jn{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Qn{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}Qn.default=new Qn(0,0,L.default);class tr{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=l.u32("instruction").decode(t.data);let n;for(const[t,r]of Object.entries(er))if(r.index==e){n=t;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:n}=wt(er.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Jn(new L(e.staker),new L(e.withdrawer)),lockup:new Qn(n.unixTimestamp,n.epoch,new L(n.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),wt(er.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:n}=wt(er.Authorize,t.data),r={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new L(e),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(r.custodianPubkey=t.keys[3].pubkey),r}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:n,authoritySeed:r,authorityOwner:i}=wt(er.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:r,authorityOwner:new L(i),newAuthorizedPubkey:new L(e),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=wt(er.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),wt(er.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=wt(er.Withdraw,t.data),n={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(n.custodianPubkey=t.keys[5].pubkey),n}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),wt(er.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(rr.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const er=Object.freeze({Initialize:{index:0,layout:l.struct([l.u32("instruction"),((t="authorized")=>l.struct([H("staker"),H("withdrawer")],t))(),((t="lockup")=>l.struct([l.ns64("unixTimestamp"),l.ns64("epoch"),H("custodian")],t))()])},Authorize:{index:1,layout:l.struct([l.u32("instruction"),H("newAuthorized"),l.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:l.struct([l.u32("instruction")])},Split:{index:3,layout:l.struct([l.u32("instruction"),l.ns64("lamports")])},Withdraw:{index:4,layout:l.struct([l.u32("instruction"),l.ns64("lamports")])},Deactivate:{index:5,layout:l.struct([l.u32("instruction")])},Merge:{index:7,layout:l.struct([l.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:l.struct([l.u32("instruction"),H("newAuthorized"),l.u32("stakeAuthorizationType"),G("authoritySeed"),H("authorityOwner")])}}),nr=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class rr{constructor(){}static initialize(t){const{stakePubkey:e,authorized:n,lockup:r}=t,i=r||Qn.default,o=kt(er.Initialize,{authorized:{staker:v(n.staker.toBuffer()),withdrawer:v(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:v(i.custodian.toBuffer())}}),s={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ht,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new it(s)}static createAccountWithSeed(t){const e=new ot;e.add(Et.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:r,lockup:i}=t;return e.add(this.initialize({stakePubkey:n,authorized:r,lockup:i}))}static createAccount(t){const e=new ot;e.add(Et.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:r,lockup:i}=t;return e.add(this.initialize({stakePubkey:n,authorized:r,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:n,votePubkey:r}=t,i=kt(er.Delegate);return(new ot).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:yt,isSigner:!1,isWritable:!1},{pubkey:Yn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(t){const{stakePubkey:e,authorizedPubkey:n,newAuthorizedPubkey:r,stakeAuthorizationType:i,custodianPubkey:o}=t,s=kt(er.Authorize,{newAuthorized:v(r.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!1,isWritable:!1}),(new ot).add({keys:a,programId:this.programId,data:s})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:n,authoritySeed:r,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:s,custodianPubkey:a}=t,c=kt(er.AuthorizeWithSeed,{newAuthorized:v(o.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:r,authorityOwner:v(i.toBuffer())}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:ct,isSigner:!1,isWritable:!1}];return a&&u.push({pubkey:a,isSigner:!1,isWritable:!1}),(new ot).add({keys:u,programId:this.programId,data:c})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:n,splitStakePubkey:r,lamports:i}=t,o=kt(er.Split,{lamports:i});return new it({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t){const e=new ot;return e.add(Et.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),e.add(this.splitInstruction(t))}static splitWithSeed(t){const{stakePubkey:e,authorizedPubkey:n,splitStakePubkey:r,basePubkey:i,seed:o,lamports:s}=t,a=new ot;return a.add(Et.allocate({accountPubkey:r,basePubkey:i,seed:o,space:this.space,programId:this.programId})),a.add(this.splitInstruction({stakePubkey:e,authorizedPubkey:n,splitStakePubkey:r,lamports:s}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:n,authorizedPubkey:r}=t,i=kt(er.Merge);return(new ot).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:yt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:n,toPubkey:r,lamports:i,custodianPubkey:o}=t,s=kt(er.Withdraw,{lamports:i}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:yt,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!1,isWritable:!1}),(new ot).add({keys:a,programId:this.programId,data:s})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:n}=t,r=kt(er.Deactivate);return(new ot).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}}rr.programId=new L("Stake11111111111111111111111111111111111111"),rr.space=200;class ir{constructor(t,e,n,r){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=n,this.commission=r}}class or{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=l.u32("instruction").decode(t.data);let n;for(const[t,r]of Object.entries(sr))if(r.index==e){n=t;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=wt(sr.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new ir(new L(e.nodePubkey),new L(e.authorizedVoter),new L(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:n}=wt(sr.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new L(e),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:n,newAuthorized:r,voteAuthorizationType:i}}=wt(sr.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new L(e),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new L(r),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=wt(sr.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(cr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const sr=Object.freeze({InitializeAccount:{index:0,layout:l.struct([l.u32("instruction"),((t="voteInit")=>l.struct([H("nodePubkey"),H("authorizedVoter"),H("authorizedWithdrawer"),l.u8("commission")],t))()])},Authorize:{index:1,layout:l.struct([l.u32("instruction"),H("newAuthorized"),l.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:l.struct([l.u32("instruction"),l.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:l.struct([l.u32("instruction"),((t="voteAuthorizeWithSeedArgs")=>l.struct([l.u32("voteAuthorizationType"),H("currentAuthorityDerivedKeyOwnerPubkey"),G("currentAuthorityDerivedKeySeed"),H("newAuthorized")],t))()])}}),ar=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class cr{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:n,voteInit:r}=t,i=kt(sr.InitializeAccount,{voteInit:{nodePubkey:v(r.nodePubkey.toBuffer()),authorizedVoter:v(r.authorizedVoter.toBuffer()),authorizedWithdrawer:v(r.authorizedWithdrawer.toBuffer()),commission:r.commission}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ht,isSigner:!1,isWritable:!1},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new it(o)}static createAccount(t){const e=new ot;return e.add(Et.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:n,newAuthorizedPubkey:r,voteAuthorizationType:i}=t,o=kt(sr.Authorize,{newAuthorized:v(r.toBuffer()),voteAuthorizationType:i.index}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return(new ot).add({keys:s,programId:this.programId,data:o})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:s}=t,a=kt(sr.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:v(n.toBuffer()),currentAuthorityDerivedKeySeed:r,newAuthorized:v(i.toBuffer()),voteAuthorizationType:o.index}}),c=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new ot).add({keys:c,programId:this.programId,data:a})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:n,lamports:r,toPubkey:i}=t,o=kt(sr.Withdraw,{lamports:r}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return(new ot).add({keys:s,programId:this.programId,data:o})}static safeWithdraw(t,e,n){if(t.lamports>e-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return cr.withdraw(t)}}cr.programId=new L("Vote111111111111111111111111111111111111111"),cr.space=3731;const ur=new L("Va1idator1nfo111111111111111111111111111111"),dr=(0,f.dt)({name:(0,f.Z_)(),website:(0,f.jt)((0,f.Z_)()),details:(0,f.jt)((0,f.Z_)()),keybaseUsername:(0,f.jt)((0,f.Z_)())});class lr{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(2!==$(e))return null;const n=[];for(let t=0;t<2;t++){const t=new L(e.slice(0,W));e=e.slice(W);const r=1===e.slice(0,1)[0];e=e.slice(1),n.push({publicKey:t,isSigner:r})}if(n[0].publicKey.equals(ur)&&n[1].isSigner){const t=G().decode(r.Buffer.from(e)),i=JSON.parse(t);return(0,f.hu)(i,dr),new lr(n[1].publicKey,i)}return null}}const hr=new L("Vote111111111111111111111111111111111111111"),fr=l.struct([H("nodePubkey"),H("authorizedWithdrawer"),l.u8("commission"),l.nu64(),l.seq(l.struct([l.nu64("slot"),l.u32("confirmationCount")]),l.offset(l.u32(),-8),"votes"),l.u8("rootSlotValid"),l.nu64("rootSlot"),l.nu64(),l.seq(l.struct([l.nu64("epoch"),H("authorizedVoter")]),l.offset(l.u32(),-8),"authorizedVoters"),l.struct([l.seq(l.struct([H("authorizedPubkey"),l.nu64("epochOfLastAuthorizedSwitch"),l.nu64("targetEpoch")]),32,"buf"),l.nu64("idx"),l.u8("isEmpty")],"priorVoters"),l.nu64(),l.seq(l.struct([l.nu64("epoch"),l.nu64("credits"),l.nu64("prevCredits")]),l.offset(l.u32(),-8),"epochCredits"),l.struct([l.nu64("slot"),l.nu64("timestamp")],"lastTimestamp")]);class pr{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const e=fr.decode(v(t),4);let n=e.rootSlot;return e.rootSlotValid||(n=null),new pr({nodePubkey:new L(e.nodePubkey),authorizedWithdrawer:new L(e.authorizedWithdrawer),commission:e.commission,votes:e.votes,rootSlot:n,authorizedVoters:e.authorizedVoters.map(mr),priorVoters:gr(e.priorVoters),epochCredits:e.epochCredits,lastTimestamp:e.lastTimestamp})}}function mr({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new L(t)}}function yr({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:n}){return{authorizedPubkey:new L(t),epochOfLastAuthorizedSwitch:e,targetEpoch:n}}function gr({buf:t,idx:e,isEmpty:n}){return n?[]:[...t.slice(e+1).map(yr),...t.slice(0,e).map(yr)]}const br={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function kr(t,e){const n=!1===e?"http":"https";if(!t)return br[n].devnet;const r=br[n][t];if(!r)throw new Error(`Unknown ${n} cluster: ${t}`);return r}async function wr(t,e,n,r){let i,o;n&&Object.prototype.hasOwnProperty.call(n,"lastValidBlockHeight")||n&&Object.prototype.hasOwnProperty.call(n,"nonceValue")?(i=n,o=r):o=n;const s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await t.sendRawTransaction(e,s),c=o&&o.commitment,u=i?t.confirmTransaction(i,c):t.confirmTransaction(a,c),d=(await u).value;if(d.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(d)})`);return a}const Ir=1e9},"../../../node_modules/@solana/spl-token/lib/esm/constants.js":function(t,e,n){n.d(e,{Gd:function(){return a},H_:function(){return i},Yx:function(){return c},_u:function(){return s},lP:function(){return u},nA:function(){return o}});var r=n("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js");const i=new r.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),o=new r.PublicKey("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),s=new r.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),a=new r.PublicKey("So11111111111111111111111111111111111111112"),c=new r.PublicKey("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");function u(t){return t!==i}},"../../../node_modules/@solana/spl-token/lib/esm/errors.js":function(t,e,n){n.d(e,{$O:function(){return a},BT:function(){return m},Di:function(){return h},Gl:function(){return d},In:function(){return p},Or:function(){return s},WK:function(){return r},We:function(){return i},Z0:function(){return f},bQ:function(){return u},iK:function(){return o},iT:function(){return c},yh:function(){return l}});class r extends Error{constructor(t){super(t)}}class i extends r{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class o extends r{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class s extends r{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class a extends r{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class c extends r{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class u extends r{constructor(){super(...arguments),this.name="TokenInvalidOwnerError"}}class d extends r{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}class l extends r{constructor(){super(...arguments),this.name="TokenInvalidInstructionProgramError"}}class h extends r{constructor(){super(...arguments),this.name="TokenInvalidInstructionKeysError"}}class f extends r{constructor(){super(...arguments),this.name="TokenInvalidInstructionDataError"}}class p extends r{constructor(){super(...arguments),this.name="TokenInvalidInstructionTypeError"}}class m extends r{constructor(){super(...arguments),this.name="TokenUnsupportedInstructionError"}}},"../../../node_modules/@solana/spl-token/lib/esm/extensions/accountType.js":function(t,e,n){var r;n.d(e,{Q:function(){return r},t:function(){return i}}),function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"}(r||(r={}));const i=1},"../../../node_modules/@solana/spl-token/lib/esm/extensions/cpiGuard/state.js":function(t,e,n){n.d(e,{Uu:function(){return a},sz:function(){return c},zc:function(){return s}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),o=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js");const s=(0,r.struct)([(0,i.Xg)("lockCpi")]),a=s.span;function c(t){const e=(0,o.mq)(o.nw.CpiGuard,t.tlvData);return null!==e?s.decode(e):null}},"../../../node_modules/@solana/spl-token/lib/esm/extensions/defaultAccountState/state.js":function(t,e,n){n.d(e,{AK:function(){return o},Li:function(){return s},ld:function(){return a}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js");const o=(0,r.struct)([(0,r.u8)("state")]),s=o.span;function a(t){const e=(0,i.mq)(i.nw.DefaultAccountState,t.tlvData);return null!==e?o.decode(e):null}},"../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js":function(t,e,n){n.d(e,{F7:function(){return b},Oh:function(){return w},VU:function(){return I},Vv:function(){return v},Xh:function(){return T},_q:function(){return g},fv:function(){return E},jF:function(){return A},jk:function(){return _},mq:function(){return x},nw:function(){return r},wd:function(){return k}});var r,i=n("../../../node_modules/@solana/spl-token/lib/esm/state/account.js"),o=n("../../../node_modules/@solana/spl-token/lib/esm/state/mint.js"),s=n("../../../node_modules/@solana/spl-token/lib/esm/state/multisig.js"),a=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/accountType.js"),c=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/cpiGuard/state.js"),u=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/defaultAccountState/state.js"),d=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/immutableOwner.js"),l=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/interestBearingMint/state.js"),h=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/memoTransfer/state.js"),f=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/mintCloseAuthority.js"),p=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/nonTransferable.js"),m=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/permanentDelegate.js"),y=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/transferFee/state.js");!function(t){t[t.Uninitialized=0]="Uninitialized",t[t.TransferFeeConfig=1]="TransferFeeConfig",t[t.TransferFeeAmount=2]="TransferFeeAmount",t[t.MintCloseAuthority=3]="MintCloseAuthority",t[t.ConfidentialTransferMint=4]="ConfidentialTransferMint",t[t.ConfidentialTransferAccount=5]="ConfidentialTransferAccount",t[t.DefaultAccountState=6]="DefaultAccountState",t[t.ImmutableOwner=7]="ImmutableOwner",t[t.MemoTransfer=8]="MemoTransfer",t[t.NonTransferable=9]="NonTransferable",t[t.InterestBearingConfig=10]="InterestBearingConfig",t[t.CpiGuard=11]="CpiGuard",t[t.PermanentDelegate=12]="PermanentDelegate"}(r||(r={}));const g=2,b=2;function k(t){switch(t){case r.Uninitialized:return 0;case r.TransferFeeConfig:return y.et;case r.TransferFeeAmount:return y.jz;case r.MintCloseAuthority:return f.kZ;case r.ConfidentialTransferMint:return 97;case r.ConfidentialTransferAccount:return 286;case r.CpiGuard:return c.Uu;case r.DefaultAccountState:return u.Li;case r.ImmutableOwner:return d.pS;case r.MemoTransfer:return h.Vl;case r.NonTransferable:return p.Yv;case r.InterestBearingConfig:return l.Me;case r.PermanentDelegate:return m.$;default:throw Error(`Unknown extension type: ${t}`)}}function w(t){switch(t){case r.TransferFeeConfig:case r.MintCloseAuthority:case r.ConfidentialTransferMint:case r.DefaultAccountState:case r.NonTransferable:case r.InterestBearingConfig:case r.PermanentDelegate:return!0;case r.Uninitialized:case r.TransferFeeAmount:case r.ConfidentialTransferAccount:case r.ImmutableOwner:case r.MemoTransfer:case r.CpiGuard:return!1;default:throw Error(`Unknown extension type: ${t}`)}}function I(t){switch(t){case r.TransferFeeAmount:case r.ConfidentialTransferAccount:case r.ImmutableOwner:case r.MemoTransfer:case r.CpiGuard:return!0;case r.Uninitialized:case r.TransferFeeConfig:case r.MintCloseAuthority:case r.ConfidentialTransferMint:case r.DefaultAccountState:case r.NonTransferable:case r.InterestBearingConfig:case r.PermanentDelegate:return!1;default:throw Error(`Unknown extension type: ${t}`)}}function A(t){switch(t){case r.TransferFeeConfig:return r.TransferFeeAmount;case r.ConfidentialTransferMint:return r.ConfidentialTransferAccount;case r.TransferFeeAmount:case r.ConfidentialTransferAccount:case r.CpiGuard:case r.DefaultAccountState:case r.ImmutableOwner:case r.MemoTransfer:case r.MintCloseAuthority:case r.NonTransferable:case r.Uninitialized:case r.InterestBearingConfig:case r.PermanentDelegate:return r.Uninitialized}}function S(t,e){if(0===t.length)return e;{const e=i.lZ+a.t+t.filter(((e,n)=>n===t.indexOf(e))).map((t=>k(t)+g+b)).reduce(((t,e)=>t+e));return e===s.Wx?e+g:e}}function _(t){return S(t,o.Bl)}function T(t){return S(t,i.lZ)}function x(t,e){let n=0;for(;n+g+b<=e.length;){const r=e.readUInt16LE(n),i=e.readUInt16LE(n+g),o=n+g+b;if(r==t)return e.slice(o,o+i);n=o+i}return null}function v(t){const e=[];let n=0;for(;n<t.length;){const r=t.readUInt16LE(n);e.push(r);const i=t.readUInt16LE(n+g);n+=g+b+i}return e}function E(t){return T(v(t.tlvData).map(A))}},"../../../node_modules/@solana/spl-token/lib/esm/extensions/immutableOwner.js":function(t,e,n){n.d(e,{LB:function(){return a},l3:function(){return o},pS:function(){return s}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js");const o=(0,r.struct)([]),s=o.span;function a(t){const e=(0,i.mq)(i.nw.ImmutableOwner,t.tlvData);return null!==e?o.decode(e):null}},"../../../node_modules/@solana/spl-token/lib/esm/extensions/interestBearingMint/state.js":function(t,e,n){n.d(e,{Me:function(){return a},Qz:function(){return c},ao:function(){return s}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),o=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js");const s=(0,r.struct)([(0,i.ZL)("rateAuthority"),(0,r.ns64)("initializationTimestamp"),(0,r.s16)("preUpdateAverageRate"),(0,r.ns64)("lastUpdateTimestamp"),(0,r.s16)("currentRate")]),a=s.span;function c(t){const e=(0,o.mq)(o.nw.InterestBearingConfig,t.tlvData);return null!==e?s.decode(e):null}},"../../../node_modules/@solana/spl-token/lib/esm/extensions/memoTransfer/state.js":function(t,e,n){n.d(e,{OW:function(){return s},Vl:function(){return a},oL:function(){return c}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),o=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js");const s=(0,r.struct)([(0,i.Xg)("requireIncomingTransferMemos")]),a=s.span;function c(t){const e=(0,o.mq)(o.nw.MemoTransfer,t.tlvData);return null!==e?s.decode(e):null}},"../../../node_modules/@solana/spl-token/lib/esm/extensions/mintCloseAuthority.js":function(t,e,n){n.d(e,{VA:function(){return s},ez:function(){return c},kZ:function(){return a}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),o=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js");const s=(0,r.struct)([(0,i.ZL)("closeAuthority")]),a=s.span;function c(t){const e=(0,o.mq)(o.nw.MintCloseAuthority,t.tlvData);return null!==e?s.decode(e):null}},"../../../node_modules/@solana/spl-token/lib/esm/extensions/nonTransferable.js":function(t,e,n){n.d(e,{HZ:function(){return a},Qf:function(){return o},Yv:function(){return s}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js");const o=(0,r.struct)([]),s=o.span;function a(t){const e=(0,i.mq)(i.nw.NonTransferable,t.tlvData);return null!==e?o.decode(e):null}},"../../../node_modules/@solana/spl-token/lib/esm/extensions/permanentDelegate.js":function(t,e,n){n.d(e,{$:function(){return a},$1:function(){return c},Zx:function(){return s}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),o=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js");const s=(0,r.struct)([(0,i.ZL)("delegate")]),a=s.span;function c(t){const e=(0,o.mq)(o.nw.PermanentDelegate,t.tlvData);return null!==e?s.decode(e):null}},"../../../node_modules/@solana/spl-token/lib/esm/extensions/transferFee/state.js":function(t,e,n){n.d(e,{AV:function(){return s},Cr:function(){return u},E0:function(){return f},J9:function(){return a},Lk:function(){return c},aF:function(){return p},am:function(){return l},et:function(){return d},jz:function(){return h}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),o=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js");const s=1e4,a=s;function c(t){return(0,r.struct)([(0,i.AW)("epoch"),(0,i.AW)("maximumFee"),(0,r.u16)("transferFeeBasisPoints")],t)}const u=(0,r.struct)([(0,i.ZL)("transferFeeConfigAuthority"),(0,i.ZL)("withdrawWithheldAuthority"),(0,i.AW)("withheldAmount"),c("olderTransferFee"),c("newerTransferFee")]),d=u.span,l=(0,r.struct)([(0,i.AW)("withheldAmount")]),h=l.span;function f(t){const e=(0,o.mq)(o.nw.TransferFeeConfig,t.tlvData);return null!==e?u.decode(e):null}function p(t){const e=(0,o.mq)(o.nw.TransferFeeAmount,t.tlvData);return null!==e?l.decode(e):null}},"../../../node_modules/@solana/spl-token/lib/esm/index.js":function(t,e,n){n.r(e),n.d(e,{ACCOUNT_SIZE:function(){return kt.lZ},ACCOUNT_TYPE_SIZE:function(){return Ie.t},ASSOCIATED_TOKEN_PROGRAM_ID:function(){return i._u},AccountLayout:function(){return kt.p0},AccountState:function(){return kt.m3},AccountType:function(){return Ie.Q},AuthorityType:function(){return Zt},CPI_GUARD_SIZE:function(){return Be.Uu},CpiGuardInstruction:function(){return we},CpiGuardLayout:function(){return Be.zc},DEFAULT_ACCOUNT_STATE_SIZE:function(){return Ue.Li},DefaultAccountStateInstruction:function(){return Pe},DefaultAccountStateLayout:function(){return Ue.AK},ExtensionType:function(){return N.nw},IMMUTABLE_OWNER_SIZE:function(){return je.pS},INTEREST_BEARING_MINT_CONFIG_STATE_SIZE:function(){return Qe.Me},ImmutableOwnerLayout:function(){return je.l3},InterestBearingMintConfigStateLayout:function(){return Qe.ao},InterestBearingMintInstruction:function(){return qe},LENGTH_SIZE:function(){return N.F7},MAX_FEE_BASIS_POINTS:function(){return Un.AV},MEMO_TRANSFER_SIZE:function(){return un.Vl},MINT_CLOSE_AUTHORITY_SIZE:function(){return dn.kZ},MINT_SIZE:function(){return Z.Bl},MULTISIG_SIZE:function(){return ct.Wx},MemoTransferInstruction:function(){return Je},MemoTransferLayout:function(){return un.OW},MintCloseAuthorityLayout:function(){return dn.VA},MintLayout:function(){return Z.qT},MultisigLayout:function(){return ct.of},NATIVE_MINT:function(){return i.Gd},NATIVE_MINT_2022:function(){return i.Yx},NON_TRANSFERABLE_SIZE:function(){return ln.Yv},NonTransferableLayout:function(){return ln.Qf},ONE_IN_BASIS_POINTS:function(){return Un.J9},PERMANENT_DELEGATE_SIZE:function(){return jn.$},PermanentDelegateLayout:function(){return jn.Zx},TOKEN_2022_PROGRAM_ID:function(){return i.nA},TOKEN_PROGRAM_ID:function(){return i.H_},TRANSFER_FEE_AMOUNT_SIZE:function(){return Un.jz},TRANSFER_FEE_CONFIG_SIZE:function(){return Un.et},TYPE_SIZE:function(){return N._q},TokenAccountNotFoundError:function(){return a.We},TokenError:function(){return a.WK},TokenInstruction:function(){return c.c},TokenInvalidAccountError:function(){return a.iK},TokenInvalidAccountOwnerError:function(){return a.Or},TokenInvalidAccountSizeError:function(){return a.$O},TokenInvalidInstructionDataError:function(){return a.Z0},TokenInvalidInstructionKeysError:function(){return a.Di},TokenInvalidInstructionProgramError:function(){return a.yh},TokenInvalidInstructionTypeError:function(){return a.In},TokenInvalidMintError:function(){return a.iT},TokenInvalidOwnerError:function(){return a.bQ},TokenOwnerOffCurveError:function(){return a.Gl},TokenUnsupportedInstructionError:function(){return a.BT},TransferFeeAmountLayout:function(){return Un.am},TransferFeeConfigLayout:function(){return Un.Cr},TransferFeeInstruction:function(){return cn},amountToUiAmount:function(){return m},amountToUiAmountInstructionData:function(){return d},approve:function(){return b},approveChecked:function(){return T},approveCheckedInstructionData:function(){return I},approveInstructionData:function(){return y.ey},burn:function(){return R},burnChecked:function(){return U},burnCheckedInstructionData:function(){return W},burnInstructionData:function(){return v},closeAccount:function(){return K},closeAccountInstructionData:function(){return j.GT},cpiGuardInstructionData:function(){return Se},createAccount:function(){return $},createAmountToUiAmountInstruction:function(){return l},createApproveCheckedInstruction:function(){return A},createApproveInstruction:function(){return y.g6},createAssociatedTokenAccount:function(){return V},createAssociatedTokenAccountIdempotent:function(){return X},createAssociatedTokenAccountIdempotentInstruction:function(){return G.j},createAssociatedTokenAccountInstruction:function(){return G.E},createBurnCheckedInstruction:function(){return z},createBurnInstruction:function(){return E},createCloseAccountInstruction:function(){return j.Zu},createCreateNativeMintInstruction:function(){return ht},createDisableCpiGuardInstruction:function(){return Te},createDisableRequiredMemoTransfersInstruction:function(){return rn},createEnableCpiGuardInstruction:function(){return _e},createEnableRequiredMemoTransfersInstruction:function(){return nn},createFreezeAccountInstruction:function(){return St},createHarvestWithheldTokensToMintInstruction:function(){return Bn},createInitializeAccount2Instruction:function(){return Mn},createInitializeAccount3Instruction:function(){return Zn},createInitializeAccountInstruction:function(){return F},createInitializeDefaultAccountStateInstruction:function(){return We},createInitializeImmutableOwnerInstruction:function(){return wr},createInitializeInterestBearingMintInstruction:function(){return Ve},createInitializeMint2Instruction:function(){return Q},createInitializeMintCloseAuthorityInstruction:function(){return Tr},createInitializeMintInstruction:function(){return Me},createInitializeMultisigInstruction:function(){return ot},createInitializeNonTransferableMintInstruction:function(){return Cr},createInitializePermanentDelegateInstruction:function(){return Lr},createInitializeTransferFeeConfigInstruction:function(){return pn},createInterestBearingMint:function(){return Xe},createMint:function(){return nt},createMintToCheckedInstruction:function(){return Ot},createMintToInstruction:function(){return Bt},createMultisig:function(){return ut},createNativeMint:function(){return ft},createNativeMintInstructionData:function(){return lt},createReallocateInstruction:function(){return Pr},createRevokeInstruction:function(){return Dt},createSetAuthorityInstruction:function(){return $t},createSyncNativeInstruction:function(){return yt},createThawAccountInstruction:function(){return ne},createTransferCheckedInstruction:function(){return he.De},createTransferCheckedWithFeeInstruction:function(){return bn},createTransferInstruction:function(){return ce},createUiAmountToAmountInstruction:function(){return me},createUpdateDefaultAccountStateInstruction:function(){return ze},createUpdateRateInterestBearingMintInstruction:function(){return $e},createWithdrawWithheldTokensFromAccountsInstruction:function(){return xn},createWithdrawWithheldTokensFromMintInstruction:function(){return An},createWrappedNativeAccount:function(){return wt},decodeAmountToUiAmountInstruction:function(){return h},decodeAmountToUiAmountInstructionUnchecked:function(){return f},decodeApproveCheckedInstruction:function(){return S},decodeApproveCheckedInstructionUnchecked:function(){return _},decodeApproveInstruction:function(){return y.qE},decodeApproveInstructionUnchecked:function(){return y.lF},decodeBurnCheckedInstruction:function(){return L},decodeBurnCheckedInstructionUnchecked:function(){return O},decodeBurnInstruction:function(){return P},decodeBurnInstructionUnchecked:function(){return B},decodeCloseAccountInstruction:function(){return j.zw},decodeCloseAccountInstructionUnchecked:function(){return j.bP},decodeFreezeAccountInstruction:function(){return _t},decodeFreezeAccountInstructionUnchecked:function(){return Tt},decodeHarvestWithheldTokensToMintInstruction:function(){return Rn},decodeHarvestWithheldTokensToMintInstructionUnchecked:function(){return Cn},decodeInitializeAccount2Instruction:function(){return Dn},decodeInitializeAccount2InstructionUnchecked:function(){return Fn},decodeInitializeAccount3Instruction:function(){return Gn},decodeInitializeAccount3InstructionUnchecked:function(){return Vn},decodeInitializeAccountInstruction:function(){return q},decodeInitializeAccountInstructionUnchecked:function(){return H},decodeInitializeImmutableOwnerInstruction:function(){return Ir},decodeInitializeImmutableOwnerInstructionUnchecked:function(){return Ar},decodeInitializeMint2Instruction:function(){return tt},decodeInitializeMint2InstructionUnchecked:function(){return et},decodeInitializeMintCloseAuthorityInstruction:function(){return xr},decodeInitializeMintCloseAuthorityInstructionUnchecked:function(){return vr},decodeInitializeMintInstruction:function(){return De},decodeInitializeMintInstructionUnchecked:function(){return Fe},decodeInitializeMultisigInstruction:function(){return st},decodeInitializeMultisigInstructionUnchecked:function(){return at},decodeInitializePermanentDelegateInstruction:function(){return Or},decodeInitializePermanentDelegateInstructionUnchecked:function(){return Ur},decodeInitializeTransferFeeConfigInstruction:function(){return mn},decodeInitializeTransferFeeConfigInstructionUnchecked:function(){return yn},decodeInstruction:function(){return $n},decodeMintToCheckedInstruction:function(){return Ut},decodeMintToCheckedInstructionUnchecked:function(){return jt},decodeMintToInstruction:function(){return Rt},decodeMintToInstructionUnchecked:function(){return Ct},decodeRevokeInstruction:function(){return Ft},decodeRevokeInstructionUnchecked:function(){return qt},decodeSetAuthorityInstruction:function(){return Xt},decodeSetAuthorityInstructionUnchecked:function(){return Yt},decodeSyncNativeInstruction:function(){return gt},decodeSyncNativeInstructionUnchecked:function(){return bt},decodeThawAccountInstruction:function(){return re},decodeThawAccountInstructionUnchecked:function(){return ie},decodeTransferCheckedInstruction:function(){return he.R2},decodeTransferCheckedInstructionUnchecked:function(){return he.CC},decodeTransferCheckedWithFeeInstruction:function(){return kn},decodeTransferCheckedWithFeeInstructionUnchecked:function(){return wn},decodeTransferInstruction:function(){return ue},decodeTransferInstructionUnchecked:function(){return de},decodeUiAmountToAmountInstruction:function(){return ye},decodeUiAmountToAmountInstructionUnchecked:function(){return ge},decodeWithdrawWithheldTokensFromAccountsInstruction:function(){return vn},decodeWithdrawWithheldTokensFromAccountsInstructionUnchecked:function(){return En},decodeWithdrawWithheldTokensFromMintInstruction:function(){return Sn},decodeWithdrawWithheldTokensFromMintInstructionUnchecked:function(){return _n},defaultAccountStateInstructionData:function(){return Ce},disableCpiGuard:function(){return Ee},disableRequiredMemoTransfers:function(){return an},enableCpiGuard:function(){return ve},enableRequiredMemoTransfers:function(){return sn},freezeAccount:function(){return xt},freezeAccountInstructionData:function(){return At},getAccount:function(){return kt.D0},getAccountLen:function(){return N.Xh},getAccountLenForMint:function(){return N.fv},getAccountTypeOfMintType:function(){return N.jF},getAssociatedTokenAddress:function(){return Z.Am},getAssociatedTokenAddressSync:function(){return Z.MO},getCpiGuard:function(){return Be.sz},getDefaultAccountState:function(){return Ue.ld},getExtensionData:function(){return N.mq},getExtensionTypes:function(){return N.Vv},getImmutableOwner:function(){return je.LB},getInterestBearingMintConfigState:function(){return Qe.Qz},getMemoTransfer:function(){return un.oL},getMinimumBalanceForRentExemptAccount:function(){return kt.pE},getMinimumBalanceForRentExemptAccountWithExtensions:function(){return kt.Dl},getMinimumBalanceForRentExemptMint:function(){return Z.Mg},getMinimumBalanceForRentExemptMintWithExtensions:function(){return Z.s2},getMinimumBalanceForRentExemptMultisig:function(){return ct.Yv},getMint:function(){return Z.ih},getMintCloseAuthority:function(){return dn.ez},getMintLen:function(){return N.jk},getMultipleAccounts:function(){return kt.Du},getMultisig:function(){return ct.rb},getNonTransferable:function(){return ln.HZ},getOrCreateAssociatedTokenAccount:function(){return vt},getPermanentDelegate:function(){return jn.$1},getTransferFeeAmount:function(){return Un.aF},getTransferFeeConfig:function(){return Un.E0},getTypeLen:function(){return N.wd},harvestWithheldTokensToMint:function(){return On},harvestWithheldTokensToMintInstructionData:function(){return Pn},initializeAccount2InstructionData:function(){return Nn},initializeAccount3InstructionData:function(){return Hn},initializeAccountInstructionData:function(){return D},initializeDefaultAccountState:function(){return Le},initializeImmutableOwnerInstructionData:function(){return kr},initializeMint2InstructionData:function(){return J},initializeMintCloseAuthorityInstructionData:function(){return _r},initializeMintInstructionData:function(){return Ne},initializeMultisigInstructionData:function(){return it},initializeNonTransferableMintInstructionData:function(){return Rr},initializePermanentDelegateInstructionData:function(){return zr},initializeTransferFeeConfigInstructionData:function(){return fn},interestBearingMintInitializeInstructionData:function(){return Ze},interestBearingMintUpdateRateInstructionData:function(){return Ge},isAccountExtension:function(){return N.VU},isAmountToUiAmountInstruction:function(){return yr},isApproveCheckedInstruction:function(){return ur},isApproveInstruction:function(){return tr},isBurnCheckedInstruction:function(){return lr},isBurnInstruction:function(){return ir},isCloseAccountInstruction:function(){return or},isFreezeAccountInstruction:function(){return sr},isInitializeAccount2Instruction:function(){return hr},isInitializeAccount3Instruction:function(){return pr},isInitializeAccountInstruction:function(){return Yn},isInitializeMint2Instruction:function(){return mr},isInitializeMintInstruction:function(){return Xn},isInitializeMultisigInstruction:function(){return Jn},isMintExtension:function(){return N.Oh},isMintToCheckedInstruction:function(){return dr},isMintToInstruction:function(){return rr},isRevokeInstruction:function(){return er},isSetAuthorityInstruction:function(){return nr},isSyncNativeInstruction:function(){return fr},isThawAccountInstruction:function(){return ar},isTransferCheckedInstruction:function(){return cr},isTransferInstruction:function(){return Qn},isUiamountToAmountInstruction:function(){return gr},memoTransferInstructionData:function(){return en},mintTo:function(){return Wt},mintToChecked:function(){return Kt},mintToCheckedInstructionData:function(){return Lt},mintToInstructionData:function(){return Pt},programSupportsExtensions:function(){return i.lP},revoke:function(){return Ht},revokeInstructionData:function(){return Mt},setAuthority:function(){return Jt},setAuthorityInstructionData:function(){return Vt},syncNative:function(){return Qt},syncNativeInstructionData:function(){return mt},thawAccount:function(){return oe},thawAccountInstructionData:function(){return ee},transfer:function(){return le},transferChecked:function(){return fe},transferCheckedInstructionData:function(){return he.vA},transferCheckedWithFee:function(){return Wn},transferCheckedWithFeeInstructionData:function(){return gn},transferFeeLayout:function(){return Un.Lk},transferInstructionData:function(){return ae},uiAmountToAmount:function(){return ke},unpackAccount:function(){return kt.nS},unpackMint:function(){return Z.rs},unpackMultisig:function(){return ct.YA},updateDefaultAccountState:function(){return Oe},updateRateInterestBearingMint:function(){return Ye},withdrawWithheldTokensFromAccounts:function(){return Ln},withdrawWithheldTokensFromAccountsInstructionData:function(){return Tn},withdrawWithheldTokensFromMint:function(){return zn},withdrawWithheldTokensFromMintInstructionData:function(){return In}});var r=n("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),i=n("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),o=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),s=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),a=n("../../../node_modules/@solana/spl-token/lib/esm/errors.js"),c=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/types.js"),u=n("../../../node_modules/buffer/index.js").Buffer;const d=(0,o.struct)([(0,o.u8)("instruction"),(0,s.AW)("amount")]);function l(t,e,n=i.H_){const o=[{pubkey:t,isSigner:!1,isWritable:!1}],s=u.alloc(d.span);return d.encode({instruction:c.c.AmountToUiAmount,amount:BigInt(e)},s),new r.TransactionInstruction({keys:o,programId:n,data:s})}function h(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==d.span)throw new a.Z0;const{keys:{mint:n},data:r}=f(t);if(r.instruction!==c.c.AmountToUiAmount)throw new a.In;if(!n)throw new a.Di;return{programId:e,keys:{mint:n},data:r}}function f({programId:t,keys:[e],data:n}){return{programId:t,keys:{mint:e},data:d.decode(n)}}var p=n("../../../node_modules/buffer/index.js").Buffer;async function m(t,e,n,o,s=i.H_){const a=(new r.Transaction).add(l(n,o,s)),{returnData:c,err:u}=(await t.simulateTransaction(a,[e],!1)).value;return c?.data?p.from(c.data[0],c.data[1]).toString("utf-8"):u}var y=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/approve.js");function g(t,e){return t instanceof r.PublicKey?[t,e]:[t.publicKey,[t]]}async function b(t,e,n,o,s,a,c=[],u,d=i.H_){const[l,h]=g(s,c),f=(new r.Transaction).add((0,y.g6)(n,o,l,a,c,d));return await(0,r.sendAndConfirmTransaction)(t,f,[e,...h],u)}var k=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/internal.js"),w=n("../../../node_modules/buffer/index.js").Buffer;const I=(0,o.struct)([(0,o.u8)("instruction"),(0,s.AW)("amount"),(0,o.u8)("decimals")]);function A(t,e,n,o,s,a,u=[],d=i.H_){const l=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1}],o,u),h=w.alloc(I.span);return I.encode({instruction:c.c.ApproveChecked,amount:BigInt(s),decimals:a},h),new r.TransactionInstruction({keys:l,programId:d,data:h})}function S(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==I.span)throw new a.Z0;const{keys:{account:n,mint:r,delegate:o,owner:s,multiSigners:u},data:d}=_(t);if(d.instruction!==c.c.ApproveChecked)throw new a.In;if(!(n&&r&&o&&s))throw new a.Di;return{programId:e,keys:{account:n,mint:r,delegate:o,owner:s,multiSigners:u},data:d}}function _({programId:t,keys:[e,n,r,i,...o],data:s}){return{programId:t,keys:{account:e,mint:n,delegate:r,owner:i,multiSigners:o},data:I.decode(s)}}async function T(t,e,n,o,s,a,c,u,d=[],l,h=i.H_){const[f,p]=g(a,d),m=(new r.Transaction).add(A(o,n,s,f,c,u,d,h));return await(0,r.sendAndConfirmTransaction)(t,m,[e,...p],l)}var x=n("../../../node_modules/buffer/index.js").Buffer;const v=(0,o.struct)([(0,o.u8)("instruction"),(0,s.AW)("amount")]);function E(t,e,n,o,s=[],a=i.H_){const u=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,s),d=x.alloc(v.span);return v.encode({instruction:c.c.Burn,amount:BigInt(o)},d),new r.TransactionInstruction({keys:u,programId:a,data:d})}function P(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==v.span)throw new a.Z0;const{keys:{account:n,mint:r,owner:o,multiSigners:s},data:u}=B(t);if(u.instruction!==c.c.Burn)throw new a.In;if(!n||!r||!o)throw new a.Di;return{programId:e,keys:{account:n,mint:r,owner:o,multiSigners:s},data:u}}function B({programId:t,keys:[e,n,r,...i],data:o}){return{programId:t,keys:{account:e,mint:n,owner:r,multiSigners:i},data:v.decode(o)}}async function R(t,e,n,o,s,a,c=[],u,d=i.H_){const[l,h]=g(s,c),f=(new r.Transaction).add(E(n,o,l,a,c,d));return await(0,r.sendAndConfirmTransaction)(t,f,[e,...h],u)}var C=n("../../../node_modules/buffer/index.js").Buffer;const W=(0,o.struct)([(0,o.u8)("instruction"),(0,s.AW)("amount"),(0,o.u8)("decimals")]);function z(t,e,n,o,s,a=[],u=i.H_){const d=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,a),l=C.alloc(W.span);return W.encode({instruction:c.c.BurnChecked,amount:BigInt(o),decimals:s},l),new r.TransactionInstruction({keys:d,programId:u,data:l})}function L(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==W.span)throw new a.Z0;const{keys:{account:n,mint:r,owner:o,multiSigners:s},data:u}=O(t);if(u.instruction!==c.c.BurnChecked)throw new a.In;if(!n||!r||!o)throw new a.Di;return{programId:e,keys:{account:n,mint:r,owner:o,multiSigners:s},data:u}}function O({programId:t,keys:[e,n,r,...i],data:o}){return{programId:t,keys:{account:e,mint:n,owner:r,multiSigners:i},data:W.decode(o)}}async function U(t,e,n,o,s,a,c,u=[],d,l=i.H_){const[h,f]=g(s,u),p=(new r.Transaction).add(z(n,o,h,a,c,u,l));return await(0,r.sendAndConfirmTransaction)(t,p,[e,...f],d)}var j=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/closeAccount.js");async function K(t,e,n,o,s,a=[],c,u=i.H_){const[d,l]=g(s,a),h=(new r.Transaction).add((0,j.Zu)(n,o,d,a,u));return await(0,r.sendAndConfirmTransaction)(t,h,[e,...l],c)}var N=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js"),M=n("../../../node_modules/buffer/index.js").Buffer;const D=(0,o.struct)([(0,o.u8)("instruction")]);function F(t,e,n,o=i.H_){const s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],a=M.alloc(D.span);return D.encode({instruction:c.c.InitializeAccount},a),new r.TransactionInstruction({keys:s,programId:o,data:a})}function q(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==D.span)throw new a.Z0;const{keys:{account:n,mint:r,owner:o,rent:s},data:u}=H(t);if(u.instruction!==c.c.InitializeAccount)throw new a.In;if(!(n&&r&&o&&s))throw new a.Di;return{programId:e,keys:{account:n,mint:r,owner:o,rent:s},data:u}}function H({programId:t,keys:[e,n,r,i],data:o}){return{programId:t,keys:{account:e,mint:n,owner:r,rent:i},data:D.decode(o)}}var Z=n("../../../node_modules/@solana/spl-token/lib/esm/state/mint.js"),G=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/associatedTokenAccount.js");async function V(t,e,n,o,s,a=i.H_,c=i._u){const u=await(0,Z.Am)(n,o,!1,a,c),d=(new r.Transaction).add((0,G.E)(e.publicKey,u,o,n,a,c));return await(0,r.sendAndConfirmTransaction)(t,d,[e],s),u}async function $(t,e,n,o,s,a,c=i.H_){if(!s)return await V(t,e,n,o,a,c);const u=await(0,Z.ih)(t,n,a?.commitment,c),d=(0,N.fv)(u),l=await t.getMinimumBalanceForRentExemption(d),h=(new r.Transaction).add(r.SystemProgram.createAccount({fromPubkey:e.publicKey,newAccountPubkey:s.publicKey,space:d,lamports:l,programId:c}),F(s.publicKey,n,o,c));return await(0,r.sendAndConfirmTransaction)(t,h,[e,s],a),s.publicKey}async function X(t,e,n,o,s,a=i.H_,c=i._u){const u=await(0,Z.Am)(n,o,!1,a,c),d=(new r.Transaction).add((0,G.j)(e.publicKey,u,o,n,a,c));return await(0,r.sendAndConfirmTransaction)(t,d,[e],s),u}var Y=n("../../../node_modules/buffer/index.js").Buffer;const J=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("decimals"),(0,s.ZL)("mintAuthority"),(0,o.u8)("freezeAuthorityOption"),(0,s.ZL)("freezeAuthority")]);function Q(t,e,n,o,s=i.H_){const a=[{pubkey:t,isSigner:!1,isWritable:!0}],u=Y.alloc(J.span);return J.encode({instruction:c.c.InitializeMint2,decimals:e,mintAuthority:n,freezeAuthorityOption:o?1:0,freezeAuthority:o||new r.PublicKey(0)},u),new r.TransactionInstruction({keys:a,programId:s,data:u})}function tt(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==J.span)throw new a.Z0;const{keys:{mint:n},data:r}=et(t);if(r.instruction!==c.c.InitializeMint2)throw new a.In;if(!n)throw new a.Di;return{programId:e,keys:{mint:n},data:r}}function et({programId:t,keys:[e],data:n}){const{instruction:r,decimals:i,mintAuthority:o,freezeAuthorityOption:s,freezeAuthority:a}=J.decode(n);return{programId:t,keys:{mint:e},data:{instruction:r,decimals:i,mintAuthority:o,freezeAuthority:s?a:null}}}async function nt(t,e,n,o,s,a=r.Keypair.generate(),c,u=i.H_){const d=await(0,Z.Mg)(t),l=(new r.Transaction).add(r.SystemProgram.createAccount({fromPubkey:e.publicKey,newAccountPubkey:a.publicKey,space:Z.Bl,lamports:d,programId:u}),Q(a.publicKey,s,n,o,u));return await(0,r.sendAndConfirmTransaction)(t,l,[e,a],c),a.publicKey}var rt=n("../../../node_modules/buffer/index.js").Buffer;const it=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("m")]);function ot(t,e,n,o=i.H_){const s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];for(const t of e)s.push({pubkey:t instanceof r.PublicKey?t:t.publicKey,isSigner:!1,isWritable:!1});const a=rt.alloc(it.span);return it.encode({instruction:c.c.InitializeMultisig,m:n},a),new r.TransactionInstruction({keys:s,programId:o,data:a})}function st(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==it.span)throw new a.Z0;const{keys:{account:n,rent:r,signers:o},data:s}=at(t);if(s.instruction!==c.c.InitializeMultisig)throw new a.In;if(!n||!r||!o.length)throw new a.Di;return{programId:e,keys:{account:n,rent:r,signers:o},data:s}}function at({programId:t,keys:[e,n,...r],data:i}){return{programId:t,keys:{account:e,rent:n,signers:r},data:it.decode(i)}}var ct=n("../../../node_modules/@solana/spl-token/lib/esm/state/multisig.js");async function ut(t,e,n,o,s=r.Keypair.generate(),a,c=i.H_){const u=await(0,ct.Yv)(t),d=(new r.Transaction).add(r.SystemProgram.createAccount({fromPubkey:e.publicKey,newAccountPubkey:s.publicKey,space:ct.Wx,lamports:u,programId:c}),ot(s.publicKey,n,o,c));return await(0,r.sendAndConfirmTransaction)(t,d,[e,s],a),s.publicKey}var dt=n("../../../node_modules/buffer/index.js").Buffer;const lt=(0,o.struct)([(0,o.u8)("instruction")]);function ht(t,e=i.Yx,n=i.nA){if(!(0,i.lP)(n))throw new a.BT;const o=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r.SystemProgram.programId,isSigner:!1,isWritable:!1}],s=dt.alloc(lt.span);return lt.encode({instruction:c.c.CreateNativeMint},s),new r.TransactionInstruction({keys:o,programId:n,data:s})}async function ft(t,e,n,o=i.Yx,s=i.nA){const a=(new r.Transaction).add(ht(e.publicKey,o,s));await(0,r.sendAndConfirmTransaction)(t,a,[e],n)}var pt=n("../../../node_modules/buffer/index.js").Buffer;const mt=(0,o.struct)([(0,o.u8)("instruction")]);function yt(t,e=i.H_){const n=[{pubkey:t,isSigner:!1,isWritable:!0}],o=pt.alloc(mt.span);return mt.encode({instruction:c.c.SyncNative},o),new r.TransactionInstruction({keys:n,programId:e,data:o})}function gt(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==mt.span)throw new a.Z0;const{keys:{account:n},data:r}=bt(t);if(r.instruction!==c.c.SyncNative)throw new a.In;if(!n)throw new a.Di;return{programId:e,keys:{account:n},data:r}}function bt({programId:t,keys:[e],data:n}){return{programId:t,keys:{account:e},data:mt.decode(n)}}var kt=n("../../../node_modules/@solana/spl-token/lib/esm/state/account.js");async function wt(t,e,n,o,s,a,c=i.H_,u=i.Gd){if(!o)return await $(t,e,u,n,s,a,c);if(!s){const s=await(0,Z.Am)(u,n,!1,c,i._u),d=(new r.Transaction).add((0,G.E)(e.publicKey,s,n,u,c,i._u),r.SystemProgram.transfer({fromPubkey:e.publicKey,toPubkey:s,lamports:o}),yt(s,c));return await(0,r.sendAndConfirmTransaction)(t,d,[e],a),s}const d=await(0,kt.pE)(t),l=(new r.Transaction).add(r.SystemProgram.createAccount({fromPubkey:e.publicKey,newAccountPubkey:s.publicKey,space:kt.lZ,lamports:d,programId:c}),r.SystemProgram.transfer({fromPubkey:e.publicKey,toPubkey:s.publicKey,lamports:o}),F(s.publicKey,u,n,c));return await(0,r.sendAndConfirmTransaction)(t,l,[e,s],a),s.publicKey}var It=n("../../../node_modules/buffer/index.js").Buffer;const At=(0,o.struct)([(0,o.u8)("instruction")]);function St(t,e,n,o=[],s=i.H_){const a=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1}],n,o),u=It.alloc(At.span);return At.encode({instruction:c.c.FreezeAccount},u),new r.TransactionInstruction({keys:a,programId:s,data:u})}function _t(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==At.span)throw new a.Z0;const{keys:{account:n,mint:r,authority:o,multiSigners:s},data:u}=Tt(t);if(u.instruction!==c.c.FreezeAccount)throw new a.In;if(!n||!r||!o)throw new a.Di;return{programId:e,keys:{account:n,mint:r,authority:o,multiSigners:s},data:u}}function Tt({programId:t,keys:[e,n,r,...i],data:o}){return{programId:t,keys:{account:e,mint:n,authority:r,multiSigners:i},data:At.decode(o)}}async function xt(t,e,n,o,s,a=[],c,u=i.H_){const[d,l]=g(s,a),h=(new r.Transaction).add(St(n,o,d,a,u));return await(0,r.sendAndConfirmTransaction)(t,h,[e,...l],c)}async function vt(t,e,n,o,s=!1,c,u,d=i.H_,l=i._u){const h=await(0,Z.Am)(n,o,s,d,l);let f;try{f=await(0,kt.D0)(t,h,c,d)}catch(i){if(!(i instanceof a.We||i instanceof a.Or))throw i;try{const i=(new r.Transaction).add((0,G.E)(e.publicKey,h,o,n,d,l));await(0,r.sendAndConfirmTransaction)(t,i,[e],u)}catch(t){}f=await(0,kt.D0)(t,h,c,d)}if(!f.mint.equals(n))throw new a.iT;if(!f.owner.equals(o))throw new a.bQ;return f}var Et=n("../../../node_modules/buffer/index.js").Buffer;const Pt=(0,o.struct)([(0,o.u8)("instruction"),(0,s.AW)("amount")]);function Bt(t,e,n,o,s=[],a=i.H_){const u=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,s),d=Et.alloc(Pt.span);return Pt.encode({instruction:c.c.MintTo,amount:BigInt(o)},d),new r.TransactionInstruction({keys:u,programId:a,data:d})}function Rt(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==Pt.span)throw new a.Z0;const{keys:{mint:n,destination:r,authority:o,multiSigners:s},data:u}=Ct(t);if(u.instruction!==c.c.MintTo)throw new a.In;if(!n||!r||!o)throw new a.Di;return{programId:e,keys:{mint:n,destination:r,authority:o,multiSigners:s},data:u}}function Ct({programId:t,keys:[e,n,r,...i],data:o}){return{programId:t,keys:{mint:e,destination:n,authority:r,multiSigners:i},data:Pt.decode(o)}}async function Wt(t,e,n,o,s,a,c=[],u,d=i.H_){const[l,h]=g(s,c),f=(new r.Transaction).add(Bt(n,o,l,a,c,d));return await(0,r.sendAndConfirmTransaction)(t,f,[e,...h],u)}var zt=n("../../../node_modules/buffer/index.js").Buffer;const Lt=(0,o.struct)([(0,o.u8)("instruction"),(0,s.AW)("amount"),(0,o.u8)("decimals")]);function Ot(t,e,n,o,s,a=[],u=i.H_){const d=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,a),l=zt.alloc(Lt.span);return Lt.encode({instruction:c.c.MintToChecked,amount:BigInt(o),decimals:s},l),new r.TransactionInstruction({keys:d,programId:u,data:l})}function Ut(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==Lt.span)throw new a.Z0;const{keys:{mint:n,destination:r,authority:o,multiSigners:s},data:u}=jt(t);if(u.instruction!==c.c.MintToChecked)throw new a.In;if(!n||!r||!o)throw new a.Di;return{programId:e,keys:{mint:n,destination:r,authority:o,multiSigners:s},data:u}}function jt({programId:t,keys:[e,n,r,...i],data:o}){return{programId:t,keys:{mint:e,destination:n,authority:r,multiSigners:i},data:Lt.decode(o)}}async function Kt(t,e,n,o,s,a,c,u=[],d,l=i.H_){const[h,f]=g(s,u),p=(new r.Transaction).add(Ot(n,o,h,a,c,u,l));return await(0,r.sendAndConfirmTransaction)(t,p,[e,...f],d)}var Nt=n("../../../node_modules/buffer/index.js").Buffer;const Mt=(0,o.struct)([(0,o.u8)("instruction")]);function Dt(t,e,n=[],o=i.H_){const s=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0}],e,n),a=Nt.alloc(Mt.span);return Mt.encode({instruction:c.c.Revoke},a),new r.TransactionInstruction({keys:s,programId:o,data:a})}function Ft(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==Mt.span)throw new a.Z0;const{keys:{account:n,owner:r,multiSigners:o},data:s}=qt(t);if(s.instruction!==c.c.Revoke)throw new a.In;if(!n||!r)throw new a.Di;return{programId:e,keys:{account:n,owner:r,multiSigners:o},data:s}}function qt({programId:t,keys:[e,n,...r],data:i}){return{programId:t,keys:{account:e,owner:n,multiSigners:r},data:Mt.decode(i)}}async function Ht(t,e,n,o,s=[],a,c=i.H_){const[u,d]=g(o,s),l=(new r.Transaction).add(Dt(n,u,s,c));return await(0,r.sendAndConfirmTransaction)(t,l,[e,...d],a)}var Zt,Gt=n("../../../node_modules/buffer/index.js").Buffer;!function(t){t[t.MintTokens=0]="MintTokens",t[t.FreezeAccount=1]="FreezeAccount",t[t.AccountOwner=2]="AccountOwner",t[t.CloseAccount=3]="CloseAccount"}(Zt||(Zt={}));const Vt=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("authorityType"),(0,o.u8)("newAuthorityOption"),(0,s.ZL)("newAuthority")]);function $t(t,e,n,o,s=[],a=i.H_){const u=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0}],e,s),d=Gt.alloc(Vt.span);return Vt.encode({instruction:c.c.SetAuthority,authorityType:n,newAuthorityOption:o?1:0,newAuthority:o||new r.PublicKey(0)},d),new r.TransactionInstruction({keys:u,programId:a,data:d})}function Xt(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==Vt.span)throw new a.Z0;const{keys:{account:n,currentAuthority:r,multiSigners:o},data:s}=Yt(t);if(s.instruction!==c.c.SetAuthority)throw new a.In;if(!n||!r)throw new a.Di;return{programId:e,keys:{account:n,currentAuthority:r,multiSigners:o},data:s}}function Yt({programId:t,keys:[e,n,...r],data:i}){const{instruction:o,authorityType:s,newAuthorityOption:a,newAuthority:c}=Vt.decode(i);return{programId:t,keys:{account:e,currentAuthority:n,multiSigners:r},data:{instruction:o,authorityType:s,newAuthority:a?c:null}}}async function Jt(t,e,n,o,s,a,c=[],u,d=i.H_){const[l,h]=g(o,c),f=(new r.Transaction).add($t(n,l,s,a,c,d));return await(0,r.sendAndConfirmTransaction)(t,f,[e,...h],u)}async function Qt(t,e,n,o,s=i.H_){const a=(new r.Transaction).add(yt(n,s));return await(0,r.sendAndConfirmTransaction)(t,a,[e],o)}var te=n("../../../node_modules/buffer/index.js").Buffer;const ee=(0,o.struct)([(0,o.u8)("instruction")]);function ne(t,e,n,o=[],s=i.H_){const a=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1}],n,o),u=te.alloc(ee.span);return ee.encode({instruction:c.c.ThawAccount},u),new r.TransactionInstruction({keys:a,programId:s,data:u})}function re(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==ee.span)throw new a.Z0;const{keys:{account:n,mint:r,authority:o,multiSigners:s},data:u}=ie(t);if(u.instruction!==c.c.ThawAccount)throw new a.In;if(!n||!r||!o)throw new a.Di;return{programId:e,keys:{account:n,mint:r,authority:o,multiSigners:s},data:u}}function ie({programId:t,keys:[e,n,r,...i],data:o}){return{programId:t,keys:{account:e,mint:n,authority:r,multiSigners:i},data:ee.decode(o)}}async function oe(t,e,n,o,s,a=[],c,u=i.H_){const[d,l]=g(s,a),h=(new r.Transaction).add(ne(n,o,d,a,u));return await(0,r.sendAndConfirmTransaction)(t,h,[e,...l],c)}var se=n("../../../node_modules/buffer/index.js").Buffer;const ae=(0,o.struct)([(0,o.u8)("instruction"),(0,s.AW)("amount")]);function ce(t,e,n,o,s=[],a=i.H_){const u=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,s),d=se.alloc(ae.span);return ae.encode({instruction:c.c.Transfer,amount:BigInt(o)},d),new r.TransactionInstruction({keys:u,programId:a,data:d})}function ue(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==ae.span)throw new a.Z0;const{keys:{source:n,destination:r,owner:o,multiSigners:s},data:u}=de(t);if(u.instruction!==c.c.Transfer)throw new a.In;if(!n||!r||!o)throw new a.Di;return{programId:e,keys:{source:n,destination:r,owner:o,multiSigners:s},data:u}}function de({programId:t,keys:[e,n,r,...i],data:o}){return{programId:t,keys:{source:e,destination:n,owner:r,multiSigners:i},data:ae.decode(o)}}async function le(t,e,n,o,s,a,c=[],u,d=i.H_){const[l,h]=g(s,c),f=(new r.Transaction).add(ce(n,o,l,a,c,d));return await(0,r.sendAndConfirmTransaction)(t,f,[e,...h],u)}var he=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/transferChecked.js");async function fe(t,e,n,o,s,a,c,u,d=[],l,h=i.H_){const[f,p]=g(a,d),m=(new r.Transaction).add((0,he.De)(n,o,s,f,c,u,d,h));return await(0,r.sendAndConfirmTransaction)(t,m,[e,...p],l)}var pe=n("../../../node_modules/buffer/index.js").Buffer;function me(t,e,n=i.H_){const s=[{pubkey:t,isSigner:!1,isWritable:!1}],a=pe.from(e,"utf8"),u=(0,o.struct)([(0,o.u8)("instruction"),(0,o.blob)(a.length,"amount")]),d=pe.alloc(u.span);return u.encode({instruction:c.c.UiAmountToAmount,amount:a},d),new r.TransactionInstruction({keys:s,programId:n,data:d})}function ye(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;const n=(0,o.struct)([(0,o.u8)("instruction"),(0,o.blob)(t.data.length-1,"amount")]);if(t.data.length!==n.span)throw new a.Z0;const{keys:{mint:r},data:s}=ge(t);if(s.instruction!==c.c.UiAmountToAmount)throw new a.In;if(!r)throw new a.Di;return{programId:e,keys:{mint:r},data:s}}function ge({programId:t,keys:[e],data:n}){return{programId:t,keys:{mint:e},data:(0,o.struct)([(0,o.u8)("instruction"),(0,o.blob)(n.length-1,"amount")]).decode(n)}}var be=n("../../../node_modules/buffer/index.js").Buffer;async function ke(t,e,n,o,a=i.H_){const c=(new r.Transaction).add(me(n,o,a)),{returnData:u,err:d}=(await t.simulateTransaction(c,[e],!1)).value;if(u){const t=be.from(u.data[0],u.data[1]);return(0,s.AW)().decode(t)}return d}var we,Ie=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/accountType.js"),Ae=n("../../../node_modules/buffer/index.js").Buffer;!function(t){t[t.Enable=0]="Enable",t[t.Disable=1]="Disable"}(we||(we={}));const Se=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("cpiGuardInstruction")]);function _e(t,e,n=[],r=i.nA){return xe(we.Enable,t,e,n,r)}function Te(t,e,n=[],r=i.nA){return xe(we.Disable,t,e,n,r)}function xe(t,e,n,o,s){if(!(0,i.lP)(s))throw new a.BT;const u=(0,k.s)([{pubkey:e,isSigner:!1,isWritable:!0}],n,o),d=Ae.alloc(Se.span);return Se.encode({instruction:c.c.CpiGuardExtension,cpiGuardInstruction:t},d),new r.TransactionInstruction({keys:u,programId:s,data:d})}async function ve(t,e,n,o,s=[],a,c=i.nA){const[u,d]=g(o,s),l=(new r.Transaction).add(_e(n,u,d,c));return await(0,r.sendAndConfirmTransaction)(t,l,[e,...d],a)}async function Ee(t,e,n,o,s=[],a,c=i.nA){const[u,d]=g(o,s),l=(new r.Transaction).add(Te(n,u,d,c));return await(0,r.sendAndConfirmTransaction)(t,l,[e,...d],a)}var Pe,Be=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/cpiGuard/state.js"),Re=n("../../../node_modules/buffer/index.js").Buffer;!function(t){t[t.Initialize=0]="Initialize",t[t.Update=1]="Update"}(Pe||(Pe={}));const Ce=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("defaultAccountStateInstruction"),(0,o.u8)("accountState")]);function We(t,e,n=i.nA){if(!(0,i.lP)(n))throw new a.BT;const o=[{pubkey:t,isSigner:!1,isWritable:!0}],s=Re.alloc(Ce.span);return Ce.encode({instruction:c.c.DefaultAccountStateExtension,defaultAccountStateInstruction:Pe.Initialize,accountState:e},s),new r.TransactionInstruction({keys:o,programId:n,data:s})}function ze(t,e,n,o=[],s=i.nA){if(!(0,i.lP)(s))throw new a.BT;const u=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0}],n,o),d=Re.alloc(Ce.span);return Ce.encode({instruction:c.c.DefaultAccountStateExtension,defaultAccountStateInstruction:Pe.Update,accountState:e},d),new r.TransactionInstruction({keys:u,programId:s,data:d})}async function Le(t,e,n,o,s,a=i.nA){const c=(new r.Transaction).add(We(n,o,a));return await(0,r.sendAndConfirmTransaction)(t,c,[e],s)}async function Oe(t,e,n,o,s,a=[],c,u=i.nA){const[d,l]=g(s,a),h=(new r.Transaction).add(ze(n,o,d,l,u));return await(0,r.sendAndConfirmTransaction)(t,h,[e,...l],c)}var Ue=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/defaultAccountState/state.js"),je=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/immutableOwner.js"),Ke=n("../../../node_modules/buffer/index.js").Buffer;const Ne=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("decimals"),(0,s.ZL)("mintAuthority"),(0,o.u8)("freezeAuthorityOption"),(0,s.ZL)("freezeAuthority")]);function Me(t,e,n,o,s=i.H_){const a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],u=Ke.alloc(Ne.span);return Ne.encode({instruction:c.c.InitializeMint,decimals:e,mintAuthority:n,freezeAuthorityOption:o?1:0,freezeAuthority:o||new r.PublicKey(0)},u),new r.TransactionInstruction({keys:a,programId:s,data:u})}function De(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==Ne.span)throw new a.Z0;const{keys:{mint:n,rent:r},data:o}=Fe(t);if(o.instruction!==c.c.InitializeMint)throw new a.In;if(!n||!r)throw new a.Di;return{programId:e,keys:{mint:n,rent:r},data:o}}function Fe({programId:t,keys:[e,n],data:r}){const{instruction:i,decimals:o,mintAuthority:s,freezeAuthorityOption:a,freezeAuthority:c}=Ne.decode(r);return{programId:t,keys:{mint:e,rent:n},data:{instruction:i,decimals:o,mintAuthority:s,freezeAuthority:a?c:null}}}var qe,He=n("../../../node_modules/buffer/index.js").Buffer;!function(t){t[t.Initialize=0]="Initialize",t[t.UpdateRate=1]="UpdateRate"}(qe||(qe={}));const Ze=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("interestBearingMintInstruction"),(0,s.ZL)("rateAuthority"),(0,o.s16)("rate")]),Ge=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("interestBearingMintInstruction"),(0,o.s16)("rate")]);function Ve(t,e,n,o=i.nA){const s=[{pubkey:t,isSigner:!1,isWritable:!0}],a=He.alloc(Ze.span);return Ze.encode({instruction:c.c.InterestBearingMintExtension,interestBearingMintInstruction:qe.Initialize,rateAuthority:e,rate:n},a),new r.TransactionInstruction({keys:s,programId:o,data:a})}function $e(t,e,n,o=[],s=i.nA){const a=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!o.length,isWritable:!1}],e,o),u=He.alloc(Ge.span);return Ge.encode({instruction:c.c.InterestBearingMintExtension,interestBearingMintInstruction:qe.UpdateRate,rate:n},u),new r.TransactionInstruction({keys:a,programId:s,data:u})}async function Xe(t,e,n,o,s,a,c,u=r.Keypair.generate(),d,l=i.nA){const h=(0,N.jk)([N.nw.InterestBearingConfig]),f=await t.getMinimumBalanceForRentExemption(h),p=(new r.Transaction).add(r.SystemProgram.createAccount({fromPubkey:e.publicKey,newAccountPubkey:u.publicKey,space:h,lamports:f,programId:l}),Ve(u.publicKey,s,a,l),Me(u.publicKey,c,n,o,l));return await(0,r.sendAndConfirmTransaction)(t,p,[e,u],d),u.publicKey}async function Ye(t,e,n,o,s,a=[],c,u=i.nA){const[d,l]=g(o,a),h=(new r.Transaction).add($e(n,d,s,l,u));return await(0,r.sendAndConfirmTransaction)(t,h,[e,o,...l],c)}var Je,Qe=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/interestBearingMint/state.js"),tn=n("../../../node_modules/buffer/index.js").Buffer;!function(t){t[t.Enable=0]="Enable",t[t.Disable=1]="Disable"}(Je||(Je={}));const en=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("memoTransferInstruction")]);function nn(t,e,n=[],r=i.nA){return on(Je.Enable,t,e,n,r)}function rn(t,e,n=[],r=i.nA){return on(Je.Disable,t,e,n,r)}function on(t,e,n,o,s){if(!(0,i.lP)(s))throw new a.BT;const u=(0,k.s)([{pubkey:e,isSigner:!1,isWritable:!0}],n,o),d=tn.alloc(en.span);return en.encode({instruction:c.c.MemoTransferExtension,memoTransferInstruction:t},d),new r.TransactionInstruction({keys:u,programId:s,data:d})}async function sn(t,e,n,o,s=[],a,c=i.nA){const[u,d]=g(o,s),l=(new r.Transaction).add(nn(n,u,d,c));return await(0,r.sendAndConfirmTransaction)(t,l,[e,...d],a)}async function an(t,e,n,o,s=[],a,c=i.nA){const[u,d]=g(o,s),l=(new r.Transaction).add(rn(n,u,d,c));return await(0,r.sendAndConfirmTransaction)(t,l,[e,...d],a)}var cn,un=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/memoTransfer/state.js"),dn=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/mintCloseAuthority.js"),ln=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/nonTransferable.js"),hn=n("../../../node_modules/buffer/index.js").Buffer;!function(t){t[t.InitializeTransferFeeConfig=0]="InitializeTransferFeeConfig",t[t.TransferCheckedWithFee=1]="TransferCheckedWithFee",t[t.WithdrawWithheldTokensFromMint=2]="WithdrawWithheldTokensFromMint",t[t.WithdrawWithheldTokensFromAccounts=3]="WithdrawWithheldTokensFromAccounts",t[t.HarvestWithheldTokensToMint=4]="HarvestWithheldTokensToMint",t[t.SetTransferFee=5]="SetTransferFee"}(cn||(cn={}));const fn=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("transferFeeInstruction"),(0,o.u8)("transferFeeConfigAuthorityOption"),(0,s.ZL)("transferFeeConfigAuthority"),(0,o.u8)("withdrawWithheldAuthorityOption"),(0,s.ZL)("withdrawWithheldAuthority"),(0,o.u16)("transferFeeBasisPoints"),(0,s.AW)("maximumFee")]);function pn(t,e,n,o,s,u=i.nA){if(!(0,i.lP)(u))throw new a.BT;const d=[{pubkey:t,isSigner:!1,isWritable:!0}],l=hn.alloc(fn.span);return fn.encode({instruction:c.c.TransferFeeExtension,transferFeeInstruction:cn.InitializeTransferFeeConfig,transferFeeConfigAuthorityOption:e?1:0,transferFeeConfigAuthority:e||new r.PublicKey(0),withdrawWithheldAuthorityOption:n?1:0,withdrawWithheldAuthority:n||new r.PublicKey(0),transferFeeBasisPoints:o,maximumFee:s},l),new r.TransactionInstruction({keys:d,programId:u,data:l})}function mn(t,e){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==fn.span)throw new a.Z0;const{keys:{mint:n},data:r}=yn(t);if(r.instruction!==c.c.TransferFeeExtension||r.transferFeeInstruction!==cn.InitializeTransferFeeConfig)throw new a.In;if(!n)throw new a.Di;return{programId:e,keys:{mint:n},data:r}}function yn({programId:t,keys:[e],data:n}){const{instruction:r,transferFeeInstruction:i,transferFeeConfigAuthorityOption:o,transferFeeConfigAuthority:s,withdrawWithheldAuthorityOption:a,withdrawWithheldAuthority:c,transferFeeBasisPoints:u,maximumFee:d}=fn.decode(n);return{programId:t,keys:{mint:e},data:{instruction:r,transferFeeInstruction:i,transferFeeConfigAuthority:o?s:null,withdrawWithheldAuthority:a?c:null,transferFeeBasisPoints:u,maximumFee:d}}}const gn=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("transferFeeInstruction"),(0,s.AW)("amount"),(0,o.u8)("decimals"),(0,s.AW)("fee")]);function bn(t,e,n,o,s,u,d,l=[],h=i.nA){if(!(0,i.lP)(h))throw new a.BT;const f=hn.alloc(gn.span);gn.encode({instruction:c.c.TransferFeeExtension,transferFeeInstruction:cn.TransferCheckedWithFee,amount:s,decimals:u,fee:d},f);const p=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0}],o,l);return new r.TransactionInstruction({keys:p,programId:h,data:f})}function kn(t,e){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==gn.span)throw new a.Z0;const{keys:{source:n,mint:r,destination:i,authority:o,signers:s},data:u}=wn(t);if(u.instruction!==c.c.TransferFeeExtension||u.transferFeeInstruction!==cn.TransferCheckedWithFee)throw new a.In;if(!r)throw new a.Di;return{programId:e,keys:{source:n,mint:r,destination:i,authority:o,signers:s||null},data:u}}function wn({programId:t,keys:[e,n,r,i,...o],data:s}){const{instruction:a,transferFeeInstruction:c,amount:u,decimals:d,fee:l}=gn.decode(s);return{programId:t,keys:{source:e,mint:n,destination:r,authority:i,signers:o},data:{instruction:a,transferFeeInstruction:c,amount:u,decimals:d,fee:l}}}const In=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("transferFeeInstruction")]);function An(t,e,n,o=[],s=i.nA){if(!(0,i.lP)(s))throw new a.BT;const u=hn.alloc(In.span);In.encode({instruction:c.c.TransferFeeExtension,transferFeeInstruction:cn.WithdrawWithheldTokensFromMint},u);const d=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,o);return new r.TransactionInstruction({keys:d,programId:s,data:u})}function Sn(t,e){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==In.span)throw new a.Z0;const{keys:{mint:n,destination:r,authority:i,signers:o},data:s}=_n(t);if(s.instruction!==c.c.TransferFeeExtension||s.transferFeeInstruction!==cn.WithdrawWithheldTokensFromMint)throw new a.In;if(!n)throw new a.Di;return{programId:e,keys:{mint:n,destination:r,authority:i,signers:o||null},data:s}}function _n({programId:t,keys:[e,n,r,...i],data:o}){const{instruction:s,transferFeeInstruction:a}=In.decode(o);return{programId:t,keys:{mint:e,destination:n,authority:r,signers:i},data:{instruction:s,transferFeeInstruction:a}}}const Tn=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("transferFeeInstruction"),(0,o.u8)("numTokenAccounts")]);function xn(t,e,n,o,s,u=i.nA){if(!(0,i.lP)(u))throw new a.BT;const d=hn.alloc(Tn.span);Tn.encode({instruction:c.c.TransferFeeExtension,transferFeeInstruction:cn.WithdrawWithheldTokensFromAccounts,numTokenAccounts:s.length},d);const l=(0,k.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,o);for(const t of s)l.push({pubkey:t,isSigner:!1,isWritable:!0});return new r.TransactionInstruction({keys:l,programId:u,data:d})}function vn(t,e){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==Tn.span)throw new a.Z0;const{keys:{mint:n,destination:r,authority:i,signers:o,sources:s},data:u}=En(t);if(u.instruction!==c.c.TransferFeeExtension||u.transferFeeInstruction!==cn.WithdrawWithheldTokensFromAccounts)throw new a.In;if(!n)throw new a.Di;return{programId:e,keys:{mint:n,destination:r,authority:i,signers:o||null,sources:s||null},data:u}}function En({programId:t,keys:e,data:n}){const{instruction:r,transferFeeInstruction:i,numTokenAccounts:o}=Tn.decode(n),[s,a,c,u,d]=[e[0],e[1],e[2],e.slice(3,3+o),e.slice(-1*o)];return{programId:t,keys:{mint:s,destination:a,authority:c,signers:u,sources:d},data:{instruction:r,transferFeeInstruction:i,numTokenAccounts:o}}}const Pn=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("transferFeeInstruction")]);function Bn(t,e,n=i.nA){if(!(0,i.lP)(n))throw new a.BT;const o=hn.alloc(Pn.span);Pn.encode({instruction:c.c.TransferFeeExtension,transferFeeInstruction:cn.HarvestWithheldTokensToMint},o);const s=[];s.push({pubkey:t,isSigner:!1,isWritable:!0});for(const t of e)s.push({pubkey:t,isSigner:!1,isWritable:!0});return new r.TransactionInstruction({keys:s,programId:n,data:o})}function Rn(t,e){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==Pn.span)throw new a.Z0;const{keys:{mint:n,sources:r},data:i}=Cn(t);if(i.instruction!==c.c.TransferFeeExtension||i.transferFeeInstruction!==cn.HarvestWithheldTokensToMint)throw new a.In;if(!n)throw new a.Di;return{programId:e,keys:{mint:n,sources:r},data:i}}function Cn({programId:t,keys:[e,...n],data:r}){const{instruction:i,transferFeeInstruction:o}=Pn.decode(r);return{programId:t,keys:{mint:e,sources:n},data:{instruction:i,transferFeeInstruction:o}}}async function Wn(t,e,n,o,s,a,c,u,d,l=[],h,f=i.nA){const[p,m]=g(a,l),y=(new r.Transaction).add(bn(n,o,s,p,c,u,d,l,f));return await(0,r.sendAndConfirmTransaction)(t,y,[e,...m],h)}async function zn(t,e,n,o,s,a=[],c,u=i.nA){const[d,l]=g(s,a),h=(new r.Transaction).add(An(n,o,d,l,u));return await(0,r.sendAndConfirmTransaction)(t,h,[e,...l],c)}async function Ln(t,e,n,o,s,a,c,u,d=i.nA){const[l,h]=g(s,a),f=(new r.Transaction).add(xn(n,o,l,h,c,d));return await(0,r.sendAndConfirmTransaction)(t,f,[e,...h],u)}async function On(t,e,n,o,s,a=i.nA){const c=(new r.Transaction).add(Bn(n,o,a));return await(0,r.sendAndConfirmTransaction)(t,c,[e],s)}var Un=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/transferFee/state.js"),jn=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/permanentDelegate.js"),Kn=n("../../../node_modules/buffer/index.js").Buffer;const Nn=(0,o.struct)([(0,o.u8)("instruction"),(0,s.ZL)("owner")]);function Mn(t,e,n,o=i.H_){const s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:r.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],a=Kn.alloc(Nn.span);return Nn.encode({instruction:c.c.InitializeAccount2,owner:n},a),new r.TransactionInstruction({keys:s,programId:o,data:a})}function Dn(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==Nn.span)throw new a.Z0;const{keys:{account:n,mint:r,rent:o},data:s}=Fn(t);if(s.instruction!==c.c.InitializeAccount2)throw new a.In;if(!n||!r||!o)throw new a.Di;return{programId:e,keys:{account:n,mint:r,rent:o},data:s}}function Fn({programId:t,keys:[e,n,r],data:i}){return{programId:t,keys:{account:e,mint:n,rent:r},data:Nn.decode(i)}}var qn=n("../../../node_modules/buffer/index.js").Buffer;const Hn=(0,o.struct)([(0,o.u8)("instruction"),(0,s.ZL)("owner")]);function Zn(t,e,n,o=i.H_){const s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1}],a=qn.alloc(Hn.span);return Hn.encode({instruction:c.c.InitializeAccount3,owner:n},a),new r.TransactionInstruction({keys:s,programId:o,data:a})}function Gn(t,e=i.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==Hn.span)throw new a.Z0;const{keys:{account:n,mint:r},data:o}=Vn(t);if(o.instruction!==c.c.InitializeAccount3)throw new a.In;if(!n||!r)throw new a.Di;return{programId:e,keys:{account:n,mint:r},data:o}}function Vn({programId:t,keys:[e,n],data:r}){return{programId:t,keys:{account:e,mint:n},data:Hn.decode(r)}}function $n(t,e=i.H_){if(!t.data.length)throw new a.Z0;const n=(0,o.u8)().decode(t.data);if(n===c.c.InitializeMint)return De(t,e);if(n===c.c.InitializeAccount)return q(t,e);if(n===c.c.InitializeMultisig)return st(t,e);if(n===c.c.Transfer)return ue(t,e);if(n===c.c.Approve)return(0,y.qE)(t,e);if(n===c.c.Revoke)return Ft(t,e);if(n===c.c.SetAuthority)return Xt(t,e);if(n===c.c.MintTo)return Rt(t,e);if(n===c.c.Burn)return P(t,e);if(n===c.c.CloseAccount)return(0,j.zw)(t,e);if(n===c.c.FreezeAccount)return _t(t,e);if(n===c.c.ThawAccount)return re(t,e);if(n===c.c.TransferChecked)return(0,he.R2)(t,e);if(n===c.c.ApproveChecked)return S(t,e);if(n===c.c.MintToChecked)return Ut(t,e);if(n===c.c.BurnChecked)return L(t,e);if(n===c.c.InitializeAccount2)return Dn(t,e);if(n===c.c.SyncNative)return gt(t,e);if(n===c.c.InitializeAccount3)return Gn(t,e);if(n===c.c.InitializeMint2)return tt(t,e);if(n===c.c.AmountToUiAmount)return h(t,e);if(n===c.c.UiAmountToAmount)return ye(t,e);if(n===c.c.InitializeMultisig2)throw new a.In;throw new a.In}function Xn(t){return t.data.instruction===c.c.InitializeMint}function Yn(t){return t.data.instruction===c.c.InitializeAccount}function Jn(t){return t.data.instruction===c.c.InitializeMultisig}function Qn(t){return t.data.instruction===c.c.Transfer}function tr(t){return t.data.instruction===c.c.Approve}function er(t){return t.data.instruction===c.c.Revoke}function nr(t){return t.data.instruction===c.c.SetAuthority}function rr(t){return t.data.instruction===c.c.MintTo}function ir(t){return t.data.instruction===c.c.Burn}function or(t){return t.data.instruction===c.c.CloseAccount}function sr(t){return t.data.instruction===c.c.FreezeAccount}function ar(t){return t.data.instruction===c.c.ThawAccount}function cr(t){return t.data.instruction===c.c.TransferChecked}function ur(t){return t.data.instruction===c.c.ApproveChecked}function dr(t){return t.data.instruction===c.c.MintToChecked}function lr(t){return t.data.instruction===c.c.BurnChecked}function hr(t){return t.data.instruction===c.c.InitializeAccount2}function fr(t){return t.data.instruction===c.c.SyncNative}function pr(t){return t.data.instruction===c.c.InitializeAccount3}function mr(t){return t.data.instruction===c.c.InitializeMint2}function yr(t){return t.data.instruction===c.c.AmountToUiAmount}function gr(t){return t.data.instruction===c.c.UiAmountToAmount}var br=n("../../../node_modules/buffer/index.js").Buffer;const kr=(0,o.struct)([(0,o.u8)("instruction")]);function wr(t,e){const n=[{pubkey:t,isSigner:!1,isWritable:!0}],i=br.alloc(kr.span);return kr.encode({instruction:c.c.InitializeImmutableOwner},i),new r.TransactionInstruction({keys:n,programId:e,data:i})}function Ir(t,e){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==kr.span)throw new a.Z0;const{keys:{account:n},data:r}=Ar(t);if(r.instruction!==c.c.InitializeImmutableOwner)throw new a.In;if(!n)throw new a.Di;return{programId:e,keys:{account:n},data:r}}function Ar({programId:t,keys:[e],data:n}){const{instruction:r}=kr.decode(n);return{programId:t,keys:{account:e},data:{instruction:r}}}var Sr=n("../../../node_modules/buffer/index.js").Buffer;const _r=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("closeAuthorityOption"),(0,s.ZL)("closeAuthority")]);function Tr(t,e,n){if(!(0,i.lP)(n))throw new a.BT;const o=[{pubkey:t,isSigner:!1,isWritable:!0}],s=Sr.alloc(_r.span);return _r.encode({instruction:c.c.InitializeMintCloseAuthority,closeAuthorityOption:e?1:0,closeAuthority:e||new r.PublicKey(0)},s),new r.TransactionInstruction({keys:o,programId:n,data:s})}function xr(t,e){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==_r.span)throw new a.Z0;const{keys:{mint:n},data:r}=vr(t);if(r.instruction!==c.c.InitializeMintCloseAuthority)throw new a.In;if(!n)throw new a.Di;return{programId:e,keys:{mint:n},data:r}}function vr({programId:t,keys:[e],data:n}){const{instruction:r,closeAuthorityOption:i,closeAuthority:o}=_r.decode(n);return{programId:t,keys:{mint:e},data:{instruction:r,closeAuthority:i?o:null}}}var Er=n("../../../node_modules/buffer/index.js").Buffer;function Pr(t,e,n,s,u=[],d=i.nA){if(!(0,i.lP)(d))throw new a.BT;const l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r.SystemProgram.programId,isSigner:!1,isWritable:!1}],h=(0,k.s)(l,s,u),f=(0,o.struct)([(0,o.u8)("instruction"),(0,o.seq)((0,o.u16)(),n.length,"extensionTypes")]),p=Er.alloc(f.span);return f.encode({instruction:c.c.Reallocate,extensionTypes:n},p),new r.TransactionInstruction({keys:h,programId:d,data:p})}var Br=n("../../../node_modules/buffer/index.js").Buffer;const Rr=(0,o.struct)([(0,o.u8)("instruction")]);function Cr(t,e){if(!(0,i.lP)(e))throw new a.BT;const n=[{pubkey:t,isSigner:!1,isWritable:!0}],o=Br.alloc(Rr.span);return Rr.encode({instruction:c.c.InitializeNonTransferableMint},o),new r.TransactionInstruction({keys:n,programId:e,data:o})}var Wr=n("../../../node_modules/buffer/index.js").Buffer;const zr=(0,o.struct)([(0,o.u8)("instruction"),(0,s.ZL)("delegate")]);function Lr(t,e,n){if(!(0,i.lP)(n))throw new a.BT;const o=[{pubkey:t,isSigner:!1,isWritable:!0}],s=Wr.alloc(zr.span);return zr.encode({instruction:c.c.InitializePermanentDelegate,delegate:e||new r.PublicKey(0)},s),new r.TransactionInstruction({keys:o,programId:n,data:s})}function Or(t,e){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==zr.span)throw new a.Z0;const{keys:{mint:n},data:r}=Ur(t);if(r.instruction!==c.c.InitializePermanentDelegate)throw new a.In;if(!n)throw new a.Di;return{programId:e,keys:{mint:n},data:r}}function Ur({programId:t,keys:[e],data:n}){const{instruction:r,delegate:i}=zr.decode(n);return{programId:t,keys:{mint:e},data:{instruction:r,delegate:i}}}},"../../../node_modules/@solana/spl-token/lib/esm/instructions/approve.js":function(t,e,n){n.d(e,{ey:function(){return l},g6:function(){return h},lF:function(){return p},qE:function(){return f}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),o=n("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),s=n("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),a=n("../../../node_modules/@solana/spl-token/lib/esm/errors.js"),c=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/internal.js"),u=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/types.js"),d=n("../../../node_modules/buffer/index.js").Buffer;const l=(0,r.struct)([(0,r.u8)("instruction"),(0,i.AW)("amount")]);function h(t,e,n,r,i=[],a=s.H_){const h=(0,c.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1}],n,i),f=d.alloc(l.span);return l.encode({instruction:u.c.Approve,amount:BigInt(r)},f),new o.TransactionInstruction({keys:h,programId:a,data:f})}function f(t,e=s.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==l.span)throw new a.Z0;const{keys:{account:n,delegate:r,owner:i,multiSigners:o},data:c}=p(t);if(c.instruction!==u.c.Approve)throw new a.In;if(!n||!r||!i)throw new a.Di;return{programId:e,keys:{account:n,delegate:r,owner:i,multiSigners:o},data:c}}function p({programId:t,keys:[e,n,r,...i],data:o}){return{programId:t,keys:{account:e,delegate:n,owner:r,multiSigners:i},data:l.decode(o)}}},"../../../node_modules/@solana/spl-token/lib/esm/instructions/associatedTokenAccount.js":function(t,e,n){n.d(e,{E:function(){return s},j:function(){return a}});var r=n("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),i=n("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),o=n("../../../node_modules/buffer/index.js").Buffer;function s(t,e,n,r,s=i.H_,a=i._u){return c(t,e,n,r,o.alloc(0),s,a)}function a(t,e,n,r,s=i.H_,a=i._u){return c(t,e,n,r,o.from([1]),s,a)}function c(t,e,n,o,s,a=i.H_,c=i._u){const u=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:r.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}];return new r.TransactionInstruction({keys:u,programId:c,data:s})}},"../../../node_modules/@solana/spl-token/lib/esm/instructions/closeAccount.js":function(t,e,n){n.d(e,{GT:function(){return d},Zu:function(){return l},bP:function(){return f},zw:function(){return h}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),o=n("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),s=n("../../../node_modules/@solana/spl-token/lib/esm/errors.js"),a=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/internal.js"),c=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/types.js"),u=n("../../../node_modules/buffer/index.js").Buffer;const d=(0,r.struct)([(0,r.u8)("instruction")]);function l(t,e,n,r=[],s=o.H_){const l=(0,a.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,r),h=u.alloc(d.span);return d.encode({instruction:c.c.CloseAccount},h),new i.TransactionInstruction({keys:l,programId:s,data:h})}function h(t,e=o.H_){if(!t.programId.equals(e))throw new s.yh;if(t.data.length!==d.span)throw new s.Z0;const{keys:{account:n,destination:r,authority:i,multiSigners:a},data:u}=f(t);if(u.instruction!==c.c.CloseAccount)throw new s.In;if(!n||!r||!i)throw new s.Di;return{programId:e,keys:{account:n,destination:r,authority:i,multiSigners:a},data:u}}function f({programId:t,keys:[e,n,r,...i],data:o}){return{programId:t,keys:{account:e,destination:n,authority:r,multiSigners:i},data:d.decode(o)}}},"../../../node_modules/@solana/spl-token/lib/esm/instructions/transferChecked.js":function(t,e,n){n.d(e,{CC:function(){return p},De:function(){return h},R2:function(){return f},vA:function(){return l}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),o=n("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),s=n("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),a=n("../../../node_modules/@solana/spl-token/lib/esm/errors.js"),c=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/internal.js"),u=n("../../../node_modules/@solana/spl-token/lib/esm/instructions/types.js"),d=n("../../../node_modules/buffer/index.js").Buffer;const l=(0,r.struct)([(0,r.u8)("instruction"),(0,i.AW)("amount"),(0,r.u8)("decimals")]);function h(t,e,n,r,i,a,h=[],f=s.H_){const p=(0,c.s)([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0}],r,h),m=d.alloc(l.span);return l.encode({instruction:u.c.TransferChecked,amount:BigInt(i),decimals:a},m),new o.TransactionInstruction({keys:p,programId:f,data:m})}function f(t,e=s.H_){if(!t.programId.equals(e))throw new a.yh;if(t.data.length!==l.span)throw new a.Z0;const{keys:{source:n,mint:r,destination:i,owner:o,multiSigners:c},data:d}=p(t);if(d.instruction!==u.c.TransferChecked)throw new a.In;if(!(n&&r&&i&&o))throw new a.Di;return{programId:e,keys:{source:n,mint:r,destination:i,owner:o,multiSigners:c},data:d}}function p({programId:t,keys:[e,n,r,i,...o],data:s}){return{programId:t,keys:{source:e,mint:n,destination:r,owner:i,multiSigners:o},data:l.decode(s)}}},"../../../node_modules/@solana/spl-token/lib/esm/state/account.js":function(t,e,n){n.d(e,{D0:function(){return p},Dl:function(){return g},Du:function(){return m},lZ:function(){return f},m3:function(){return r},nS:function(){return b},p0:function(){return h},pE:function(){return y}});var r,i=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),o=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),s=n("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),a=n("../../../node_modules/@solana/spl-token/lib/esm/errors.js"),c=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/accountType.js"),u=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js"),d=n("../../../node_modules/@solana/spl-token/lib/esm/state/multisig.js"),l=n("../../../node_modules/buffer/index.js").Buffer;!function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"}(r||(r={}));const h=(0,i.struct)([(0,o.ZL)("mint"),(0,o.ZL)("owner"),(0,o.AW)("amount"),(0,i.u32)("delegateOption"),(0,o.ZL)("delegate"),(0,i.u8)("state"),(0,i.u32)("isNativeOption"),(0,o.AW)("isNative"),(0,o.AW)("delegatedAmount"),(0,i.u32)("closeAuthorityOption"),(0,o.ZL)("closeAuthority")]),f=h.span;async function p(t,e,n,r=s.H_){return b(e,await t.getAccountInfo(e,n),r)}async function m(t,e,n,r=s.H_){const i=await t.getMultipleAccountsInfo(e,n);return e.map(((t,e)=>b(t,i[e],r)))}async function y(t,e){return await g(t,[],e)}async function g(t,e,n){const r=(0,u.Xh)(e);return await t.getMinimumBalanceForRentExemption(r,n)}function b(t,e,n=s.H_){if(!e)throw new a.We;if(!e.owner.equals(n))throw new a.Or;if(e.data.length<f)throw new a.$O;const i=h.decode(e.data.slice(0,f));let o=l.alloc(0);if(e.data.length>f){if(e.data.length===d.Wx)throw new a.$O;if(e.data[f]!=c.Q.Account)throw new a.iK;o=e.data.slice(f+c.t)}return{address:t,mint:i.mint,owner:i.owner,amount:i.amount,delegate:i.delegateOption?i.delegate:null,delegatedAmount:i.delegatedAmount,isInitialized:i.state!==r.Uninitialized,isFrozen:i.state===r.Frozen,isNative:!!i.isNativeOption,rentExemptReserve:i.isNativeOption?i.isNative:null,closeAuthority:i.closeAuthorityOption?i.closeAuthority:null,tlvData:o}}},"../../../node_modules/@solana/spl-token/lib/esm/state/mint.js":function(t,e,n){n.d(e,{Am:function(){return k},Bl:function(){return p},MO:function(){return w},Mg:function(){return g},ih:function(){return m},qT:function(){return f},rs:function(){return y},s2:function(){return b}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),o=n("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),s=n("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),a=n("../../../node_modules/@solana/spl-token/lib/esm/errors.js"),c=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/accountType.js"),u=n("../../../node_modules/@solana/spl-token/lib/esm/extensions/extensionType.js"),d=n("../../../node_modules/@solana/spl-token/lib/esm/state/account.js"),l=n("../../../node_modules/@solana/spl-token/lib/esm/state/multisig.js"),h=n("../../../node_modules/buffer/index.js").Buffer;const f=(0,r.struct)([(0,r.u32)("mintAuthorityOption"),(0,i.ZL)("mintAuthority"),(0,i.AW)("supply"),(0,r.u8)("decimals"),(0,i.Xg)("isInitialized"),(0,r.u32)("freezeAuthorityOption"),(0,i.ZL)("freezeAuthority")]),p=f.span;async function m(t,e,n,r=s.H_){return y(e,await t.getAccountInfo(e,n),r)}function y(t,e,n=s.H_){if(!e)throw new a.We;if(!e.owner.equals(n))throw new a.Or;if(e.data.length<p)throw new a.$O;const r=f.decode(e.data.slice(0,p));let i=h.alloc(0);if(e.data.length>p){if(e.data.length<=d.lZ)throw new a.$O;if(e.data.length===l.Wx)throw new a.$O;if(e.data[d.lZ]!=c.Q.Mint)throw new a.iT;i=e.data.slice(d.lZ+c.t)}return{address:t,mintAuthority:r.mintAuthorityOption?r.mintAuthority:null,supply:r.supply,decimals:r.decimals,isInitialized:r.isInitialized,freezeAuthority:r.freezeAuthorityOption?r.freezeAuthority:null,tlvData:i}}async function g(t,e){return await b(t,[],e)}async function b(t,e,n){const r=(0,u.jk)(e);return await t.getMinimumBalanceForRentExemption(r,n)}async function k(t,e,n=!1,r=s.H_,i=s._u){if(!n&&!o.PublicKey.isOnCurve(e.toBuffer()))throw new a.Gl;const[c]=await o.PublicKey.findProgramAddress([e.toBuffer(),r.toBuffer(),t.toBuffer()],i);return c}function w(t,e,n=!1,r=s.H_,i=s._u){if(!n&&!o.PublicKey.isOnCurve(e.toBuffer()))throw new a.Gl;const[c]=o.PublicKey.findProgramAddressSync([e.toBuffer(),r.toBuffer(),t.toBuffer()],i);return c}},"../../../node_modules/@solana/spl-token/lib/esm/state/multisig.js":function(t,e,n){n.d(e,{Wx:function(){return c},YA:function(){return d},Yv:function(){return l},of:function(){return a},rb:function(){return u}});var r=n("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),i=n("../../../node_modules/@solana/buffer-layout-utils/lib/esm/index.mjs"),o=n("../../../node_modules/@solana/spl-token/lib/esm/constants.js"),s=n("../../../node_modules/@solana/spl-token/lib/esm/errors.js");const a=(0,r.struct)([(0,r.u8)("m"),(0,r.u8)("n"),(0,i.Xg)("isInitialized"),(0,i.ZL)("signer1"),(0,i.ZL)("signer2"),(0,i.ZL)("signer3"),(0,i.ZL)("signer4"),(0,i.ZL)("signer5"),(0,i.ZL)("signer6"),(0,i.ZL)("signer7"),(0,i.ZL)("signer8"),(0,i.ZL)("signer9"),(0,i.ZL)("signer10"),(0,i.ZL)("signer11")]),c=a.span;async function u(t,e,n,r=o.H_){return d(e,await t.getAccountInfo(e,n),r)}function d(t,e,n=o.H_){if(!e)throw new s.We;if(!e.owner.equals(n))throw new s.Or;if(e.data.length!=c)throw new s.$O;return{address:t,...a.decode(e.data)}}async function l(t,e){return await t.getMinimumBalanceForRentExemption(c,e)}}}]);